<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>Window server events</title>
<link href="../../../../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="WindowServerGuide1%2eWindowServerEvents"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../../../../index/index.html"><img
src="../../../../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../../../../GlobalGlossary/index.html"><img src="../../../../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="index.html"><img src="../../../../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="GeneralEvents.html"><img src="../../../../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../../../../Product/Generic/APIGuide/index.html">API&nbsp;Guide</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../index.html">Graphics</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../index.html">Using&nbsp;Window&nbsp;Server</a>&nbsp;<span class="separator">&#187;</span>
<a href="../index.html">Window&nbsp;server&nbsp;architecture</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Window&nbsp;server&nbsp;events</a>&nbsp;<span class="separator">&#187;</span>
Window&nbsp;server&nbsp;events</p>

<hr noshade size="1">
<div class="AuthoredContent">


</div><div class="Head1">

<h1>Window server events</h1>
</div><div class="Bodytext">
<p>A client application  connects to the window
server by creating a window server session and calling
<a href="../../../../../APIReference/WindowServerClientSide/RWsSessionClass.html#%3a%3aRWsSession%3a%3aConnect%28%29" title="Connects the client session to the window server"><code class="ApiItem">RWsSession::Connect()</code></a>. Events generated by the window server are
then delivered to the client via the session, and the client must handle these
events appropriately. </p>
<div class="Figure">
<p class="Image"><img src="windowserver_event.png" alt="Window server event types"  border="0"></p>
<p class="Caption">Window server event types</p>
</div><p>The window server generates events of three different classes:</p>
<ul>
<li>
<p>a general event, <a href="../../../../../APIReference/WindowServerClientSide/TWsEventClass.html#%3a%3aTWsEvent" title="Window server event"><code class="ApiItem">TWsEvent</code></a> which should be handled by an active object of standard priority, and represents user input events such as pointer and key events
</p><p>see <a href="GeneralEvents.html#WindowServerGuide%2eGeneralEvents">General events</a></p>
</li>
<li>
<p>a redraw event, <a href="../../../../../APIReference/WindowServerClientSide/TWsRedrawEventClass.html#%3a%3aTWsRedrawEvent" title="Window server redraw event"><code class="ApiItem">TWsRedrawEvent</code></a> which should be handled by an active object of lower priority</p>
<p>see <a href="RedrawEvents.html#WindowServerGuide%2eRedrawEvents">Redraw events</a></p></li>
<li>
<p>a priority key event, <a href="../../../../../APIReference/WindowServerClientSide/TWsPriorityKeyEventClass.html#%3a%3aTWsPriorityKeyEvent" title="Priority key events"><code class="ApiItem">TWsPriorityKeyEvent</code></a> which should be handled by an active object of higher priority</p><p>see <a href="PriorityKeyEvents.html#WindowServerGuide%2ePriorityKeyEvents">Priority key events</a></p>
</li>
</ul>
<p>All window server applications handle standard events, and nearly all handle redraw events. Only a few, however, handle priority key events.  It is only in very rare cases that an application does not handle redraw events, as this will require that all its windows are backed-up windows.
</p><p>Events are always associated with a window. For some event types, such as key events, this is a window group; for other event types, such as pointer events, it is a drawable window. The event delivered to the client contains a handle that can be used to identify the window: this is the handle that was passed as a parameter when the window was created. In the case of window groups, however, this is usually unnecessary, because most applications have only one window group.
</p>
<p>Each event class should be handled by its own active object. This is so that the different classes may be handled at different priorities.  </p>
<a name="1.10"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Handling events</h2>
</div><div class="Bodytext">
<p>The window server maintains a server-side buffer of all events
queued to an application — each application has its own queue within the buffer (this is only for General Events, Redraw and Priority Key events are done by a different mechanism). Each application
must handle events appropriately. The <a href="../../../../../APIReference/WindowServerClientSide/RWsSessionClass.html#%3a%3aRWsSession%3a%3aGetEvent%28%29" title="Gets a standard event from the session for processing"><code class="ApiItem">RWsSession::GetEvent()</code></a> function (or
<a href="../../../../../APIReference/WindowServerClientSide/RWsSessionClass.html#%3a%3aRWsSession%3a%3aGetRedraw%28%29" title="Gets the redraw event from the session"><code class="ApiItem">RWsSession::GetRedraw()</code></a> or <a href="../../../../../APIReference/WindowServerClientSide/RWsSessionClass.html#%3a%3aRWsSession%3a%3aGetPriorityKey%28%29" title="Gets the completed priority key event from the window server session"><code class="ApiItem">RWsSession::GetPriorityKey()</code></a>) must be called as
the first stage of handling a completed request, and the event must then be
analysed and handled.</p>
<p>Each event must be handled relatively quickly (at most a couple of
seconds) so that the application remains responsive to user input. If an
event requires more extended processing (such as a key which causes a large
spreadsheet recalculation), then this processing should be split into smaller
chunks and handled by a client-side active object running at lower priority
than the <code>GetEvent()</code> handler.</p>
<p>An application which does not observe these protocols will appear
to hang — though it will not hang the whole machine. The window
server supports hotkeys which it handles directly, so that a badly behaved
application may be killed by the server.</p>
<a name="1.11"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>See also</h2>
</div><div class="Bodytext">
<p><a href="../../../../Base/InterProcessCommunication/AsynchronousServicesGuide/AsynchronousServicesGuide3/ActiveObjects.guide.html#AsynchronousServicesGuide3%2eactive%2dobjects">Active objects</a>.</p>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
