<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>Introduction to transactions</title>
<link href="../../../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="StoresGuide6%2etransactions%2eintroduction"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../../../_index/index.html"><img
src="../../../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../../../GlobalGlossary/index.html"><img src="../../../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="index.html"><img src="../../../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="HowToCommitAndRevert.guide.html"><img src="../../../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../../../Product/Generic/APIGuide/index.html">API&nbsp;Guide</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../index.html">Base</a>&nbsp;<span class="separator">&#187;</span>
<a href="../index.html">Stores</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Transactions</a>&nbsp;<span class="separator">&#187;</span>
Introduction&nbsp;to&nbsp;transactions</p>

<hr noshade size="1">
<div class="AuthoredContent">


</div><div class="Head1">

<h1>Introduction to transactions</h1>
</div><div class="Bodytext">
<p>A transaction is a series of operations on a store, normally
completed by committing them using the store's <code>CommitL()</code> function.
Transactions are supported by the commit and revert protocol.</p>
<p>The series of operations forming a transaction must all succeed for
the transaction to be successful.</p>
<p>If a leave occurs during an operation on the store during a
transaction, or if the store's <code>RevertL()</code> function is called
explicitly, the transaction is reverted. This facility parallels the commit and
rollback functions which are conventional in databases. However, reverting is
not quite the same as rolling back; integrity of data is guaranteed, but some
indexes may be corrupted.</p>
<p>The commit and revert protocol is useful for ensuring that persistent
data moves from one consistent state to another and for guaranteeing the
integrity of persistent store data in the event of failures.</p>
<p>Typically, changes to a store are not made permanent until they are
committed, establishing what is called a commit point. Until such changes are
committed, they can be rolled back or reverted, effectively causing the store
to revert back to its state before the changes were made. If a process
termination or a media failure occurs, the store reverts automatically to its
state at the last successful commit point.</p>
<p>In permanent file stores the protocol applies to:</p>
<ul>
<li>
<p>generating new streams</p>
</li>
<li>
<p>deleting streams</p>
</li>
<li>
<p>creating new streams</p>
</li>
<li>
<p>replacing streams</p>
</li>
<li>
<p>setting the root stream</p>
</li>
</ul>
<p>The protocol also applies to creating new streams or replacing
existing streams in dictionary stores.</p>
<p>The protocol does<em> not</em> apply to overwriting existing
streams.</p>
<p>The following diagram shows the idea:</p>
<div class="Figure">
<p class="Image"><img src="CommitRevertConcept.gif" alt=""  border="0"></p>
</div>
<a name="1.14"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>See also</h2>
</div><div class="Bodytext">
<p><a href="../StoresGuide4/index.html#StoresGuide4%2etoc">Dictionary stores</a></p>
<p><a href="../../FileStores/index.html#FileStoresOverview%2etoc">File stores</a></p>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
