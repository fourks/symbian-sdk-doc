<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>The reference counting object</title>
<link href="../../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="ReferenceCountingObjects%2eintroduction"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../../index/index.html"><img
src="../../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../../GlobalGlossary/index.html"><img src="../../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="ReferenceCountingObjectsOverview.guide.html"><img src="../../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="ObjectContainer.guide.html"><img src="../../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../../Product/Generic/APIGuide/index.html">API&nbsp;Guide</a>&nbsp;<span class="separator">&#187;</span>
<a href="../index.html">Base</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Reference&nbsp;Counting&nbsp;Objects</a>&nbsp;<span class="separator">&#187;</span>
The&nbsp;reference&nbsp;counting&nbsp;object</p>

<hr noshade size="1">
<div class="AuthoredContent">


</div><div class="Head1">

<h1>The reference counting object</h1>
</div><div class="Bodytext">
<p>A reference counting object is one which uses reference counting to track concurrent references to itself and which arranges for automatic destruction of itself when the final reference is removed. It is also an object which can be named.</p><p>A reference counting object is any object which has <code>CObject</code> as its base class.</p><p>
Constructing a <code>CObject</code> derived type, or calling its <code>Open()</code> member function, adds a reference to that object by adding one to its reference count. Calling its <code>Close()</code> member function removes a reference by subtracting one from its reference count. When the last user of the object calls <code>Close()</code>, the reference count becomes zero and the object is automatically destroyed.</p><p>The following drawing shows the idea.</p><div class="Figure">
<p class="Image"><img src="ReferenceCountingIdea.gif" alt=""  border="0"></p>
</div>
<p>A DLL is an example of an entity  that needs to track concurrent accesses to itself as it can be accessed concurrently by a number of threads and processes.   The Kernel side class which encapsulates DLL behaviour, <code>DLibrary</code>, has <code>CObject</code> as a base class. The <code>DLibrary</code> object exists until all users have finished with the DLL; once the last user has closed the DLL, the <code>DLibrary</code> object is destroyed.</p><p>A <code>CObject</code> is always part of a class hierarchy. It is a base class; an explicit <code>CObject</code> type  is never instantiated.</p><p>Many Kernel side objects such as threads, processes and semaphores are instances of <code>CObject</code> derived classes.
An object which is intended to be referenced by a handle should derive from <code>CObject</code>. Collectively, reference counting objects, object containers and object indexes provide the behaviour for generating handle-numbers.</p>
<p>The server side implementation of a client/server subsession uses a <code>CObject</code>.</p><p>See also:</p><ul><li><p><a href="../../../APIReference/ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject" title="Implements reference counting to track concurrent references to itself"><code class="ApiItem">CObject</code></a></p></li><li><p><a href="../InterProcessCommunication/ClientServer/SubsessionsWithinSessions.guide.html#ClientServerGuide%2esubsession">Subsessions within a session</a></p></li><li><p><a href="../InterProcessCommunication/ClientServer/index.html#ClientServerGuide%2etoc">Using client/server</a></p></li></ul>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
