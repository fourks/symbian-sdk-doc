<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>Eikecho</title>
<link href="../../../../../_stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../../../_stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="TcpipGuide3%2eEikecho"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../../../_stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../../../_stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../../../_index/index.html"><img
src="../../../../../_stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../../../GlobalGlossary/index.html"><img src="../../../../../_stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../../../_stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CechowriteClass.guide.html"><img src="../../../../../_stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="index.html"><img src="../../../../../_stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../../../Product/Generic/APIGuide/index.html">API&nbsp;Guide</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../index.html">Networking</a>&nbsp;<span class="separator">&#187;</span>
<a href="../index.html">Using&nbsp;TCP/IP</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Echo&nbsp;Example&nbsp;Program</a>&nbsp;<span class="separator">&#187;</span>
Eikecho</p>

<hr noshade size="1">
<div class="AuthoredContent">

</div><div class="Head1">

<h1>Eikecho</h1>
</div><div class="Bodytext">
<p><code class="filename">eikecho</code> is a GUI application. It allows the user to drive the <code class="filename">echoeng</code> DLL from a very simple user interface.</p>
<p>The following diagram shows its class structure:</p>
<div class="Figure">
<p class="Image"><img src="eikecho.gif" alt="Structure of eikecho"  border="0"></p>
<p class="Caption">Structure of <code class="filename">eikecho</code></p>
</div>
<p>Some notes follow on the classes.</p>
<a name="1.7"></a></div><div class="Head2">
<hr size="2" noshade>
<h2><code>CEchoApplication</code></h2>
</div><div class="Bodytext">
<p><code>CEchoApplication</code> is the application class, derived from <code>CEikApplication</code> as demanded by the framework.</p>
<a name="1.8"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2><code>CEchoDocument</code></h2>
</div><div class="Bodytext">
<p><code>CEchoDocument</code> is the document class, derived from <code>CEikDocument</code> as demanded by the framework. It owns an instance of the engine class <code>CEchoEngine</code>.</p>
<a name="1.9"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>CEchoAppUi</h2>
</div><div class="Bodytext">
<p><code>CEchoAppUi</code> is the app UI class, derived from <code>CEikAppUi</code> as demanded by the framework. It handles user interface commands, of which eikecho has only one, <code class="ProgramOutput">File | Exit</code>, which has the identifier <code>EEikCmdExit</code>. The code for this calls <code>CEchoEngine::Stop()</code> to shutdown the connection.</p>
<p class="CodeBlock"><code>void CEchoAppUi::HandleCommandL(TInt aCommand)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;switch (aCommand)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;case EEikCmdExit:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iEchoEngine-&gt;Stop();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exit();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}</code></p>
<p>Note that calls to the user interface handling functions implemented by this class and by <code>CConsoleControl</code> are made by an active scheduler in the application framework, as a result of user interface events being raised. The same active scheduler calls the handler (<code>RunL()</code>) functions for the <code class="filename">echoeng</code> active objects when asynchronous socket calls complete. So long as the handler functions do not take an excessive time to complete, this structure allows the application to remain responsive to both sources of events.</p>
<a name="1.10"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2><code>CConsoleControl</code>
</h2>
</div><div class="Bodytext">
<p><code>CConsoleControl</code> is the application view class, <code>CExampleAppView</code>, derived from <code>CCoeControl</code>. Its most important function is <code>OfferKeyEventL()</code>, which calls <code>CEchoEngine</code> functions based on the key pressed. For example, pressing &#8220;#&#8221; causes the engine to make a connection to the IP address held in <code>KInetAddr</code>:</p>
<p class="CodeBlock"><code>TInt aChar=aKeyEvent.iCode;<br><br>if (aChar == '#')<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;_LIT(KConnecting1,&quot;Connecting to KInetAddr\n&quot;);<br>&nbsp;&nbsp;&nbsp;&nbsp;iConsole-&gt;Printf(KConnecting1);<br>&nbsp;&nbsp;&nbsp;&nbsp;iEchoEngine-&gt;ConnectL(KInetAddr);<br>&nbsp;&nbsp;&nbsp;&nbsp;}</code></p>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../../../_stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
