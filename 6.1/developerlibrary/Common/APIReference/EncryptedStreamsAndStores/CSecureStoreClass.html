<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>CSecureStore</title>
<link href="../../../_stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../_stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../_stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../_stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../_stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../_stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../_stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="index.html"><img src="../../../_stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="RDecryptStreamClass.html"><img src="../../../_stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Encrypted&nbsp;Streams&nbsp;and&nbsp;Stores</a>&nbsp;<span class="separator">&#187;</span>
CSecureStore</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>s32crypt.h</code>
<br>Link against: <code>estor.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aCSecureStore"></a>

<h1>Class <code>CSecureStore</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>CSecureStore</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>A stream store whose streams are encrypted.</p><p>The secure store is layered over another stream store which acts as the host for    the encrypted streams. This stream store is not owned by the secure store, which means that it is possible to to use the secure store to store only a portion of the streams  in encrypted form.</p><p>Access to the streams in this store is via the normal <code>RStoreWriteStream</code> and <code>RStoreReadStream</code> classes. Internally, <code>TEncryptFilter</code> and <code>TDecryptFilter</code> objects are attached to the streams from the host store in order to do the encryption and decryption.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase">CBase</a></code></td><td class="Cell">Base class for all classes to be instantiated on the heap</td>
</tr>
<tr><td class="Cell"><code>CSecureStore</code></td><td class="Cell">A stream store whose streams are encrypted</td>
</tr>
<tr><td class="Cell"><code><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore">CStreamStore</a></code></td><td class="Cell">Provides the core abstract framework for stores allowing streams to be created and manipulated</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>CSecureStore</code>:
<br><code class="ApiItem"><a href="CSecureStoreClass.html#%3a%3aCSecureStore%3a%3aCSecureStore%28%29" title="Constructor taking a reference to the host stream store and the security model">CSecureStore()</a></code>, <code class="ApiItem"><a href="CSecureStoreClass.html#%3a%3aCSecureStore%3a%3aNewL%28%29" title="Allocates, constructs and returns a pointer to a new secure store object">NewL()</a></code>, <code class="ApiItem"><a href="CSecureStoreClass.html#%3a%3aCSecureStore%3a%3aNewLC%28%29" title="Allocates, constructs and returns a pointer to a new secure store object, putting the pointer onto the cleanup stack">NewLC()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase" title="Base class for all classes to be instantiated on the heap">CBase</a></code>:
<br><code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase%3a%3aoperator%20new%28%29" title="Allocates the object from the heap and then initialises its contents to binary zeroes">operator new()</a></code></p>
<p>Inherited from <code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore" title="Provides the core abstract framework for stores allowing streams to be created and manipulated">CStreamStore</a></code>:
<br><code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aCommit%28%29" title="Commits changes">Commit()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aCommitL%28%29" title="Commit changes and leaves if unsuccessful">CommitL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aCompactL%28%29" title="Compacts the store">CompactL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aDelete%28%29" title="Deletes the specified stream from this store">Delete()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aDeleteL%28%29" title="Deletes the specified stream from this store, leaving if unsuccessful">DeleteL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aDoCommitL%28%29" title="Commits any changes to the store">DoCommitL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aDoCompactL%28%29" title="Initialises an object for compacting space in the store">DoCompactL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aDoCreateL%28%29" title="Creates a new stream in the store">DoCreateL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aDoDeleteL%28%29" title="Deletes the specified stream from the store">DoDeleteL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aDoReadL%28%29" title="Opens the requested stream for reading">DoReadL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aDoReclaimL%28%29" title="Initialises an object for reclaiming space in the store">DoReclaimL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aDoReplaceL%28%29" title="Opens the specified existing stream for safe replacement">DoReplaceL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aDoRevertL%28%29" title="Discards any pending changes to the store">DoRevertL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aDoWriteL%28%29" title="Opens the specified existing stream for writing">DoWriteL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aExtendL%28%29" title="Generates a new stream within this store, and returns its id">ExtendL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aReclaimL%28%29" title="Reclaims space within a store, returning the total amount of free space available within that store">ReclaimL()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aRevert%28%29" title="Rolls back the store to its state at the last commit point">Revert()</a></code>,
<code class="ApiItem"><a href="../Stores/CStreamStoreClass.html#%3a%3aCStreamStore%3a%3aRevertL%28%29" title="Rolls back the store to its state at the last commit point and leaves if unsuccessful">RevertL()</a></code></p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../StoreStreams/RStoreWriteStreamClass.html#%3a%3aRStoreWriteStream" title="Supports the writing of a stream to a store"><code class="ApiItem">RStoreWriteStream</code></a></li>
<li><a href="../StoreStreams/RStoreReadStreamClass.html#%3a%3aRStoreReadStream" title="Supports the opening and manipulation of an existing stream in a store"><code class="ApiItem">RStoreReadStream</code></a></li>
<li><a href="TEncryptFilterClass.html#%3a%3aTEncryptFilter" title="An encrypting filter"><code class="ApiItem">TEncryptFilter</code></a></li>
<li><a href="TDecryptFilterClass.html#%3a%3aTDecryptFilter" title="A decrypting filter"><code class="ApiItem">TDecryptFilter</code></a></li>
</ul>
<a name="2.7"></a></div><div class="Head2">
<hr size="2" noshade>
<h2>Construction</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aCSecureStore%3a%3aNewL%28%29"></a>
<hr size="1" noshade>
<h3><code>NewL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static CSecureStore* NewL(CStreamStore&amp; aHost,const CSecurityBase&amp; aKey);<br>&nbsp;&nbsp;&nbsp;&nbsp;</code></p><h4 class="subheading">Description</h4>
<p>Allocates, constructs and returns a pointer to a new secure store object.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CStreamStore&amp; aHost</code></td>
<td class="Cell"><p class="ValueDesc">The stream store acting as host for the secure store's streams.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const CSecurityBase&amp; aKey</code></td>
<td class="Cell"><p class="ValueDesc">Interface to the security model used to generate decryption and encryption handling objects. Ownership of this object remains with the caller who should delete it when it is no longer needed.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CSecureStore*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the new secure store.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Notes:</h4>
<ul>
<li><note>The secure store does not take ownership of the host stream store.</note></li>
</ul>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aCSecureStore%3a%3aNewLC%28%29"></a>
<hr size="1" noshade>
<h3><code>NewLC()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static CSecureStore* NewLC(CStreamStore&amp; aHost,const CSecurityBase&amp; aKey);</code></p><h4 class="subheading">Description</h4>
<p>Allocates, constructs and returns a pointer to a new secure store object, putting the pointer onto the cleanup stack.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CStreamStore&amp; aHost</code></td>
<td class="Cell"><p class="ValueDesc">The stream store acting as host for the secure store's streams.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const CSecurityBase&amp; aKey</code></td>
<td class="Cell"><p class="ValueDesc">Interface to the security model used to generate decryption and encryption handling objects. Ownership of this object remains with the caller who should delete it when it is no longer needed.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CSecureStore*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the new secure store.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.4"></a></div><div class="Head3">
<a name="%3a%3aCSecureStore%3a%3aCSecureStore%28%29"></a>
<hr size="1" noshade>
<h3><code>CSecureStore()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CSecureStore(CStreamStore&amp; aHost,const CSecurityBase&amp; aKey);</code></p><h4 class="subheading">Description</h4>
<p>Constructor taking a reference to the host stream store and the security model.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CStreamStore&amp; aHost</code></td>
<td class="Cell"><p class="ValueDesc">The stream store acting as host for the secure store's streams.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const CSecurityBase&amp; aKey</code></td>
<td class="Cell"><p class="ValueDesc">Interface to the security model used to generate decryption and encryption handling objects. Ownership of this object remains with the caller who should delete it when it is no longer needed.</p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../_stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
