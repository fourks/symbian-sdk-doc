<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>RCriticalSection</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="index.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="index.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Critical&nbsp;Sections</a>&nbsp;<span class="separator">&#187;</span>
RCriticalSection</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code> e32std.h </code>
<br>Link against: <code> euser.lib </code>
</p>
</div><div class="Head1">
<a name="%3a%3aRCriticalSection"></a>

<h1>Class <code>RCriticalSection</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>RCriticalSection</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Handle to a critical section.</p>
<p>A critical section object is implemented using a semaphore. The
class <code>RCriticalSection</code> inherits privately from
<code>RSemaphore</code> as a matter of implementation and this is, in effect,
equivalent to using a semaphore.</p>
<p>The public functions of <code>RSemaphore</code> are not part of the
API of this class.</p>
<p>As with all handles, they should be closed after use. This class
provides the necessary <code>Close()</code> function, which should be called
when the handle is no longer required.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code>RCriticalSection</code></td><td class="Cell">Handle to a critical section</td>
</tr>
<tr><td class="Cell"><code><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase">RHandleBase</a></code></td><td class="Cell">Handle to an object</td>
</tr>
<tr><td class="Cell"><code><a href="../Semaphores/RSemaphoreClass.html#%3a%3aRSemaphore">RSemaphore</a></code></td><td class="Cell">Provides a handle to a semaphore</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>RCriticalSection</code>:
<br><code class="ApiItem"><a href="RCriticalSectionClass.html#%3a%3aRCriticalSection%3a%3aClose%28%29" title="Closes the handle to the critical section object">Close()</a></code>, <code class="ApiItem"><a href="RCriticalSectionClass.html#%3a%3aRCriticalSection%3a%3aCreateLocal%28%29" title="Creates a critical section and opens this handle to that critical section">CreateLocal()</a></code>, <code class="ApiItem"><a href="RCriticalSectionClass.html#%3a%3aRCriticalSection%3a%3aIsBlocked%28%29" title="Tests whether the critical section is occupied by another thread">IsBlocked()</a></code>, <code class="ApiItem"><a href="RCriticalSectionClass.html#%3a%3aRCriticalSection%3a%3aRCriticalSection%28%29" title="Constructs the object">RCriticalSection()</a></code>, <code class="ApiItem"><a href="RCriticalSectionClass.html#%3a%3aRCriticalSection%3a%3aSignal%28%29" title="Signals an exit from the critical section">Signal()</a></code>, <code class="ApiItem"><a href="RCriticalSectionClass.html#%3a%3aRCriticalSection%3a%3aWait%28%29" title="Waits for access to the critical section">Wait()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase" title="Handle to an object">RHandleBase</a></code>:
<br><code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aDuplicate%28%29" title="Creates a valid handle to the Kernel object to which the specified thread already has a handle">Duplicate()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aHandle%28%29" title="Retrieves the handle-number of the object associated with this handle">Handle()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aSetHandle%28%29" title="Use this function to set the handle-number of this handle to the specified value">SetHandle()</a></code></p>
<p>Inherited from <code class="ApiItem"><a href="../Semaphores/RSemaphoreClass.html#%3a%3aRSemaphore" title="Provides a handle to a semaphore">RSemaphore</a></code>:
<br><code class="ApiItem"><a href="../Semaphores/RSemaphoreClass.html#%3a%3aRSemaphore%3a%3aCount%28%29" title="Gets the current value of the semaphore count">Count()</a></code>,
<code class="ApiItem"><a href="../Semaphores/RSemaphoreClass.html#%3a%3aRSemaphore%3a%3aCreateGlobal%28%29" title="Creates a semaphore, setting its initial count, and opens this handle to that semaphore">CreateGlobal()</a></code>,
<code class="ApiItem"><a href="../Semaphores/RSemaphoreClass.html#%3a%3aRSemaphore%3a%3aOpen%28%29" title="Opens a handle onto the global semaphore found using a TFindSemaphore object">Open()</a></code>,
<code class="ApiItem"><a href="../Semaphores/RSemaphoreClass.html#%3a%3aRSemaphore%3a%3aOpenGlobal%28%29" title="Opens a handle onto a specified existing global semaphore">OpenGlobal()</a></code></p>
<a name="2.6"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Construction and destruction</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aRCriticalSection%3a%3aRCriticalSection%28%29"></a>
<hr size="1" noshade>
<h3><code>RCriticalSection()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>RCriticalSection();</code></p><h4 class="subheading">Description</h4>
<p>Constructs the object.</p>
<p>The constructor exists to initialise private data within this
handle; it does not create the critical section object.</p>
<a name="2.7"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Create a critical section</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aRCriticalSection%3a%3aCreateLocal%28%29"></a>
<hr size="1" noshade>
<h3><code>CreateLocal()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt CreateLocal(TOwnerType aType=EOwnerProcess);</code></p><h4 class="subheading">Description</h4>
<p>Creates a critical section and opens this handle to that critical
section.</p><p>The Kernel side object representing the critical section is unnamed. It is, therefore, local to the calling process.
The handle can be used directly by any thread within the calling process, but no other <code>RCriticalSection</code> object can open a duplicate handle.</p>
<p>By default, ownership of this critical section handle is vested
in the current process, but can be vested in the current thread by passing
<code>EOwnerThread</code> as the second parameter to this function.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TOwnerType aType </code></td>
<td class="Cell"><p class="ValueDesc"> An enumeration whose enumerators define the ownership of this
critical section handle. If not explicitly specified,
<code>EOwnerProcess</code> is taken as default. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful otherwise another of the
system-wide error codes </p></td>
</tr>
</table></td></tr></table>
<a name="2.8"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Close a critical section</h2>
</div><div class="Bodytext">
<a name="2.8.2"></a></div><div class="Head3">
<a name="%3a%3aRCriticalSection%3a%3aClose%28%29"></a>
<hr size="1" noshade>
<h3><code>Close()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Close();</code></p><h4 class="subheading">Description</h4>
<p>Closes the handle to the critical section object.</p>
<p>As a critical section object is implemented using a semaphore, this
has the effect of closing the handle to the semaphore.</p>
<a name="2.9"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Controlling access to the critical section</h2>
</div><div class="Bodytext">
<a name="2.9.2"></a></div><div class="Head3">
<a name="%3a%3aRCriticalSection%3a%3aWait%28%29"></a>
<hr size="1" noshade>
<h3><code>Wait()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Wait();</code></p><h4 class="subheading">Description</h4>
<p>Waits for access to the critical section.</p>
<p>If no other thread is in the critical section, control returns
immediately and the current thread can continue into the section.</p>
<p>If another thread is already in the critical section, the current
thread is marked as waiting (on a semaphore); the current thread is added to
the end of a FIFO queue of threads maintained by this critical section.</p>
<a name="2.9.3"></a></div><div class="Head3">
<a name="%3a%3aRCriticalSection%3a%3aSignal%28%29"></a>
<hr size="1" noshade>
<h3><code>Signal()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Signal();</code></p><h4 class="subheading">Description</h4>
<p>Signals an exit from the critical section.</p>
<p>A thread calls <code>Signal()</code> when it exits from the critical
section. The first thread waiting on the critical section&#8217;s queue of
threads is removed from that queue and, provided that it is not suspended for
any other reason, is marked as ready to run. That thread will, therefore, be
the next to proceed into the critical section.</p>
<a name="2.9.4"></a></div><div class="Head3">
<a name="%3a%3aRCriticalSection%3a%3aIsBlocked%28%29"></a>
<hr size="1" noshade>
<h3><code>IsBlocked()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TBool IsBlocked() const;</code></p><h4 class="subheading">Description</h4>
<p>Tests whether the critical section is occupied by another thread.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TBool </code></td>
<td class="Cell"><p class="ValueDesc"> True, if the critical section is occupied by another thread. False,
otherwise. </p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
