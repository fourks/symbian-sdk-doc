<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>CAnimFunctions</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CAnimDllClass.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="CAnimGcClass.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Animation</a>&nbsp;<span class="separator">&#187;</span>
CAnimFunctions</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>w32adll.h</code>
<br>Link against: <code>N/A</code>
</p>
</div><div class="Head1">
<a name="%3a%3aCAnimFunctions"></a>

<h1>Class <code>CAnimFunctions</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>CAnimFunctions</code></p><h4 class="subheading">Support</h4>
<p>Withdrawn in 5.1
<br>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Server side utility functions. These include functions to set the
animation timings, to set the drawing rectangle, to panic the client from the
server, etc.</p>
<p>You do NOT have to create an object of this type. The class is
implemented by the window server, and provides utility functions to all
<code>CAnim</code> derived classes via the <code>Canim::iFunctions</code>
pointer. </p>
<p>It is not intended for user derivation.</p>
<p>Note:</p>
<ul>
<li>
<p>Animation code can call <code>CObject</code> members from this
class, however there is no point in doing so&nbsp;&#8212; and indeed may
have severe consequences. </p>
</li>
<li>
<p>The class was replaced by the
<code>MAnimGeneralFunctions</code> interface, and its derived classes, after
ER5.</p>
</li>
<li>
<p>The classes&#8217; functions are declared as pure virtual in
the header file. However, as stated above, you do not need to derive from this
class, so these have not been marked as pure virtual in this document.</p>
</li>
</ul><h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code>CAnimFunctions</code></td><td class="Cell">Server side utility functions</td>
</tr>
<tr><td class="Cell"><code><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase">CBase</a></code></td><td class="Cell">Base class for all classes to be instantiated on the heap</td>
</tr>
<tr><td class="Cell"><code><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject">CObject</a></code></td><td class="Cell">Implements reference counting to track concurrent references to itself</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>CAnimFunctions</code>:
<br><code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aAnimate%28%29" title="Calls the DLL's Animate() function then deactivates the graphics context">Animate()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aClient%28%29" title="Gets a reference to the calling client's thread">Client()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aCloseFont%28%29" title="Close a duplicate font">CloseFont()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aDuplicateBitmapL%28%29" title="Creates and duplicates a bitmap from a handle">DuplicateBitmapL()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aDuplicateFontL%28%29" title="Creates and duplicates a font from a handle">DuplicateFontL()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aESyncDay" title="Animate() called as soon after midnight every day as system activity allows">ESyncDay</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aESyncFlash" title="Animate() every flash tick">ESyncFlash</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aESyncMinute" title="Animate() called as soon after every minute as system activity allows">ESyncMinute</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aESyncNone" title="Not synchronised">ESyncNone</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aESyncSecond" title="Animate() called as soon after every second as system activity allows">ESyncSecond</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aFlashStateOn%28%29" title="Tests the flash cycle state">FlashStateOn()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aInvalidate%28%29" title="Forces redraw of a rectangular part of the window">Invalidate()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aIsHidden%28%29" title="Tests whether to draw the animation">IsHidden()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aPanic%28%29" title="Panics the client">Panic()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aScreenDevice%28%29" title="Gets a pointer to the screen device">ScreenDevice()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aSetInterval%28%29" title="Sets the repeat interval">SetInterval()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aSetNextInterval%28%29" title="Sets the next interval">SetNextInterval()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aSetRect%28%29" title="Sets the rectangle that this instance wants to draw to">SetRect()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aSetSync%28%29" title="Sets the synchronisation mode">SetSync()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aSetVisible%28%29" title="Sets the visibility of the window the animation is drawing to">SetVisible()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aSync%28%29" title="Gets the current synchronisation mode">Sync()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aSystemTime%28%29" title="Gets the system time as it was when Animate() was last called">SystemTime()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aTAnimSync" title="Animation synchronisation flags">TAnimSync</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aWindowSize%28%29" title="Gets the window size">WindowSize()</a></code>, <code class="ApiItem"><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3avoid%20ActivateGc%28%29" title="Activate graphics context">void ActivateGc()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase" title="Base class for all classes to be instantiated on the heap">CBase</a></code>:
<br><code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase%3a%3aoperator%20new%28%29" title="Allocates the object from the heap and then initialises its contents to binary zeroes">operator new()</a></code></p>
<p>Inherited from <code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject" title="Implements reference counting to track concurrent references to itself">CObject</a></code>:
<br><code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aAccessCount%28%29" title="Gets the number of open references to this reference counting object">AccessCount()</a></code>,
<code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aClose%28%29" title="Closes this reference counting object">Close()</a></code>,
<code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aDec%28%29" title="Subtracts one from the reference count">Dec()</a></code>,
<code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aFullName%28%29" title="Gets the full name of this reference counting object">FullName()</a></code>,
<code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aInc%28%29" title="Adds one to the reference count">Inc()</a></code>,
<code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aName%28%29" title="Gets the name of this reference counting object">Name()</a></code>,
<code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aOpen%28%29" title="Opens this reference counting object">Open()</a></code>,
<code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aOwner%28%29" title="Gets a pointer to the reference counting object which owns this reference counting object">Owner()</a></code>,
<code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aSetName%28%29" title="Sets or clears this reference counting object's name">SetName()</a></code>,
<code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aSetNameL%28%29" title="Sets or clears this reference counting object's name">SetNameL()</a></code>,
<code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aSetOwner%28%29" title="Sets the owner of this reference counting object">SetOwner()</a></code>,
<code class="ApiItem"><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aUniqueID%28%29" title="Gets this reference counting object's unique ID">UniqueID()</a></code></p>
<a name="2.6"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Member functions</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3avoid%20ActivateGc%28%29"></a>
<hr size="1" noshade>
<h3><code>void ActivateGc()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ActivateGc();</code></p><h4 class="subheading">Description</h4>
<p>Activate graphics context. This function should be called to
enable drawing in the <code>CAnim</code> derived classes&#8217;
<code>Command()</code>, <code>Animate()</code>, or <code>FocusChanged()</code>
functions. </p>
<p>Note:</p>
<ul>
<li>
<p>The function is called automatically by the animation DLL
framework before it calls the <code>Redraw()</code> function.</p>
</li>
</ul>
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aAnimate%28%29"></a>
<hr size="1" noshade>
<h3><code>Animate()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Animate(TDateTime* aDateTime);</code></p><h4 class="subheading">Description</h4>
<p>Calls the DLL's <code>Animate()</code> function then deactivates
the graphics context. This allows users to do drawing from their own active
object.</p>
<p>Note:</p>
<ul>
<li>
<p>If the user calls the <code>CAnim</code> derived
classes&#8217; <code>Animate()</code> function directly, or otherwise does
drawing from their own active object, then this will not deactivate the
graphics context. This causes the window server to panic the client.</p>
</li>
</ul><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TDateTime* aDateTime</code></td>
<td class="Cell"><p class="ValueDesc">The parameter passed into the animation DLL&#8217;s
<code>Animate()</code> function.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.4"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aClient%28%29"></a>
<hr size="1" noshade>
<h3><code>Client()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const RThread&amp; Client();</code></p><h4 class="subheading">Description</h4>
<p>Gets a reference to the calling client's
thread.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RThread&amp;</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the calling client&#8217;s thread.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.5"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aCloseFont%28%29"></a>
<hr size="1" noshade>
<h3><code>CloseFont()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void CloseFont(CFbsFont *);</code></p><h4 class="subheading">Description</h4>
<p>Close a duplicate font.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CFbsFont *</code></td>
<td class="Cell"><p class="ValueDesc">Pointer to the duplicate font.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aDuplicateFontL%28%29" title="Creates and duplicates a font from a handle"><code class="ApiItem">DuplicateFontL()</code></a></li>
</ul>
<a name="2.6.6"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aDuplicateBitmapL%28%29"></a>
<hr size="1" noshade>
<h3><code>DuplicateBitmapL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CFbsBitmap* DuplicateBitmapL(TInt aHandle);</code></p><h4 class="subheading">Description</h4>
<p>Creates and duplicates a bitmap from a handle. This function might be
used to duplicate client side bitmaps on the server side&nbsp;&#8212;
actually to provide a handle to the same bitmap in the font and bitmap server
as the client.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aHandle</code></td>
<td class="Cell"><p class="ValueDesc">A handle to the bitmap to be duplicated.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CFbsBitmap*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the duplicate bitmap.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.7"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aDuplicateFontL%28%29"></a>
<hr size="1" noshade>
<h3><code>DuplicateFontL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CFbsFont* DuplicateFontL(TInt aHandle);</code></p><h4 class="subheading">Description</h4>
<p>Creates and duplicates a font from a handle.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aHandle</code></td>
<td class="Cell"><p class="ValueDesc">A handle to the font to be duplicated.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CFbsFont*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the duplicate font.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.8"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aFlashStateOn%28%29"></a>
<hr size="1" noshade>
<h3><code>FlashStateOn()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TBool FlashStateOn() const;</code></p><h4 class="subheading">Description</h4>
<p>Tests the flash cycle&nbsp;state. The flash cycle has 2
states&nbsp;&#8212; on or off.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TBool</code></td>
<td class="Cell"><p class="ValueDesc"><code>ETrue</code> if in the on part of the flash cycle, otherwise
<code>EFalse</code>.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.9"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aInvalidate%28%29"></a>
<hr size="1" noshade>
<h3><code>Invalidate()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Invalidate(const TRect&amp; aRect);</code></p><h4 class="subheading">Description</h4>
<p>Forces redraw of a rectangular part of the window. The function causes a
redraw message on the part of the window specified, which provides a
non-immediate way to do drawing.</p>
<p>It can be used to redraw the whole of the window, not just the part used
by the animation.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TRect&amp; aRect</code></td>
<td class="Cell"><p class="ValueDesc">The rectangle to be re-drawn.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.10"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aIsHidden%28%29"></a>
<hr size="1" noshade>
<h3><code>IsHidden()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TBool IsHidden();</code></p><h4 class="subheading">Description</h4>
<p>Tests whether to draw the animation. </p>
<p>If the window is completely hidden/obscured there is normally no need to
draw the animation. However in some conditions the animation should be drawn
even if it is obscured. The window server is aware of these cases, and returns
<code>ETrue</code> if it is safe to NOT draw the
animation.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TBool</code></td>
<td class="Cell"><p class="ValueDesc">True if the window is completely hidden AND there is no requirement to
continue drawing the animation, otherwise false.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.11"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aPanic%28%29"></a>
<hr size="1" noshade>
<h3><code>Panic()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Panic();</code></p><h4 class="subheading">Description</h4>
<p>Panics the client. This will result in the client thread being
destroyed.</p>
<a name="2.6.12"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aScreenDevice%28%29"></a>
<hr size="1" noshade>
<h3><code>ScreenDevice()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const CFbsScreenDevice* ScreenDevice();</code></p><h4 class="subheading">Description</h4>
<p>Gets a pointer to the screen device. This might be used, for example, to
gain access to twix to pixel conversion functions.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CFbsScreenDevice*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the screen device.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.13"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aSetInterval%28%29"></a>
<hr size="1" noshade>
<h3><code>SetInterval()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void SetInterval(TInt aInterval);</code></p><h4 class="subheading">Description</h4>
<p>Sets the repeat interval. </p>
<p>If the synchronisation mode is <code>TAnimSync::ESyncNone</code>, then
the <code>Animate()</code> function is called at intervals defined by some
number of flash ticks. There are two flash ticks a second, with a 7/12
second&nbsp;&#8212; 5/12 second cycle. If the function is called when the
synchronisation mode is not <code>TAnimSync::ESyncNone</code>, then the window
server panics the client.</p>
<p>If the new interval is greater than the current countdown, then the call
does not affect the current countdown. For example, if the countdown has 10
flash ticks remaining, and the interval is set to 20, the new interval does not
apply until the current countdown is complete. </p>
<p>However if the new interval is less the current countdown, then the new
interval applies immediately i.e. the countdown is reset to the interval
value.</p>
<p>If the interval is set to zero the countdown stops, and the
<code>Animate()</code> function is no longer called.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aInterval</code></td>
<td class="Cell"><p class="ValueDesc">The number of flash ticks between calls to the <code>Animate()</code>
function.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.14"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aSetNextInterval%28%29"></a>
<hr size="1" noshade>
<h3><code>SetNextInterval()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void SetNextInterval(TInt aInterval);</code></p><h4 class="subheading">Description</h4>
<p>Sets the next interval. </p>
<p>This function immediately resets the current countdown to the specified
number of flash ticks, irrespective of its current value. After the countdown
expires the interval returns to its usual rate&nbsp;&#8212; note that this
may be zero (i.e. not at all).</p>
<p>To call this function the synchronisation mode must be
<code>TAnimSync::ESyncNone</code>&nbsp;&#8212; otherwise the window server
panics the client.</p>
<p>Note:</p>
<ul>
<li>
<p>There are two flash ticks a second, with a 7/12 second&nbsp;&#8212;
5/12 second cycle</p>
</li>
</ul><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aInterval</code></td>
<td class="Cell"><p class="ValueDesc">The interval to the next <code>Animate()</code>. If the value is less
than 1 it automatically gets set to 1.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aSetInterval%28%29" title="Sets the repeat interval"><code class="ApiItem">SetInterval()</code></a></li>
</ul>
<a name="2.6.15"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aSetRect%28%29"></a>
<hr size="1" noshade>
<h3><code>SetRect()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void SetRect(const TRect &amp;aRect);</code></p><h4 class="subheading">Description</h4>
<p>Sets the rectangle that this instance wants to draw to.</p>
<p>This function must be called as part of the initialisation/construction
of the <code>CAnim</code> derived object, i.e. in
<code>CAnim::ConstructL()</code>. This is so that the window server knows which
area the animation is operating in.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TRect &amp;aRect</code></td>
<td class="Cell"><p class="ValueDesc">The rectangle to be drawn to.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.16"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aSetSync%28%29"></a>
<hr size="1" noshade>
<h3><code>SetSync()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void SetSync(TAnimSync aSyncMode);</code></p><h4 class="subheading">Description</h4>
<p>Sets the synchronisation mode. This determines the time intervals between
calls to the <code>Animate()</code> function.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAnimSync aSyncMode</code></td>
<td class="Cell"><p class="ValueDesc">The synchronisation mode.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.17"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aSetVisible%28%29"></a>
<hr size="1" noshade>
<h3><code>SetVisible()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void SetVisible(TBool aState);</code></p><h4 class="subheading">Description</h4>
<p>Sets the visibility of the window the animation is drawing to. This does
the same as <code>RWindowBase::SetVisible()</code>.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TBool aState</code></td>
<td class="Cell"><p class="ValueDesc">True for visible, false otherwise.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.18"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aSync%28%29"></a>
<hr size="1" noshade>
<h3><code>Sync()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TAnimSync Sync() const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the current synchronisation mode.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAnimSync</code></td>
<td class="Cell"><p class="ValueDesc">The current sync mode.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CAnimFunctionsClass.html#%3a%3aCAnimFunctions%3a%3aSetSync%28%29" title="Sets the synchronisation mode"><code class="ApiItem">SetSync()</code></a></li>
</ul>
<a name="2.6.19"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aSystemTime%28%29"></a>
<hr size="1" noshade>
<h3><code>SystemTime()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TDateTime SystemTime() const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the system time as it was when <code>Animate()</code> was last
called.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TDateTime</code></td>
<td class="Cell"><p class="ValueDesc">The system time when <code>Animate()</code> was last called.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.20"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aWindowSize%28%29"></a>
<hr size="1" noshade>
<h3><code>WindowSize()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TSize WindowSize() const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the window size.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TSize</code></td>
<td class="Cell"><p class="ValueDesc">The window size.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Enumerations</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aCAnimFunctions%3a%3aTAnimSync"></a>
<hr size="1" noshade>
<h3>Enum <code>TAnimSync</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TAnimSync</code></p><h4 class="subheading">Description</h4>
<p>Animation synchronisation flags. The animation can be synchronised to any
of the below, the Animate() call will take place at the start of the new unit
(day, hour, etc...).</p><table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><a name="%3a%3aCAnimFunctions%3a%3aESyncNone"><code class="Value">ESyncNone</code></a></td>
<td class="Cell"><p class="ValueDesc">
<para>Not synchronised. Animate() is called after some number of flash
cycles&#0160;&#8212; set by SetSync().</para></p></td>
</tr>
<tr valign="top">
<td class="Cell" ><a name="%3a%3aCAnimFunctions%3a%3aESyncFlash"><code class="Value">ESyncFlash</code></a></td>
<td class="Cell"><p class="ValueDesc">
<para>Animate() every flash tick. This occurs twice a second, on the second and
after 7/12ths of a second, e.g. the function is called in a flash-on (7/12
seconds)&#0160;&#8212; flash-off (5/12 seconds) cycle.</para></p></td>
</tr>
<tr valign="top">
<td class="Cell" ><a name="%3a%3aCAnimFunctions%3a%3aESyncSecond"><code class="Value">ESyncSecond</code></a></td>
<td class="Cell"><p class="ValueDesc">
<para>Animate() called as soon after every second as system activity
allows.</para></p></td>
</tr>
<tr valign="top">
<td class="Cell" ><a name="%3a%3aCAnimFunctions%3a%3aESyncMinute"><code class="Value">ESyncMinute</code></a></td>
<td class="Cell"><p class="ValueDesc">
<para>Animate() called as soon after every minute as system activity
allows.</para></p></td>
</tr>
<tr valign="top">
<td class="Cell" ><a name="%3a%3aCAnimFunctions%3a%3aESyncDay"><code class="Value">ESyncDay</code></a></td>
<td class="Cell"><p class="ValueDesc">
<para>Animate() called as soon after midnight every day&#0160;as system
activity allows.</para></p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
