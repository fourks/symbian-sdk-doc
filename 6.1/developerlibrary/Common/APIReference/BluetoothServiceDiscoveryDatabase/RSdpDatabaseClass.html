<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>RSdpDatabase</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="RSdpClass.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="RSdpSubSessionClass.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Bluetooth&nbsp;Service&nbsp;Discovery&nbsp;Database</a>&nbsp;<span class="separator">&#187;</span>
RSdpDatabase</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>btsdp.h</code>
<br>Link against: <code>sdpdatabase.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aRSdpDatabase"></a>

<h1>Class <code>RSdpDatabase</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>RSdpDatabase</code></p><h4 class="subheading">Support</h4>
<p>Supported from 6.1
</p><h4 class="subheading">Description</h4>
<p> Subsession to the SDP through which service record and their
attributes can be added, deleted, and updated.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code>RSdpDatabase</code></td><td class="Cell">Subsession to the SDP through which service record and their attributes can be added, deleted, and updated</td>
</tr>
<tr><td class="Cell"><code><a href="RSdpSubSessionClass.html#%3a%3aRSdpSubSession">RSdpSubSession</a></code></td><td class="Cell">Base class used in the derivation of RSdpDatabase</td>
</tr>
<tr><td class="Cell"><code><a href="../ClientServer/RSubSessionBaseClass.html#%3a%3aRSubSessionBase">RSubSessionBase</a></code></td><td class="Cell">Client-side handle to a sub-session</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>RSdpDatabase</code>:
<br><code class="ApiItem"><a href="RSdpDatabaseClass.html#%3a%3aRSdpDatabase%3a%3aClose%28%29" title="Closes the SDP database subsession">Close()</a></code>, <code class="ApiItem"><a href="RSdpDatabaseClass.html#%3a%3aRSdpDatabase%3a%3aCreateServiceRecordL%28%29" title="Creates a new service record, with multiple service classes, in the SDP database">CreateServiceRecordL()</a></code>, <code class="ApiItem"><a href="RSdpDatabaseClass.html#%3a%3aRSdpDatabase%3a%3aDeleteAttributeL%28%29" title="Delete an attribute from a service record">DeleteAttributeL()</a></code>, <code class="ApiItem"><a href="RSdpDatabaseClass.html#%3a%3aRSdpDatabase%3a%3aDeleteRecordL%28%29" title="Deletes a service record">DeleteRecordL()</a></code>, <code class="ApiItem"><a href="RSdpDatabaseClass.html#%3a%3aRSdpDatabase%3a%3aOpen%28%29" title="Opens a SDP database subsession">Open()</a></code>, <code class="ApiItem"><a href="RSdpDatabaseClass.html#%3a%3aRSdpDatabase%3a%3aRSdpDatabase%28%29" title="Default constructor">RSdpDatabase()</a></code>, <code class="ApiItem"><a href="RSdpDatabaseClass.html#%3a%3aRSdpDatabase%3a%3aUpdateAttributeL%28%29" title="Updates a service record attribute (narrow descriptor value)">UpdateAttributeL()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../ClientServer/RSubSessionBaseClass.html#%3a%3aRSubSessionBase" title="Client-side handle to a sub-session">RSubSessionBase</a></code>:
<br><code class="ApiItem"><a href="../ClientServer/RSubSessionBaseClass.html#%3a%3aRSubSessionBase%3a%3aCloseSubSession%28%29" title="Closes the sub-session">CloseSubSession()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSubSessionBaseClass.html#%3a%3aRSubSessionBase%3a%3aCreateSubSession%28%29" title="Creates a new sub-session within an existing session">CreateSubSession()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSubSessionBaseClass.html#%3a%3aRSubSessionBase%3a%3aSend%28%29" title="Sends a blind message to the server -- no reply is expected">Send()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSubSessionBaseClass.html#%3a%3aRSubSessionBase%3a%3aSendReceive%28%29" title="Sends a message to the server and waits synchronously for a reply">SendReceive()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSubSessionBaseClass.html#%3a%3aRSubSessionBase%3a%3aSubSessionHandle%28%29" title="Returns the sub-session handle number">SubSessionHandle()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSubSessionBaseClass.html#%3a%3aRSubSessionBase%3a%3aoperator%3d%28%29" title="Assignment constructor">operator=()</a></code></p>
<a name="2.6"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Subsession creation and closure</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aRSdpDatabase%3a%3aRSdpDatabase%28%29"></a>
<hr size="1" noshade>
<h3><code>RSdpDatabase()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>RSdpDatabase();</code></p><h4 class="subheading">Description</h4>
<p>Default constructor.</p>
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aRSdpDatabase%3a%3aOpen%28%29"></a>
<hr size="1" noshade>
<h3><code>Open()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Open(RSdp&amp; aSession);</code></p><h4 class="subheading">Description</h4>
<p>Opens a SDP database subsession.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RSdp&amp; aSession</code></td>
<td class="Cell"><p class="ValueDesc">SDP database session</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">System-wide error code</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.4"></a></div><div class="Head3">
<a name="%3a%3aRSdpDatabase%3a%3aClose%28%29"></a>
<hr size="1" noshade>
<h3><code>Close()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Close();</code></p><h4 class="subheading">Description</h4>
<p>Closes the SDP database subsession.</p>
<a name="2.7"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Service records</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aRSdpDatabase%3a%3aCreateServiceRecordL%28%29"></a>
<hr size="1" noshade>
<h3><code>CreateServiceRecordL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void CreateServiceRecordL(const TUUID&amp; aUUID, TSdpServRecordHandle&amp; aHandle);</code></p><h4 class="subheading">Description</h4>
<p>Creates a new service record, with a single service class, in
the SDP database. </p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TUUID&amp; aUUID</code></td>
<td class="Cell"><p class="ValueDesc">The service class UUID for the service record</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpServRecordHandle&amp; aHandle</code></td>
<td class="Cell"><p class="ValueDesc">On return, the service record handle of the new record</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aRSdpDatabase%3a%3aCreateServiceRecordL%28%29"></a>
<hr size="1" noshade>
<h3><code>CreateServiceRecordL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void CreateServiceRecordL(CSdpAttrValueDES&amp; aUUIDList, TSdpServRecordHandle&amp; aHandle);</code></p><h4 class="subheading">Description</h4>
<p>Creates a new service record, with multiple service classes, in
the SDP database.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CSdpAttrValueDES&amp; aUUIDList</code></td>
<td class="Cell"><p class="ValueDesc">The service class attribute of the new record. This should
consist of a list of UUIDs of the service classes to which the record belongs.
The UUIDs should be ordered from the most derived service class to the base
one.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpServRecordHandle&amp; aHandle</code></td>
<td class="Cell"><p class="ValueDesc">On return, the service record handle of the new record</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.4"></a></div><div class="Head3">
<a name="%3a%3aRSdpDatabase%3a%3aDeleteRecordL%28%29"></a>
<hr size="1" noshade>
<h3><code>DeleteRecordL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void DeleteRecordL(TSdpServRecordHandle aHandle);</code></p><h4 class="subheading">Description</h4>
<p>Deletes a service record.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpServRecordHandle aHandle</code></td>
<td class="Cell"><p class="ValueDesc">Handle of the service record to delete</p></td>
</tr>
</table></td></tr></table>
<a name="2.8"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Attributes</h2>
</div><div class="Bodytext">
<a name="2.8.2"></a></div><div class="Head3">
<a name="%3a%3aRSdpDatabase%3a%3aDeleteAttributeL%28%29"></a>
<hr size="1" noshade>
<h3><code>DeleteAttributeL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void DeleteAttributeL(TSdpServRecordHandle aHandle, TSdpAttributeID aAttrID);</code></p><h4 class="subheading">Description</h4>
<p>Delete an attribute from a service record. </p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpServRecordHandle aHandle</code></td>
<td class="Cell"><p class="ValueDesc">The service record from which to delete the attribute</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpAttributeID aAttrID</code></td>
<td class="Cell"><p class="ValueDesc">The ID of the attribute</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aRSdpDatabase%3a%3aUpdateAttributeL%28%29"></a>
<hr size="1" noshade>
<h3><code>UpdateAttributeL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void UpdateAttributeL(TSdpServRecordHandle aHandle, TSdpAttributeID aAttrID, CSdpAttrValue&amp; aAttrValue);</code></p><h4 class="subheading">Description</h4>
<p>Updates a service record attribute (value encapsulated in a
<code>CSdpAttrValue</code>).</p>
<p>If the attribute does not exist, it is created. If it already
exists, the current definition is removed and the new value inserted. </p>
<p>No check is made that the attribute value is suitable for the
service class to which the record belongs. It is up to the user to ensure that
the semantics of the attribute defined by the service class are
respected.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpServRecordHandle aHandle</code></td>
<td class="Cell"><p class="ValueDesc">The service record handle to update</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpAttributeID aAttrID</code></td>
<td class="Cell"><p class="ValueDesc">The attribute ID to update</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">CSdpAttrValue&amp; aAttrValue</code></td>
<td class="Cell"><p class="ValueDesc">The attribute value</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.4"></a></div><div class="Head3">
<a name="%3a%3aRSdpDatabase%3a%3aUpdateAttributeL%28%29"></a>
<hr size="1" noshade>
<h3><code>UpdateAttributeL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void UpdateAttributeL(TSdpServRecordHandle aHandle, TSdpAttributeID aAttrID, TUint aUintValue);</code></p><h4 class="subheading">Description</h4>
<p>Updates a service record attribute (integer value).</p>
<p>If the attribute does not exist, it is created. If it already
exists, the current definition is removed and the new value inserted. </p>
<p>No check is made that the attribute value is suitable for the
service class to which the record belongs. It is up to the user to ensure that
the semantics of the attribute defined by the service class are
respected.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpServRecordHandle aHandle</code></td>
<td class="Cell"><p class="ValueDesc">The service record handle to update</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpAttributeID aAttrID</code></td>
<td class="Cell"><p class="ValueDesc">The attribute ID to update</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TUint aUintValue</code></td>
<td class="Cell"><p class="ValueDesc">The attribute value</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.5"></a></div><div class="Head3">
<a name="%3a%3aRSdpDatabase%3a%3aUpdateAttributeL%28%29"></a>
<hr size="1" noshade>
<h3><code>UpdateAttributeL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void UpdateAttributeL(TSdpServRecordHandle aHandle, TSdpAttributeID aAttrID, const TDesC16&amp; aDesCValue);</code></p><h4 class="subheading">Description</h4>
<p>Updates a service record attribute (wide descriptor
value).</p>
<p>If the attribute does not exist, it is created. If it already
exists, the current definition is removed and the new value inserted. </p>
<p>No check is made that the attribute value is suitable for the
service class to which the record belongs. It is up to the user to ensure that
the semantics of the attribute defined by the service class are
respected.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpServRecordHandle aHandle</code></td>
<td class="Cell"><p class="ValueDesc">The service record handle to update</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpAttributeID aAttrID</code></td>
<td class="Cell"><p class="ValueDesc">The attribute ID to update</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const
TDesC16&amp; aDesCValue</code></td>
<td class="Cell"><p class="ValueDesc">The attribute value</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.6"></a></div><div class="Head3">
<a name="%3a%3aRSdpDatabase%3a%3aUpdateAttributeL%28%29"></a>
<hr size="1" noshade>
<h3><code>UpdateAttributeL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void UpdateAttributeL(TSdpServRecordHandle aHandle, TSdpAttributeID aAttrID, const TDesC8&amp; aDesCValue);</code></p><h4 class="subheading">Description</h4>
<p>Updates a service record attribute (narrow descriptor
value).</p>
<p>If the attribute does not exist, it is created. If it already
exists, the current definition is removed and the new value inserted. </p>
<p>No check is made that the attribute value is suitable for the
service class to which the record belongs. It is up to the user to ensure that
the semantics of the attribute defined by the service class are
respected.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpServRecordHandle aHandle</code></td>
<td class="Cell"><p class="ValueDesc">The service record handle to update</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TSdpAttributeID aAttrID</code></td>
<td class="Cell"><p class="ValueDesc">The attribute ID to update</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const
TDesC8&amp; aDesCValue</code></td>
<td class="Cell"><p class="ValueDesc">The attribute value</p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
