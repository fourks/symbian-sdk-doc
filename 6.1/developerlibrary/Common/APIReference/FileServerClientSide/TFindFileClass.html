<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>TFindFile</title>
<link href="../../../_stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../_stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../_stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../_stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../_stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../_stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../_stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="TFileTextClass.html"><img src="../../../_stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="TFormatModeEnum.html"><img src="../../../_stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">File&nbsp;Server&nbsp;Client&nbsp;Side</a>&nbsp;<span class="separator">&#187;</span>
TFindFile</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>f32file.h</code>
<br>Link against: <code>efsrv.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aTFindFile"></a>

<h1>Class <code>TFindFile</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>TFindFile</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Searches for files. Each function has a variant which searches for
multiple files, using one or more wildcard characters in the filename. If an
initial search is successful, further searches can be carried out using
<code>Find()</code> or <code>FindWild()</code>. You can also retrieve the fully
qualified file specification, and manipulate and interrogate it using the
<code>TParse</code> class (or related classes).</p>
<p>Note that when specifying the path of a directory to search, the
path should always end with a backslash character.</p>
<p>Defined in <code>TFindFile</code>:
<br><code class="ApiItem"><a href="TFindFileClass.html#%3a%3aTFindFile%3a%3aFile%28%29" title="Gets the full file specification of a file which was found by a successful call to one of the search variants which do not accept wildcards">File()</a></code>, <code class="ApiItem"><a href="TFindFileClass.html#%3a%3aTFindFile%3a%3aFind%28%29" title="Searches for a file again">Find()</a></code>, <code class="ApiItem"><a href="TFindFileClass.html#%3a%3aTFindFile%3a%3aFindByDir%28%29" title="Searches for a file in a directory on all available drives">FindByDir()</a></code>, <code class="ApiItem"><a href="TFindFileClass.html#%3a%3aTFindFile%3a%3aFindByPath%28%29" title="Searches for a file in one or more directories">FindByPath()</a></code>, <code class="ApiItem"><a href="TFindFileClass.html#%3a%3aTFindFile%3a%3aFindWild%28%29" title="Searches again after a successful FindWildByPath() orFindWildByDir(), for the next occurrences of the filename in the path or drive list">FindWild()</a></code>, <code class="ApiItem"><a href="TFindFileClass.html#%3a%3aTFindFile%3a%3aFindWildByDir%28%29" title="Searches using wildcards for one or more files in a specified directory">FindWildByDir()</a></code>, <code class="ApiItem"><a href="TFindFileClass.html#%3a%3aTFindFile%3a%3aFindWildByPath%28%29" title="Searches for one or more files in the directories contained in a path list">FindWildByPath()</a></code>, <code class="ApiItem"><a href="TFindFileClass.html#%3a%3aTFindFile%3a%3aTFindFile%28%29" title="Constructs the object with a file server session">TFindFile()</a></code>
</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="UsingTFindFile.guide.html#FileServerClientSide%2eusing%2dTFindFile">Using TFindFile</a></li>
</ul>
<a name="2.6"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Construction</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aTFindFile%3a%3aTFindFile%28%29"></a>
<hr size="1" noshade>
<h3><code>TFindFile()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TFindFile(RFs&amp; aFs);</code></p><h4 class="subheading">Description</h4>
<p>Constructs the object with a file server
session.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RFs&amp; aFs</code></td>
<td class="Cell"><p class="ValueDesc">File server session</p></td>
</tr>
</table></td></tr></table>
<a name="2.7"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Search for files</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aTFindFile%3a%3aFindByPath%28%29"></a>
<hr size="1" noshade>
<h3><code>FindByPath()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt FindByPath(const TDesC&amp; aFileName,const TDesC* aPathList);</code></p><h4 class="subheading">Description</h4>
<p>Searches for a file in one or more directories. The search ends
when the file is found, or when every directory specified in the path list has
been unsuccessfully searched.</p>
<p>Notes:</p>
<ul>
<li>
<p>For the equivalent search using wildcards, use
<code>FindWildByPath()</code>. </p>
</li>
<li>
<p>After a file has been found, use
<code>TFindFile::File()</code> to get the fully qualified path of the file. To
search for the next occurrence, use <code>TFindFile::Find()</code>.</p>
</li>
</ul><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aFileName</code></td>
<td class="Cell"><p class="ValueDesc">The filename to search for. If <code>aFileName</code> specifies
a directory as well as a filename, that directory is searched first. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC* aPathList</code></td>
<td class="Cell"><p class="ValueDesc">List of directories to search. Paths in this list must be
separated by a semicolon character, but a semicolon is not required after the
final path. The directories are searched in the order in which they occur in
the list. If a path in the list contains a drive letter, that drive alone is
searched. If a path contains no drive letter, the function searches for the
file in that directory on every available drive in turn, beginning with drive
Y:, in descending alphabetical order and ending with drive Z:.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if the filename was found.
<code>KErrNotFound</code> if the filename could not be found.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aTFindFile%3a%3aFindByDir%28%29"></a>
<hr size="1" noshade>
<h3><code>FindByDir()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt FindByDir(const TDesC&amp; aFileName,const TDesC&amp; aDirPath);</code></p><h4 class="subheading">Description</h4>
<p>Searches for a file in a directory on all available drives. The
search ends when the file is found, or when every available drive has been
unsuccessfully searched.</p>
<p>Notes:</p>
<ul>
<li>
<p>A drive letter may be specified in <code>aDirPath</code>.
If a drive is specified, that drive is searched first. If no drive is
specified, the drive specified in the session path is searched first. The
remaining available drives are then searched in descending alphabetical order,
from y: to a:, and
ending with the z: drive.</p>
</li>
<li>
<p>For the corresponding search using wildcards, use
<code>FindWildByDir()</code>. </p>
</li>
<li>
<p>After a file has been found, use
<code>TFindFile::File()</code> to get the fully qualified path and filename. To
search for the next occurrence, use <code>TFindFile::Find()</code>.</p>
</li>
</ul><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aFileName</code></td>
<td class="Cell"><p class="ValueDesc">Filename to search for. If a path is specified, it overrides
the path specified in <code>aDirPath</code>. If no path is specified, the path
contained in <code>aDirPath</code> is used.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aDirPath</code></td>
<td class="Cell"><p class="ValueDesc">Single path indicating a directory to search on each
drive.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if the file was found,
<code>KErrNotFound</code> if not.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.4"></a></div><div class="Head3">
<a name="%3a%3aTFindFile%3a%3aFind%28%29"></a>
<hr size="1" noshade>
<h3><code>Find()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Find();</code></p><h4 class="subheading">Description</h4>
<p>Searches for a file again. For use after a successful
<code>FindByPath()</code> or <code>FindByDir()</code>, to find the next
occurrence of the filename in the path or drive list.</p>
<p>Note:</p>
<ul>
<li>
<p>After a file has been found, use
<code>TFindFile::File()</code> to get the fully qualified path and
filename.</p>
</li>
</ul><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if another occurrence of the file was
found or <code>KErrNotFound</code> if no more occurrences were found.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.5"></a></div><div class="Head3">
<a name="%3a%3aTFindFile%3a%3aFindWildByPath%28%29"></a>
<hr size="1" noshade>
<h3><code>FindWildByPath()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt FindWildByPath(const TDesC&amp; aFileName,const TDesC* aPathList,CDir*&amp; aDirList);</code></p><h4 class="subheading">Description</h4>
<p>Searches for one or more files in the directories contained in
a path list. Wildcard characters can be specified. The search ends when one or
more filenames matching <code>aFileName</code> is found, or when every
directory in the path list has been unsuccessfully searched. To begin searching
again after a successful match has been made, use
<code>FindWild()</code>.</p>
<p>Notes:</p>
<ul>
<li>
<p>The caller of the function is responsible for deleting
<code>aDirList</code> after the function has returned.</p>
</li>
<li>
<p>Calling <code>TFindFile::File()</code> after a successful
search gets the drive letter and directory containing the file(s). The
filenames can be retrieved via the array of <code>TEntry::iName</code>s
contained in <code>aDirList</code>. If you want to retrieve the fully qualified
path of a file, you need to parse the path and the filename.</p>
</li>
</ul><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aFileName</code></td>
<td class="Cell"><p class="ValueDesc">Filename to search for. May contain wildcards. If
<code>aFileName</code> specifies a directory as well as a filename, that
directory is searched first.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC* aPathList</code></td>
<td class="Cell"><p class="ValueDesc">List of directories to search. Paths in this list must be
separated by a semicolon character, but a semicolon is not required after the
final path. The directories are searched in the order in which they occur in
the list. Directories must be fully qualified, including a drive letter and the
name must end with a backslash.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">CDir*&amp; aDirList</code></td>
<td class="Cell"><p class="ValueDesc">On return, contains the entries for all files matching
<code>aFileName</code> in the first directory in which a match occurred.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNotFound</code> if no matching file was found in any
of the directories, or <code>KErrNone</code> if one or more matching files was
found.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="UsingTFindFile.guide.html#FileServerClientSide%2eusing%2dTFindFile">Using TFindFile</a></li>
</ul>
<a name="2.7.6"></a></div><div class="Head3">
<a name="%3a%3aTFindFile%3a%3aFindWildByDir%28%29"></a>
<hr size="1" noshade>
<h3><code>FindWildByDir()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt FindWildByDir(const TDesC&amp; aFileName,const TDesC&amp; aDirPath,CDir*&amp; aDir);</code></p><h4 class="subheading">Description</h4>
<p>Searches using wildcards for one or more files in a specified
directory. If no matching file is found in that directory, all available drives
are searched in descending alphabetical order, from y:
to a:, and ending with the z:
drive.</p>
<p>The search ends when one or more matching filenames are found,
or when every available drive has been unsuccessfully searched. To begin
searching again after a successful match has been made, use
<code>FindWild()</code>. Wildcards may be specified in the filename.</p>
<p>Notes:</p>
<ul>
<li>
<p>A drive letter may be specified in <code>aDirPath</code>
(or in <code>aFileName</code>). If a drive is specified, that drive is searched
first, followed by the other available drives, in descending alphabetical
order. If no drive is specified, the drive contained in the session path is
searched first.</p>
</li>
<li>
<p>The function sets <code>aDir</code> to NULL, then allocates
memory for it before appending entries to the list. Therefore,
<code>aDir</code> should have no memory allocated to it before this function is
called, otherwise this memory will become orphaned.</p>
</li>
<li>
<p>The caller of this function is responsible for deleting
<code>aDir</code> after the function has returned.</p>
</li>
<li>
<p>Calling <code>TFindFile::File()</code> after a successful
search returns the drive letter and directory containing the file(s). Filenames
may be retrieved via the array of <code>TEntry::iName</code>s contained in
<code>aDirList</code>. If you want to retrieve the fully qualified path of a
file, you will need to parse the path and the filename.</p>
</li>
</ul><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aFileName</code></td>
<td class="Cell"><p class="ValueDesc">Filename to search for. May contain wildcards. If a path is
specified, it overrides the path specified in <code>aDirPath</code>. If no path
is specified, the path contained in <code>aDirPath</code> is used in the
search.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aDirPath</code></td>
<td class="Cell"><p class="ValueDesc">Path indicating a directory to search on each drive.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">CDir*&amp; aDir</code></td>
<td class="Cell"><p class="ValueDesc">On return, contains the entries for all files matching
<code>aFileName</code>.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">Tint</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNotFound</code> if no matching file was found in the
directory on any of the drives, or <code>KErrNone</code> one or more matching
files was found.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="UsingTFindFile.guide.html#FileServerClientSide%2eusing%2dTFindFile">Using TFindFile</a></li>
</ul>
<a name="2.7.7"></a></div><div class="Head3">
<a name="%3a%3aTFindFile%3a%3aFindWild%28%29"></a>
<hr size="1" noshade>
<h3><code>FindWild()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt FindWild(CDir*&amp; aDirList);</code></p><h4 class="subheading">Description</h4>
<p>Searches again after a successful <code>FindWildByPath()</code>
or<code>FindWildByDir()</code>, for the next occurrences of the filename in the
path or drive list.</p>
<p>Notes:</p>
<ul>
<li>
<p>The caller of this function is responsible for deleting
<code>aDirList</code> after the function has returned.</p>
</li>
<li>
<p>Calling <code>TFindFile::File()</code> after a successful
search, will return the drive letter and directory containing the file(s). The
filenames may be retrieved via the array of <code>TEntry::iName</code>s
contained in <code>aDirList</code>. If you want to retrieve the fully qualified
path of a file, you will need to parse the path and the filename using class
<code>TParse</code> (or derived classes).</p>
</li>
</ul><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CDir*&amp; aDirList</code></td>
<td class="Cell"><p class="ValueDesc">On return, contains the entries for all matching files found in
the next directory.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNotFound</code> if no more matching files were found,
or <code>KErrNone</code> if further occurrences were found.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="UsingTFindFile.guide.html#FileServerClientSide%2eusing%2dTFindFile">Using TFindFile</a></li>
</ul>
<a name="2.7.8"></a></div><div class="Head3">
<a name="%3a%3aTFindFile%3a%3aFile%28%29"></a>
<hr size="1" noshade>
<h3><code>File()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const TDesC&amp; File() const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the full file specification of a file which was found by a
successful call to one of the search variants which do not accept wildcards.
The file specification includes drive, path and filename.</p>
<p>Notes:</p>
<ul>
<li>
<p>When called after a successful search using one of the
variants which do accept wildcards, this function will only retrieve the drive
letter and directory components of the path, not the filename. In this case,
see the code contained in the link below for an example of how to get the fully
qualified path.</p>
</li>
</ul><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TDesC&amp;</code></td>
<td class="Cell"><p class="ValueDesc">On return contains the full path and filename.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="UsingTFindFile.guide.html#FileServerClientSide%2eusing%2dTFindFile">Using TFindFile</a></li>
</ul>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../_stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
