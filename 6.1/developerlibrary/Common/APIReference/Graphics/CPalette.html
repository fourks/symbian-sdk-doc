<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>CPalette</title>
<link href="../../../_stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../_stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../_stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../_stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../_stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../_stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../_stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CGraphicsDeviceClass.html"><img src="../../../_stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="MGraphicsDeviceMapClass.html"><img src="../../../_stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Graphics</a>&nbsp;<span class="separator">&#187;</span>
CPalette</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>gdi.h</code>
<br>Link against: <code>gdi.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aCPalette"></a>

<h1>Class <code>CPalette</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>CPalette</code></p><h4 class="subheading">Support</h4>
<p>Supported from 6.1
</p><h4 class="subheading">Description</h4>
<p>Provides user-definable palette support to the GDI.</p><p>A palette is a user-defined set of colours, which is a subset of the full range of 24-bit colours. This allows users the advantages of having a low bpp colour mode whilst being able to specify the colours available in that mode. To give an example, the EColor16 mode provides a palette of 16 colours as it provides a mapping between an integer index and a TRgb colour (see the table EGA Low-colour constants). Only a palette of 16 colour enables you to change the palette. Palettes are also used to allow 24-bit bitmaps to be stored in a more compressed form by finding the actual number of different colours used in the bitmap, creating a palette to allow the mapping of these colours to a smaller index space, and encoding the bitmap’s pixels using indexes to this new index space.
</p><p>A palette has a size which is set at its creation and cannot be altered — the number of entries in the palette. Each entry in a palette is a mapping between that entry’s index and a TRgb value. Palette entries can be got and set at any time between the palette’s creation and destruction. The GDI’s palette support also provides functions to find the nearest palette colour to a requested TRgb colour.
</p><h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase">CBase</a></code></td><td class="Cell">Base class for all classes to be instantiated on the heap</td>
</tr>
<tr><td class="Cell"><code>CPalette</code></td><td class="Cell">Provides user-definable palette support to the GDI</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>CPalette</code>:
<br><code class="ApiItem"><a href="CPalette.html#%3a%3aCPalette%3a%3aClear%28%29" title="Clears all the entries in the palette to TRgb(0)">Clear()</a></code>, <code class="ApiItem"><a href="CPalette.html#%3a%3aCPalette%3a%3aEntries%28%29" title="Gets the number of entries in the palette">Entries()</a></code>, <code class="ApiItem"><a href="CPalette.html#%3a%3aCPalette%3a%3aGetDataPtr%28%29" title="Returns a descriptor over the palette entries for the specifed colors">GetDataPtr()</a></code>, <code class="ApiItem"><a href="CPalette.html#%3a%3aCPalette%3a%3aGetEntry%28%29" title="Gets the rgb value of the palette entry aPaletteIndex">GetEntry()</a></code>, <code class="ApiItem"><a href="CPalette.html#%3a%3aCPalette%3a%3aNearestEntry%28%29" title="Gets the colour in the palette which is closest to the specified colour">NearestEntry()</a></code>, <code class="ApiItem"><a href="CPalette.html#%3a%3aCPalette%3a%3aNearestIndex%28%29" title="Gets the index of the colour in the palette which is closest to the specified colour">NearestIndex()</a></code>, <code class="ApiItem"><a href="CPalette.html#%3a%3aCPalette%3a%3aNewDefaultL%28%29" title="Creates a new default palette for the specified display mode">NewDefaultL()</a></code>, <code class="ApiItem"><a href="CPalette.html#%3a%3aCPalette%3a%3aNewL%28%29" title="Creates a new palette of the specified number of entries">NewL()</a></code>, <code class="ApiItem"><a href="CPalette.html#%3a%3aCPalette%3a%3aSetEntry%28%29" title="Sets the palette entry aPaletteIndex to the rgb value aPaletteEntry">SetEntry()</a></code>, <code class="ApiItem"><a href="CPalette.html#%3a%3aCPalette%3a%3a%7eCPalette%28%29" title="Destructor">~CPalette()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase" title="Base class for all classes to be instantiated on the heap">CBase</a></code>:
<br><code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase%3a%3aoperator%20new%28%29" title="Allocates the object from the heap and then initialises its contents to binary zeroes">operator new()</a></code></p>
<a name="CPalette%2eind"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Construction and destruction</h2>
</div><div class="Bodytext">
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aCPalette%3a%3aNewL%28%29"></a>
<hr size="1" noshade>
<h3><code>NewL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static CPalette* NewL(TInt aNumberOfEntries);</code></p><h4 class="subheading">Description</h4>
<p>Creates a new palette of the specified number of entries.
</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aNumberOfEntries</code></td>
<td class="Cell"><p class="ValueDesc">The number of entries in the palette being created.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CPalette*</code></td>
<td class="Cell"><p class="ValueDesc">The newly created palette.
</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.4"></a></div><div class="Head3">
<a name="%3a%3aCPalette%3a%3aNewDefaultL%28%29"></a>
<hr size="1" noshade>
<h3><code>NewDefaultL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static CPalette* NewDefaultL(TDisplayMode aDispMode);</code></p><h4 class="subheading">Description</h4>
<p>Creates a new default palette for the specified display mode. The default palette for a particular display mode has one entry for each possible colour in that display mode (4 entries for EGray2, 256 entries for EColor16 etc.); the colour of each index p in the default palette is set to its default value according to its display mode (e.g. if the mode is EColor16 then palette[p]=Color16(p); if the mode is EGray4 then palette[p]=Gray4(p)).
</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TDisplayMode aDispMode</code></td>
<td class="Cell"><p class="ValueDesc">The display mode for which the palette is to be created.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CPalette*</code></td>
<td class="Cell"><p class="ValueDesc">The newly created palette
</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.5"></a></div><div class="Head3">
<a name="%3a%3aCPalette%3a%3a%7eCPalette%28%29"></a>
<hr size="1" noshade>
<h3><code>~CPalette()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>~CPalette();</code></p><h4 class="subheading">Description</h4>
<p>Destructor.</p>
<a name="2.6.6"></a></div><div class="Head3">
<a name="%3a%3aCPalette%3a%3aClear%28%29"></a>
<hr size="1" noshade>
<h3><code>Clear()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Clear();</code></p><h4 class="subheading">Description</h4>
<p>Clears all the entries in the palette to TRgb(0).</p>
<a name="2.6.7"></a></div><div class="Head3">
<a name="%3a%3aCPalette%3a%3aGetDataPtr%28%29"></a>
<hr size="1" noshade>
<h3><code>GetDataPtr()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void GetDataPtr(TInt aFirstColor,TInt aNumColors,TPtr8&amp; aPtr);</code></p><h4 class="subheading">Description</h4>
<p>Returns a descriptor over the palette entries for the specifed colors.  It is designed so that the descriptor can be passed to another thread and that thread copy the relevant entries.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aFirstColor</code></td>
<td class="Cell"><p class="ValueDesc">The first colour.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aNumColors</code></td>
<td class="Cell"><p class="ValueDesc">Number of colours.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TPtr8&amp; aPtr</code></td>
<td class="Cell"><p class="ValueDesc">Descriptor.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Palette information</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aCPalette%3a%3aEntries%28%29"></a>
<hr size="1" noshade>
<h3><code>Entries()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Entries() const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the number of entries in the palette</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The number of entries in the palette.
</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aCPalette%3a%3aGetEntry%28%29"></a>
<hr size="1" noshade>
<h3><code>GetEntry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TRgb GetEntry(TInt aPaletteIndex) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the rgb value of the palette entry aPaletteIndex.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aPaletteIndex</code></td>
<td class="Cell"><p class="ValueDesc">The index of the palette entry to get.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TRgb</code></td>
<td class="Cell"><p class="ValueDesc">The rgb value of the palette entry
</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.4"></a></div><div class="Head3">
<a name="%3a%3aCPalette%3a%3aSetEntry%28%29"></a>
<hr size="1" noshade>
<h3><code>SetEntry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void SetEntry(TInt aPaletteIndex,const TRgb&amp; aPaletteEntry);</code></p><h4 class="subheading">Description</h4>
<p>Sets the palette entry aPaletteIndex to the rgb value aPaletteEntry.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aPaletteIndex</code></td>
<td class="Cell"><p class="ValueDesc">The index of the palette entry to be set.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TRgb&amp; aPaletteEntry</code></td>
<td class="Cell"><p class="ValueDesc">The rgb value to set that entry to.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.5"></a></div><div class="Head3">
<a name="%3a%3aCPalette%3a%3aNearestEntry%28%29"></a>
<hr size="1" noshade>
<h3><code>NearestEntry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TRgb NearestEntry(const TRgb&amp; aColor) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the colour in the palette which is closest to the specified colour.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TRgb&amp; aColor</code></td>
<td class="Cell"><p class="ValueDesc">The colour to find.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TRgb</code></td>
<td class="Cell"><p class="ValueDesc">The colour in the palette which is closest to the specified colour.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.6"></a></div><div class="Head3">
<a name="%3a%3aCPalette%3a%3aNearestIndex%28%29"></a>
<hr size="1" noshade>
<h3><code>NearestIndex()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt NearestIndex(const TRgb&amp; aColor) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the index of the colour in the palette which is closest to the specified colour.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TRgb&amp; aColor</code></td>
<td class="Cell"><p class="ValueDesc">The colour to find.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The index of the colour in the palette which is closest to the specified colour.</p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../_stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
