<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>RDbDatabase</title>
<link href="../../../_stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../_stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../_stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../_stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../_stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../_stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../_stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="DBMSErrorCodes.guide.html"><img src="../../../_stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="RDbNamedDatabaseClass.html"><img src="../../../_stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">DBMS&nbsp;Databases&nbsp;Interface</a>&nbsp;<span class="separator">&#187;</span>
RDbDatabase</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>d32dbms.h</code>
<br>Link against: <code>edbms.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aRDbDatabase"></a>

<h1>Class <code>RDbDatabase</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>RDbDatabase</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Abstract class providing the functionality of a database. The
source of the database and the implementation characteristics of a particular
database are provided by a class derived from <code>RDbDatabase</code>. DBMS
has one such implementation: the store database.</p>
<p>This class is not intended for user
derivation.</p><p>Defined in <code>RDbDatabase</code>:
<br><code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aAlterTable%28%29" title="Changes the structure of a specified table in the database to the new column set">AlterTable()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aBegin%28%29" title="Begins a transaction on the database">Begin()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aChangeSecurity%28%29" title="Changes the access key for the database">ChangeSecurity()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aClose%28%29" title="Closes the database object">Close()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aColSetL%28%29" title="Returns the row structure of a table from the database">ColSetL()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aCommit%28%29" title="Commits the current transaction on the database">Commit()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aCompact%28%29" title="Compacts the database and returns when the operation is complete">Compact()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aCreateIndex%28%29" title="Creates a new index with the provided key on the specified table in the database">CreateIndex()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aCreateTable%28%29" title="Creates a new table in the database with the supplied column set, using a primary key">CreateTable()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aDestroy%28%29" title="Deletes an entire database">Destroy()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aDropIndex%28%29" title="Removes an index from the database">DropIndex()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aDropTable%28%29" title="Removes a specified table from the database">DropTable()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aExecute%28%29" title="Executes a DDL (SQL schema update) statement or a DML (SQL data update) statement on the database and returns when complete">Execute()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aInTransaction%28%29" title="Tests if there is an outstanding transaction on the database">InTransaction()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aIndexNamesL%28%29" title="Returns a list all of the indexes belonging to a table on the database">IndexNamesL()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aIsDamaged%28%29" title="Tests whether recovery is required for the database to be fully functional">IsDamaged()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aKeyL%28%29" title="Returns the definition of an index from the database">KeyL()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aRecover%28%29" title="Recovers a damaged database">Recover()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aRollback%28%29" title="Rolls back the current transaction on the database, restoring the database to its previous state">Rollback()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aSize%28%29" title="Returns the currently available size information for the database">Size()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aTSize" title="Data type that is returned by RDbDatabase::Size()">TSize</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aTableNamesL%28%29" title="Returns a list all of the tables in the database">TableNamesL()</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aUpdateStats%28%29" title="Updates any calculated statistics for the database and returns when the update operation is complete">UpdateStats()</a></code>
</p>
<a name="2.5"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Closing the database</h2>
</div><div class="Bodytext">
<a name="2.5.2"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aClose%28%29"></a>
<hr size="1" noshade>
<h3><code>Close()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Close();</code></p><h4 class="subheading">Description</h4>
<p>Closes the database object. It is safe to close a database
object which is not open.</p>
<p>An attempt is made to commit any outstanding transaction on the
database. If this fails, then when the database is finally closed it is
effectively rolled back.</p>
<p>If a rowset is open or an incremental operation is in progress
on this database, the database itself remains open until these have also been
closed, though the database can no longer be accessed through <code>this</code>
object.</p>
<p>For the Store database in this situation, the store must remain
open and usable until all rowsets and incremental operations have been closed
on this database.</p>
<a name="2.5.3"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aDestroy%28%29"></a>
<hr size="1" noshade>
<h3><code>Destroy()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Destroy();</code></p><h4 class="subheading">Description</h4>
<p>Deletes an entire database. This involves first removing all
tables in the database, before deleting and releasing any other resources
required by the database.</p>
<p>If successful, the database object will be closed.</p>
<p>Notes:</p>
<ul>
<li>
<p>The process of removing the tables may be a long-running
operation. No incremental operation has been provided to do this. However, each
table can be dropped incrementally by the client prior to calling this function
to achieve the same result.</p>
</li>
<li>
<p>The Store database implementation deletes all of its streams
from the store as part of this function.</p>
</li>
</ul><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise one of the other
system wide error codes including the DBMS database error codes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="DBMSErrorCodes.guide.html#InterfaceToDBMSDatabases%2eDBMS%2derror%2dcodes">Additional DBMS database error codes</a></li>
</ul>
<a name="2.6"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Recovery</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aIsDamaged%28%29"></a>
<hr size="1" noshade>
<h3><code>IsDamaged()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TBool IsDamaged() const;</code></p><h4 class="subheading">Description</h4>
<p>Tests whether recovery is required for the database to be fully
functional.</p>
<p>Note that the Store database implementation continues to allow
operation on any objects in the database which are not damaged, even when it
reports that recovery is necessary.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TBool</code></td>
<td class="Cell"><p class="ValueDesc">True if the database requires recovery; false, otherwise.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aRecover%28%29"></a>
<hr size="1" noshade>
<h3><code>Recover()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Recover();</code></p><h4 class="subheading">Description</h4>
<p>Recovers a damaged database. The database must not have any tables or
views open on it, or any pending transactions when recovering.</p>
<p>Database recovery can be performed incrementally, see the
<code>RDbIncremental</code> class.</p>
<p>The Store database implementation does not require recovery to be
performed in order to use the database&nbsp;&#8212; only the damaged indexes
are unavailable until recovery has been completed.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise one of the other
system wide error codes including the DBMS database error codes. If recovery
fails with either <code>KErrNoMemory</code> or <code>KErrDiskFull</code>, then
recovery may be attempted again when more memory or disk space is
available.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../DBMSDatabaseIncrementalOperations/RDbIncrementalClass.html#%3a%3aRDbIncremental" title="Provides the interface for performing long-running database operations in incremental steps, allowing application programs to remain responsive to other events"><code class="ApiItem">RDbIncremental</code></a></li>
<li><a href="DBMSErrorCodes.guide.html#InterfaceToDBMSDatabases%2eDBMS%2derror%2dcodes">Additional DBMS database error codes</a></li>
</ul>
<a name="2.7"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Transactions</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aBegin%28%29"></a>
<hr size="1" noshade>
<h3><code>Begin()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Begin();</code></p><h4 class="subheading">Description</h4>
<p>Begins a transaction on the database. Transactions cannot be nested, so
this must not be called if a transaction, including automatic transactions, is
outstanding.</p>
<p>If transactions are not begun explicitly using <code>Begin()</code>,
any modifications to the database will be made within an automatic
transaction.</p>
<p>Beginning a transaction locks the database; the lock is a shared
read-lock. In ER5, this can fail if another client already has a lock which
excludes this client; the function returns an error code to indicate
this.</p>
<p>The function always returns <code>KErrNone</code> for client side
access to the database.</p>
<p>Not that if the client has already locked the database, then another
attempt to lock it causes the client to be panicked.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> for client side access to the database or, if
this is a shared database and the client has successfully locked
it.<code>KErrLocked</code> if this is a shared database and another client
already has an exclusive write-lock on it. Otherwise, one of the other system
error codes.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aCommit%28%29"></a>
<hr size="1" noshade>
<h3><code>Commit()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Commit();</code></p><h4 class="subheading">Description</h4>
<p>Commits the current transaction on the database. This must match a call
to <code>Begin()</code>, as automatic transactions cannot be committed using
this function.</p>
<p>On failure, the database becomes unusable until it is rolled
back.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise one of the other system
wide error codes including the DBMS database error codes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aBegin%28%29" title="Begins a transaction on the database"><code class="ApiItem">RDbDatabase::Begin()</code></a></li>
<li><a href="DBMSErrorCodes.guide.html#InterfaceToDBMSDatabases%2eDBMS%2derror%2dcodes">Additional DBMS database error codes</a></li>
</ul>
<a name="2.7.4"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aRollback%28%29"></a>
<hr size="1" noshade>
<h3><code>Rollback()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Rollback();</code></p><h4 class="subheading">Description</h4>
<p>Rolls back the current transaction on the database, restoring the
database to its previous state. It should be used if an error occurs while
making the updates or committing the transaction.</p>
<p>This must match a call to <code>Begin()</code>, as automatic transactions
cannot be rolled back using this function.</p>
<p>The Store database implementation may not be able to fully restore
indexes to their previous state upon roll back. They will remain unusable until
the database has been recovered: the database will report damage if this is the
case.</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aBegin%28%29" title="Begins a transaction on the database"><code class="ApiItem">RDbDatabase::Begin()</code></a></li>
</ul>
<a name="2.7.5"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aInTransaction%28%29"></a>
<hr size="1" noshade>
<h3><code>InTransaction()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TBool InTransaction() const;</code></p><h4 class="subheading">Description</h4>
<p>Tests if there is an outstanding transaction on the database. This only
reports on transactions started explicitly using the <code>Begin()</code>
function.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TBool</code></td>
<td class="Cell"><p class="ValueDesc">True, if a transaction is in progress; false, otherwise.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aBegin%28%29" title="Begins a transaction on the database"><code class="ApiItem">RDbDatabase::Begin()</code></a></li>
</ul>
<a name="2.8"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Changing the schema</h2>
</div><div class="Bodytext"><h4 class="subheading">Description</h4>
<p>Schema modifications cannot be done while any tables or views are open,
it also cannot be done within the same transaction as row updates.</p>
<p>Most operations to modify the database schema can potentially take a
while to execute, the <code>RDbIncremental</code> class provides a way to do
these incrementally.</p>
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aCreateTable%28%29"></a>
<hr size="1" noshade>
<h3><code>CreateTable()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt CreateTable(const TDesC&amp; aName,const CDbColSet&amp; aDef);</code></p><h4 class="subheading">Description</h4>
<p>Creates a new table in the database with the supplied column
set.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the table to create.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const CDbColSet&amp; aDef</code></td>
<td class="Cell"><p class="ValueDesc">The definition of the new table. It is validated to ensure that all the
columns have valid and unique names, and that the types can support the
requested attributes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise one of the other system
wide error codes including the DBMS database error codes. Specifically, the
function returns:<code>KErrBadName</code> if a table or column name is
invalid.<code>KErrAlreadyExists</code> if a table of the same name already
exists in the database.<code>KErrArgument</code> if the column set is empty,
there are duplicate column names, a column's maximum length is non-positive but
not <code>KDbUndefinedLength</code>, or a non-numeric column has the
auto-increment attribute.<code>KErrNotSupported</code> if a column type is out
of the recognised range, an unknown attribute bit is set, or the maximum length
for a <code>Text8</code>, <code>Text16</code> or <code>Binary</code> column is
more than 255.<code>KErrTooBig</code> if the resulting record size can be
larger than 8200 bytes.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.4"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aCreateTable%28%29"></a>
<hr size="1" noshade>
<h3><code>CreateTable()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt CreateTable(const TDesC&amp; aName,const CDbColSet&amp; aDef,const CDbKey&amp; aPrimaryKey);</code></p><h4 class="subheading">Description</h4>
<p>Creates a new table in the database with the supplied column set, using a
primary key.</p>
<p>The Store database implementation does not support primary
keys.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the table to create.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const CDbColSet&amp; aDef</code></td>
<td class="Cell"><p class="ValueDesc">The definition of the new table. It is validated to ensure that all the
columns have valid and unique names, and that the types can support the
requested attributes.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const CDbKey&amp; aPrimaryKey</code></td>
<td class="Cell"><p class="ValueDesc">The primary key for the new table.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise one of the other system
wide error codes including the DBMS database error codes. The Store database
always returns <code>KErrNotSupported</code> for this function.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="DBMSErrorCodes.guide.html#InterfaceToDBMSDatabases%2eDBMS%2derror%2dcodes">Additional DBMS database error codes</a></li>
</ul>
<a name="2.8.5"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aDropTable%28%29"></a>
<hr size="1" noshade>
<h3><code>DropTable()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt DropTable(const TDesC&amp; aName);</code></p><h4 class="subheading">Description</h4>
<p>Removes a specified table from the database. This also removes all
indexes on the table.</p>
<p>Tables can be dropped incrementally, see the <code>RDbIncremental</code>
class.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the table to remove from the database.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise one of the other system
wide error codes including the DBMS database error codes. The Store database
always returns <code>KErrNotSupported</code> for this function.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../DBMSDatabaseIncrementalOperations/RDbIncrementalClass.html#%3a%3aRDbIncremental" title="Provides the interface for performing long-running database operations in incremental steps, allowing application programs to remain responsive to other events"><code class="ApiItem">RDbIncremental</code></a></li>
<li><a href="DBMSErrorCodes.guide.html#InterfaceToDBMSDatabases%2eDBMS%2derror%2dcodes">Additional DBMS database error codes</a></li>
</ul>
<a name="2.8.6"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aAlterTable%28%29"></a>
<hr size="1" noshade>
<h3><code>AlterTable()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt AlterTable(const TDesC&amp; aName,const CDbColSet&amp; aNewDef);</code></p><h4 class="subheading">Description</h4>
<p>Changes the structure of a specified table in the database to the new
column set.</p>
<p>Compared to the table's current column set, the new set may add new
columns and remove columns which are not indexed. Columns cannot have their
type, name or attributes changed.</p>
<p>The table data may need to be reorganised as a result of changing the
definition, so this function may take a while to complete.</p>
<p>Tables can be altered incrementally, see the <code>RDbIncremental</code>
class.</p>
<p>For the Store database, adding new columns to a table can be done easily,
dropping columns requires that the entire table is
rebuilt.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the table to alter.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const CDbColSet&amp; aNewDef</code></td>
<td class="Cell"><p class="ValueDesc">The new definition for the table.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise one of the other system
wide error codes including the DBMS database error codes. Specifically, the
function returns:<code>KErrNotFound</code> if the table does not exist in the
database.<code>KErrBadName</code> if a column name is
invalid.<code>KErrArgument</code> if the new column set is empty, or there are
duplicate column names, or if a column's maximum length is non-positive but not
<code>KDbUndefinedLength</code>, or a non-numeric column has the auto-increment
attribute, or an indexed column has been dropped, or a column has changed its
type or attributes, or a not-null or auto-increment column has been added to a
table which is not empty.<code>KErrNotSupported</code> if a column type is out
of the recognised range, or an unknown attribute bit is set, or the maximum
length for a <code>Text8</code>, <code>Text16</code> or <code>Binary</code>
column is more than 255.<code>KErrTooBig</code> if the resulting record size
can be larger than 8200 bytes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../DBMSDatabaseIncrementalOperations/RDbIncrementalClass.html#%3a%3aRDbIncremental" title="Provides the interface for performing long-running database operations in incremental steps, allowing application programs to remain responsive to other events"><code class="ApiItem">RDbIncremental</code></a></li>
<li><a href="DBMSErrorCodes.guide.html#InterfaceToDBMSDatabases%2eDBMS%2derror%2dcodes">Additional DBMS database error codes</a></li>
</ul>
<a name="2.8.7"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aCreateIndex%28%29"></a>
<hr size="1" noshade>
<h3><code>CreateIndex()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt CreateIndex(const TDesC&amp; aName,const TDesC&amp; aTable,const CDbKey&amp; aKey);</code></p><h4 class="subheading">Description</h4>
<p>Creates a new index with the provided key on the specified table in the
database.</p>
<p>The index is automatically built from the table data in the database, so
this function may take a while to complete.</p>
<p>Indexes can be built incrementally, see the <code>RDbIncremental</code>
class.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the index to create.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aTable</code></td>
<td class="Cell"><p class="ValueDesc">The table on which to create the index.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const CDbKey&amp; aKey</code></td>
<td class="Cell"><p class="ValueDesc">The key for the new index. It is validated by this function to ensure
that it matches the table structure.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise one of the other system
wide error codes including the DBMS database error codes. Specifically, the
function returns:<code>KErrNotFound</code> if the table does not exist in the
database or a key column is not found in the
table.<code>KErrAlreadyExists</code> if an index of the same name already
exists on table or a duplicate key is present when building an index. Note that
it is not possible to tell the difference between the possible causes of this
error if index creation is not carried out
incrementally.<code>KErrBadName</code> if an index or column name is
invalid.<code>KErrArgument</code> if the key has no key columns or a fixed
width column has a truncation length specified, or an invalid truncation length
has been specified for a key column, or a <code>LongText8</code> or
<code>LongText16</code> key column has no truncation length specified, or the
key contains a <code>Binary</code> or <code>LongBinary</code>
column.<code>KErrNotSupported</code> if a truncated key column is not the last
one.<code>KErrTooBig</code> if the resulting key size is too big.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../DBMSDatabaseIncrementalOperations/RDbIncrementalClass.html#%3a%3aRDbIncremental" title="Provides the interface for performing long-running database operations in incremental steps, allowing application programs to remain responsive to other events"><code class="ApiItem">RDbIncremental</code></a></li>
<li><a href="DBMSErrorCodes.guide.html#InterfaceToDBMSDatabases%2eDBMS%2derror%2dcodes">Additional DBMS database error codes</a></li>
</ul>
<a name="2.8.8"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aDropIndex%28%29"></a>
<hr size="1" noshade>
<h3><code>DropIndex()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt DropIndex(const TDesC&amp; aName,const TDesC&amp; aTable);</code></p><h4 class="subheading">Description</h4>
<p>Removes an index from the database.</p>
<p>Indexes can be dropped incrementally, see the <code>RDbIncremental</code>
class.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the index to remove from the database.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aTable</code></td>
<td class="Cell"><p class="ValueDesc">The table to which the index belongs.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise one of the other system
wide error codes including the DBMS database error codes. Specifically, the
function returns:<code>KErrNotFound</code> if the table or index does not
exist.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../DBMSDatabaseIncrementalOperations/RDbIncrementalClass.html#%3a%3aRDbIncremental" title="Provides the interface for performing long-running database operations in incremental steps, allowing application programs to remain responsive to other events"><code class="ApiItem">RDbIncremental</code></a></li>
<li><a href="DBMSErrorCodes.guide.html#InterfaceToDBMSDatabases%2eDBMS%2derror%2dcodes">Additional DBMS database error codes</a></li>
</ul>
<a name="2.9"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Schema enquiry</h2>
</div><div class="Bodytext">
<a name="2.9.2"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aTableNamesL%28%29"></a>
<hr size="1" noshade>
<h3><code>TableNamesL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CDbTableNames* TableNamesL() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns a list all of the tables in the database.</p>
<p>The function leaves if it encounters any error
conditions.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CDbTableNames*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a table names list object. The caller should delete it when
it is no longer required.</p></td>
</tr>
</table></td></tr></table>
<a name="2.9.3"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aColSetL%28%29"></a>
<hr size="1" noshade>
<h3><code>ColSetL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CDbColSet* ColSetL(const TDesC&amp; aName) const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the row structure of a table from the
database.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the table whose structure is required.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CDbColSet*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a column set object which describes the table's row
structure. The caller should delete it when it is no longer required.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The Store database can leave with one of the one of the DBMS database
error codes or one of the system-wide error codes. Specifically, it leaves with
<code>KErrNotFound</code> if the table does not exist. </p></td>
</tr>
</table></td></tr></table>
<a name="2.9.4"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aIndexNamesL%28%29"></a>
<hr size="1" noshade>
<h3><code>IndexNamesL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CDbIndexNames* IndexNamesL(const TDesC&amp; aTable) const;</code></p><h4 class="subheading">Description</h4>
<p>Returns a list all of the indexes belonging to a table on the
database.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aTable</code></td>
<td class="Cell"><p class="ValueDesc">The name of the table whose index list is required.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CDbIndexNames*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a index names list object. The caller should delete it when
it is no longer required.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The Store database can leave one of the DBMS database error codes or one
of the system-wide error codes. Specifically it leaves with
<code>KErrNotFound</code> if the table or index does not exist. </p></td>
</tr>
</table></td></tr></table>
<a name="2.9.5"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aKeyL%28%29"></a>
<hr size="1" noshade>
<h3><code>KeyL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CDbKey* KeyL(const TDesC&amp; aName,const TDesC&amp; aTable) const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the definition of an index from the
database.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the index whose definition is required.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aTable</code></td>
<td class="Cell"><p class="ValueDesc">The table to which the index belongs.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CDbKey*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a key object which describes the index. The caller should
delete it when it is no longer required.</p></td>
</tr>
</table></td></tr></table>
<a name="2.10"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Size information and statistics updating</h2>
</div><div class="Bodytext">
<a name="2.10.2"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aSize%28%29"></a>
<hr size="1" noshade>
<h3><code>Size()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TSize Size() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the currently available size information for the database.</p>
<p>Specifically, the information returned is:</p>
<ul>
<li>
<p>the size, in bytes, of the database objects.</p>
</li>
<li>
<p>the proportion, as a percentage, of the size of the database which is
current data. This indicates how much space may be available for
compaction.</p>
</li>
</ul><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TSize</code></td>
<td class="Cell"><p class="ValueDesc">Size information for the database.</p></td>
</tr>
</table></td></tr></table>
<a name="2.10.3"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aUpdateStats%28%29"></a>
<hr size="1" noshade>
<h3><code>UpdateStats()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt UpdateStats();</code></p><h4 class="subheading">Description</h4>
<p>Updates any calculated statistics for the database and returns when the
update operation is complete.</p>
<p>This function can take an extended time to complete; an incremental form
is provided by the <code>RDbIncremental</code> class.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise another of the system-wide
error codes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../DBMSDatabaseIncrementalOperations/RDbIncrementalClass.html#%3a%3aRDbIncremental" title="Provides the interface for performing long-running database operations in incremental steps, allowing application programs to remain responsive to other events"><code class="ApiItem">RDbIncremental</code></a></li>
</ul>
<a name="2.11"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Database compaction</h2>
</div><div class="Bodytext">
<a name="2.11.2"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aCompact%28%29"></a>
<hr size="1" noshade>
<h3><code>Compact()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Compact();</code></p><h4 class="subheading">Description</h4>
<p>Compacts the database and returns when the operation is complete.</p>
<p>This function can take an extended time to complete; an incremental form
is provided by the <code>RDbIncremental</code> class.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise another of the system-wide
error codes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../DBMSDatabaseIncrementalOperations/RDbIncrementalClass.html#%3a%3aRDbIncremental" title="Provides the interface for performing long-running database operations in incremental steps, allowing application programs to remain responsive to other events"><code class="ApiItem">RDbIncremental</code></a></li>
</ul>
<a name="2.12"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Enhanced SQL</h2>
</div><div class="Bodytext">
<a name="2.12.2"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aExecute%28%29"></a>
<hr size="1" noshade>
<h3><code>Execute()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Execute(const TDesC&amp; aSql,TDbTextComparison aComparison=EDbCompareNormal);</code></p><h4 class="subheading">Description</h4>
<p>Executes a DDL (SQL schema update) statement or a DML (SQL data update)
statement on the database and returns when complete.</p>
<p>This function can take an extended time to complete; an incremental form
is provided by the <code>RDbIncremental</code> class.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aSql</code></td>
<td class="Cell"><p class="ValueDesc">A reference to a descriptor containing the SQL statement to be executed
on the database.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDbTextComparison aComparison</code></td>
<td class="Cell"><p class="ValueDesc">This argument is used in the execution of some SQL statements;
specifically: in CREATE INDEX statements, it specifies the comparison operation
used for text columns in the index key. in UPDATE and DELETE statements, it
specifies the comparison operation used to evaluate the WHERE clause. All other
SQL statements ignore this argument. If not explicitly specified, this argument
defaults to <code>EDbCompareNormal</code>.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">Either:<code>KErrNone</code>, if a DDL statement was successfully
executed. or the number of rows inserted, updated or deleted, if a DML
statement was successfully executed. or another of the system error
codes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../DBMSDatabaseIncrementalOperations/RDbIncrementalClass.html#%3a%3aRDbIncremental" title="Provides the interface for performing long-running database operations in incremental steps, allowing application programs to remain responsive to other events"><code class="ApiItem">RDbIncremental</code></a></li>
</ul>
<a name="2.13"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Change security</h2>
</div><div class="Bodytext">
<a name="2.13.2"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aChangeSecurity%28%29"></a>
<hr size="1" noshade>
<h3><code>ChangeSecurity()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt ChangeSecurity(CSecurityDecryptBase* aKey,CSecurityEncryptBase* aNewKey);</code></p><h4 class="subheading">Description</h4>
<p>Changes the access key for the database.</p>
<p>The function deletes both key objects.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CSecurityDecryptBase* aKey</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the current decryption key which is authenticated in the
same way as for opening a database.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">CSecurityEncryptBase* aNewKey</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the new encryption key used to re-encrypt the authentication
data</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrArgument</code>, if the database is not
encrypted.<code>KErrGeneral</code>, if the decrypt key fails to access the
database.</p></td>
</tr>
</table></td></tr></table>
<a name="2.14"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Structs</h2>
</div><div class="Bodytext">
<a name="2.14.2"></a></div><div class="Head3">
<a name="%3a%3aRDbDatabase%3a%3aTSize"></a>
<hr size="1" noshade>
<h3>Struct <code>TSize</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TSize</code></p><h4 class="subheading">Description</h4>
<p>Data type that is returned by
<code>RDbDatabase::Size()</code>.</p><p>Defined in <code>RDbDatabase::TSize</code>:
<br><code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aTSize%3a%3aiSize" title="The total size of database objects, in bytes">iSize</a></code>, <code class="ApiItem"><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aTSize%3a%3aiUsage" title="The proportion, as a percentage, of the total size of database objects which is live data">iUsage</a></code>
</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RDbDatabaseClass.html#%3a%3aRDbDatabase%3a%3aSize%28%29" title="Returns the currently available size information for the database"><code class="ApiItem">RDbDatabase::Size()</code></a></li>
</ul>
<a name="2.14.2.5"></a><a name="%3a%3aRDbDatabase%3a%3aTSize%3a%3aiSize"></a>
<h4><code>iSize</code></h4><hr size="8" noshade>
<p class="Prototype"><code>TInt iSize</code></p><h4 class="subheading">Description</h4>
<p>The total size of database objects, in bytes.</p>
<a name="2.14.2.6"></a><a name="%3a%3aRDbDatabase%3a%3aTSize%3a%3aiUsage"></a>
<h4><code>iUsage</code></h4><hr size="8" noshade>
<p class="Prototype"><code>TInt iUsage</code></p><h4 class="subheading">Description</h4>
<p>The proportion, as a percentage, of the total size of database objects
which is live data.</p>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../_stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
