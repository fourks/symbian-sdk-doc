<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>RMutex</title>
<link href="../../../_stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../_stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../_stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../_stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../_stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../_stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../_stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="index.html"><img src="../../../_stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="TFindMutexClass.html"><img src="../../../_stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Mutexes</a>&nbsp;<span class="separator">&#187;</span>
RMutex</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code> e32std.h </code>
<br>Link against: <code> euser.lib </code>
</p>
</div><div class="Head1">
<a name="%3a%3aRMutex"></a>

<h1>Class <code>RMutex</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>RMutex</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Handle to a mutex. The mutex itself is a Kernel object.</p>
<p>Handles should be closed after use. The base class provides the
<code>Close()</code> function which should be called when the handle is no
longer required.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase">RHandleBase</a></code></td><td class="Cell">Handle to an object</td>
</tr>
<tr><td class="Cell"><code>RMutex</code></td><td class="Cell">Handle to a mutex</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>RMutex</code>:
<br><code class="ApiItem"><a href="RMutexClass.html#%3a%3aRMutex%3a%3aCount%28%29" title="Returns the current value of the mutex count">Count()</a></code>, <code class="ApiItem"><a href="RMutexClass.html#%3a%3aRMutex%3a%3aCreateGlobal%28%29" title="Creates a mutex that is visible globally and opens this handle to that mutex">CreateGlobal()</a></code>, <code class="ApiItem"><a href="RMutexClass.html#%3a%3aRMutex%3a%3aCreateLocal%28%29" title="Creates a mutex and opens this handle to that mutex">CreateLocal()</a></code>, <code class="ApiItem"><a href="RMutexClass.html#%3a%3aRMutex%3a%3aOpen%28%29" title="Opens a handle onto the global mutex found using a TFindMutex object">Open()</a></code>, <code class="ApiItem"><a href="RMutexClass.html#%3a%3aRMutex%3a%3aOpenGlobal%28%29" title="Opens a handle onto an existing global mutex which has the same name as that contained in the specified descriptor">OpenGlobal()</a></code>, <code class="ApiItem"><a href="RMutexClass.html#%3a%3aRMutex%3a%3aSignal%28%29" title="Signals that the thread is finished with the mutex">Signal()</a></code>, <code class="ApiItem"><a href="RMutexClass.html#%3a%3aRMutex%3a%3aWait%28%29" title="Waits for access to the mutex">Wait()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase" title="Handle to an object">RHandleBase</a></code>:
<br><code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aClose%28%29" title="Closes the handle">Close()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aDuplicate%28%29" title="Creates a valid handle to the Kernel object to which the specified thread already has a handle">Duplicate()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aHandle%28%29" title="Retrieves the handle-number of the object associated with this handle">Handle()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aSetHandle%28%29" title="Use this function to set the handle-number of this handle to the specified value">SetHandle()</a></code></p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aClose%28%29" title="Closes the handle"><code class="ApiItem">RHandleBase::Close()</code></a></li>
</ul>
<a name="2.7"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Create a mutex</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aRMutex%3a%3aCreateLocal%28%29"></a>
<hr size="1" noshade>
<h3><code>CreateLocal()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt CreateLocal(TOwnerType aType=EOwnerProcess);</code></p><h4 class="subheading">Description</h4>
<p>Creates a mutex and opens
this handle to that mutex.</p>
<p>The Kernel side object representing the mutex is unnamed. It is, therefore, local to the calling process.
The handle can be used directly by any thread within the calling process, but no other <code>RMutex</code> object can open a duplicate handle.</p>
<p>By default, ownership of this mutex handle is vested in the
current process, but can be vested in the current thread by passing
<code>EOwnerThread</code> as the second parameter to this function.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TOwnerType aType </code></td>
<td class="Cell"><p class="ValueDesc"> An enumeration whose enumerators define the ownership of this
mutex handle. If not explicitly specified, <code>EOwnerProcess</code> is taken
as default. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aRMutex%3a%3aCreateGlobal%28%29"></a>
<hr size="1" noshade>
<h3><code>CreateGlobal()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt CreateGlobal(const TDesC&amp; aName,TOwnerType aType=EOwnerProcess);</code></p><h4 class="subheading">Description</h4>
<p>Creates a mutex that is visible globally and opens this handle to
that mutex.</p>
<p>The mutex is visible globally and is assigned the name contained
in the specified descriptor. Other threads may open a handle to this
mutex.</p>
<p>By default, ownership of this mutex handle is vested in the
current process, but can be vested in the current thread by passing
<code>EOwnerThread</code> as the second parameter to this function.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aName </code></td>
<td class="Cell"><p class="ValueDesc">The name to be assigned to this global mutex. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TOwnerType aType </code></td>
<td class="Cell"><p class="ValueDesc"> An enumeration whose enumerators define the ownership of this
mutex handle. If not explicitly specified, <code>EOwnerProcess</code> is taken
as default. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Open a handle on an existing mutex</h2>
</div><div class="Bodytext">
<a name="2.8.2"></a></div><div class="Head3">
<a name="%3a%3aRMutex%3a%3aOpenGlobal%28%29"></a>
<hr size="1" noshade>
<h3><code>OpenGlobal()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt OpenGlobal(const TDesC&amp; aName,TOwnerType aType=EOwnerProcess);</code></p><h4 class="subheading">Description</h4>
<p>Opens a handle onto an existing global mutex which has the same
name as that contained in the specified descriptor.</p>
<p>By default, ownership of this mutex handle is vested in the current
process, but can be vested in the current thread by passing
<code>EOwnerThread</code> as the second parameter to this function.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aName </code></td>
<td class="Cell"><p class="ValueDesc"> The name of the global mutex which is to be opened. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TOwnerType aType </code></td>
<td class="Cell"><p class="ValueDesc"> An enumeration whose enumerators define the ownership of this
mutex handle. If not explicitly specified, <code>EOwnerProcess</code> is taken
as default. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aRMutex%3a%3aOpen%28%29"></a>
<hr size="1" noshade>
<h3><code>Open()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Open(const TFindMutex&amp; aFind,TOwnerType aType=EOwnerProcess);</code></p><h4 class="subheading">Description</h4>
<p>Opens a handle onto the global mutex found using a
<code>TFindMutex</code> object.</p>
<p>A <code>TFindMutex</code> object is used to find all global mutexes
whose full names match a specified pattern.</p>
<p>By default, ownership of this mutex handle is vested in the current
process, but can be vested in the current thread by passing
<code>EOwnerThread</code> as the second parameter to this function.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TFindMutex&amp; aFind </code></td>
<td class="Cell"><p class="ValueDesc"> A reference to the object which is used to find the mutex.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TOwnerType aType </code></td>
<td class="Cell"><p class="ValueDesc"> An enumeration whose enumerators define the ownership of this mutex
handle. If not explicitly specified, <code>EOwnerProcess</code> is taken as
default. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="TFindMutexClass.html#%3a%3aTFindMutex" title="Finds all global mutexes whose full names match a specified pattern"><code class="ApiItem">TFindMutex</code></a></li>
</ul>
<a name="2.9"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Controlling access to the mutex</h2>
</div><div class="Bodytext">
<a name="2.9.2"></a></div><div class="Head3">
<a name="%3a%3aRMutex%3a%3aWait%28%29"></a>
<hr size="1" noshade>
<h3><code>Wait()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Wait();</code></p><h4 class="subheading">Description</h4>
<p>Waits for access to the mutex. </p>
<p>The function decrements the mutex count by one and returns immediately
if it is zero or positive. If the mutex count is negative after being
decremented, the calling thread is marked as waiting (on a mutex); the thread
is added to the end of a FIFO queue of threads maintained by this mutex.</p>
<a name="2.9.3"></a></div><div class="Head3">
<a name="%3a%3aRMutex%3a%3aSignal%28%29"></a>
<hr size="1" noshade>
<h3><code>Signal()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Signal();</code></p><h4 class="subheading">Description</h4>
<p>Signals that the thread is finished with the mutex.</p>
<p>The function increments the mutex count by one. If the count was negative
before being incremented, the first thread waiting on the mutex's queue of
threads is removed from that queue and, provided that it is not suspended for
any other reason, is marked as ready to run. That thread will, therefore, be
the next to gain access to the shared resource.</p>
<a name="2.10"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>General information</h2>
</div><div class="Bodytext">
<a name="2.10.2"></a></div><div class="Head3">
<a name="%3a%3aRMutex%3a%3aCount%28%29"></a>
<hr size="1" noshade>
<h3><code>Count()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Count();</code></p><h4 class="subheading">Description</h4>
<p>Returns the current value of the mutex count.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"> The current value of the mutex count </p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../_stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
