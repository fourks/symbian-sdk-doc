<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>CArrayVar&lt;TAny&gt;</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CArrayVarSegClass.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="RArrayBaseClass.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Dynamic&nbsp;Arrays</a>&nbsp;<span class="separator">&#187;</span>
CArrayVar&lt;TAny&gt;</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code> e32base.h </code>
<br>Link against: <code> euser.lib </code>
</p>
</div><div class="Head1">
<a name="%3a%3aCArrayVar%3cTAny%3e"></a>

<h1>Class <code>CArrayVar&lt;TAny&gt;</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>CArrayVar&lt;TAny&gt;</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>A template specialisation base class for variable length arrays.The
array buffer organisation is defined at construction.</p>
<p>The class is useful for constructing an array of variable length
buffers, where the length is decided at run time.</p>
<p>This class is also useful as a data member of a base class in a
thin template class/base class pair, where the type of the array element is not
known until the owning thin template class is instantiated.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code>CArrayVar&lt;TAny&gt;</code></td><td class="Cell">A template specialisation base class for variable length arrays.The array buffer organisation is defined at construction</td>
</tr>
<tr><td class="Cell"><code><a href="CArrayVarBaseClass.html#%3a%3aCArrayVarBase">CArrayVarBase</a></code></td><td class="Cell">An implementation base class for variable length arrays</td>
</tr>
<tr><td class="Cell"><code><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase">CBase</a></code></td><td class="Cell">Base class for all classes to be instantiated on the heap</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>CArrayVar<TAny></code>:
<br><code class="ApiItem"><a href="CArrayVarTAnyClass.html#%3a%3aCArrayVar%3cTAny%3e%3a%3aAppendL%28%29" title="Appends an untyped element of specified length onto the end of the array">AppendL()</a></code>, <code class="ApiItem"><a href="CArrayVarTAnyClass.html#%3a%3aCArrayVar%3cTAny%3e%3a%3aAt%28%29" title="Returns a pointer to the untyped element located at the specified position within the array">At()</a></code>, <code class="ApiItem"><a href="CArrayVarTAnyClass.html#%3a%3aCArrayVar%3cTAny%3e%3a%3aCArrayVar%28%29" title="Constructs a variable array with the specified granularity and buffer organization">CArrayVar()</a></code>, <code class="ApiItem"><a href="CArrayVarTAnyClass.html#%3a%3aCArrayVar%3cTAny%3e%3a%3aExtendL%28%29" title="Extends the array by one element of specified length at the end of the array, i.e">ExtendL()</a></code>, <code class="ApiItem"><a href="CArrayVarTAnyClass.html#%3a%3aCArrayVar%3cTAny%3e%3a%3a%7eCArrayVar%28%29" title="The destructor is empty and is present only to cause the virtual function table to be defined in a unique module">~CArrayVar()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="CArrayVarBaseClass.html#%3a%3aCArrayVarBase" title="An implementation base class for variable length arrays">CArrayVarBase</a></code>:
<br><code class="ApiItem"><a href="CArrayVarBaseClass.html#%3a%3aCArrayVarBase%3a%3aCompress%28%29" title="Removes excess space from the array buffer">Compress()</a></code>,
<code class="ApiItem"><a href="CArrayVarBaseClass.html#%3a%3aCArrayVarBase%3a%3aCount%28%29" title="Returns the number of elements held in the array">Count()</a></code>,
<code class="ApiItem"><a href="CArrayVarBaseClass.html#%3a%3aCArrayVarBase%3a%3aDelete%28%29" title="Removes one or more contiguous elements from the array, starting at a specific position">Delete()</a></code>,
<code class="ApiItem"><a href="CArrayVarBaseClass.html#%3a%3aCArrayVarBase%3a%3aLength%28%29" title="Returns the length of a specific element">Length()</a></code>,
<code class="ApiItem"><a href="CArrayVarBaseClass.html#%3a%3aCArrayVarBase%3a%3aReset%28%29" title="Deletes all elements from the array and frees the memory allocated to the array buffer">Reset()</a></code>,
<code class="ApiItem"><a href="CArrayVarBaseClass.html#%3a%3aCArrayVarBase%3a%3aSort%28%29" title="Sorts the elements of the array into key sequence">Sort()</a></code></p>
<p>Inherited from <code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase" title="Base class for all classes to be instantiated on the heap">CBase</a></code>:
<br><code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase%3a%3aoperator%20new%28%29" title="Allocates the object from the heap and then initialises its contents to binary zeroes">operator new()</a></code></p>
<a name="dynamicarrays%2eCArrayVarTAny%2econstruction"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Construction</h2>
</div><div class="Bodytext">
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aCArrayVar%3cTAny%3e%3a%3aCArrayVar%28%29"></a>
<hr size="1" noshade>
<h3><code>CArrayVar()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CArrayVar(TBufRep aRep,TInt aGranularity);</code></p><h4 class="subheading">Description</h4>
<p>Constructs a variable array with the specified granularity
and buffer organization.</p>
<p>Notes</p>
<p>No memory is allocated to the array buffer by this C++
constructor.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TBufRep aRep </code></td>
<td class="Cell"><p class="ValueDesc"> A pointer to a function used to expand the array buffer. The
organisation of the array buffer is implied by the choice of this function. For
a flat array buffer, pass <code>(TBufRep)CBufFlat::NewL</code>. For a segmented
array buffer, pass <code>(TBufRep)CBufSeg::NewL</code>. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aGranularity </code></td>
<td class="Cell"><p class="ValueDesc"> The granularity of the array. This value must be positive
otherwise the constructor raises an E32USER-CBase 19 panic. </p></td>
</tr>
</table></td></tr></table>
<a name="dynamicarrays%2eCArrayVarTAny%2edestruction"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Destruction</h2>
</div><div class="Bodytext">
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aCArrayVar%3cTAny%3e%3a%3a%7eCArrayVar%28%29"></a>
<hr size="1" noshade>
<h3><code>~CArrayVar()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>~CArrayVar()</code></p><h4 class="subheading">Description</h4>
<p>The destructor is empty and is present only to cause the
virtual function table to be defined in a unique module.</p>
<a name="dynamicarrays%2eCArrayVarTAny%2eappend"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Appending elements</h2>
</div><div class="Bodytext">
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aCArrayVar%3cTAny%3e%3a%3aAppendL%28%29"></a>
<hr size="1" noshade>
<h3><code>AppendL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void AppendL(const TAny* aPtr,TInt aLength);</code></p><h4 class="subheading">Description</h4>
<p>Appends an untyped element of specified length onto the end of
the array.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TAny* aPtr </code></td>
<td class="Cell"><p class="ValueDesc"> A pointer to an untyped element to be appended. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aLength </code></td>
<td class="Cell"><p class="ValueDesc"> The length of the untyped element. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function always attempts to allocate a cell to contain the
new element and may also attempt to expand the array buffer. If there is
insufficient memory available, the function leaves. The leave code is one of
the system wide error codes. If the function leaves, the array is left in the
state it was in before the call. </p></td>
</tr>
</table></td></tr></table>
<a name="dynamicarrays%2eCArrayVarTAny%2eexpand"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Expanding the array</h2>
</div><div class="Bodytext">
<a name="2.9.3"></a></div><div class="Head3">
<a name="%3a%3aCArrayVar%3cTAny%3e%3a%3aExtendL%28%29"></a>
<hr size="1" noshade>
<h3><code>ExtendL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TAny* ExtendL(TInt aLength);</code></p><h4 class="subheading">Description</h4>
<p>Extends the array by one element of specified length at the end of
the array, i.e. at position <code>CArrayVarBase::Count()</code>, and returns a
pointer to the new element location.</p>
<p>As elements are untyped, no construction is possible and the
content of the new location remains undefined.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TAny* </code></td>
<td class="Cell"><p class="ValueDesc"> A pointer to the new element location at the end of the array.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function always attempts to allocate a cell to contain the
new element and may also attempt to expand the array buffer. If there is
insufficient memory available, the function leaves. The leave code is one of
the system wide error codes. If the function leaves, the array is left in the
state it was in before the call. </p></td>
</tr>
</table></td></tr></table>
<a name="dynamicarrays%2eCArrayVarTAny%2eindexing"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Indexing into the array</h2>
</div><div class="Bodytext">
<a name="2.10.3"></a></div><div class="Head3">
<a name="%3a%3aCArrayVar%3cTAny%3e%3a%3aAt%28%29"></a>
<hr size="1" noshade>
<h3><code>At()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const TAny* At(TInt anIndex) const;<br>TAny* At(TInt anIndex);</code></p><h4 class="subheading">Description</h4>
<p>Returns a pointer to the untyped element located at the specified
position within the array.</p>
<p>Two versions of the function are supplied. The compiler chooses the
appropriate version based on the use made of the returned pointer. If the
returned pointer is used in an expression where that reference can be modified,
then the non-const version is chosen.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt anIndex </code></td>
<td class="Cell"><p class="ValueDesc"> The position of the element within the array. The position is
relative to zero; i.e. zero implies the first element in the array. This value
must be non-negative and less than the number of objects currently within the
array otherwise the fucntions raise an E32USER-CBase 21 panic. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TAny* </code></td>
<td class="Cell"><p class="ValueDesc"> A non-const pointer to the untyped element located at position
<code>anIndex</code> within the array. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const Tany* </code></td>
<td class="Cell"><p class="ValueDesc"> A const pointer to the untyped element located at position
<code>anIndex</code> within the array. </p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
