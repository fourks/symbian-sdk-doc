<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>CMdaImageUtility</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CMdaImageFileToBitmapUtilityClass.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="CMdaResourceClass.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Image&nbsp;Converter</a>&nbsp;<span class="separator">&#187;</span>
CMdaImageUtility</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code> MdaImageConverter.h </code>
<br>Link against: <code> MediaClientImage.lib </code>
</p>
</div><div class="Head1">
<a name="%3a%3aCMdaImageUtility"></a>

<h1>Class <code>CMdaImageUtility</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>CMdaImageUtility</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>The abstract base class for the image conversion utilities.</p>
<p>Clients of the concrete conversion classes call the functions
provided by this interface to perform the conversion. The implementation of
these functions is provided either by the concrete conversion classes
themselves or by private implementation classes.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive">CActive</a></code></td><td class="Cell">The core class of the active object abstraction</td>
</tr>
<tr><td class="Cell"><code><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase">CBase</a></code></td><td class="Cell">Base class for all classes to be instantiated on the heap</td>
</tr>
<tr><td class="Cell"><code>CMdaImageUtility</code></td><td class="Cell">The abstract base class for the image conversion utilities</td>
</tr>
<tr><td class="Cell"><code><a href="CMdaResourceClass.html#%3a%3aCMdaResource">CMdaResource</a></code></td><td class="Cell">Base class used in the derivation of CMdaImageUtility</td>
</tr>
<tr><td class="Cell"><code><a href="../AudioSampleEditor/MMdaObjectStateChangeObserverClass.html#%3a%3aMMdaObjectStateChangeObserver">MMdaObjectStateChangeObserver</a></code></td><td class="Cell">An interface class for handling the change of state of an audio data sample object</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>CMdaImageUtility</code>:
<br><code class="ApiItem"><a href="CMdaImageUtilityClass.html#%3a%3aCMdaImageUtility%3a%3aCancelConvertL%28%29" title="Cancels the conversion operation">CancelConvertL()</a></code>, <code class="ApiItem"><a href="CMdaImageUtilityClass.html#%3a%3aCMdaImageUtility%3a%3aClose%28%29" title="Closes the open file-based or descriptor-based image">Close()</a></code>, <code class="ApiItem"><a href="CMdaImageUtilityClass.html#%3a%3aCMdaImageUtility%3a%3aConvertL%28%29" title="Begins the image conversion operation for the specified frame -- overloaded function">ConvertL()</a></code>, <code class="ApiItem"><a href="CMdaImageUtilityClass.html#%3a%3aCMdaImageUtility%3a%3aFrameCount%28%29" title="Returns the number of frames, counting from the first frame in the image, to the next frame to be decoded">FrameCount()</a></code>, <code class="ApiItem"><a href="CMdaImageUtilityClass.html#%3a%3aCMdaImageUtility%3a%3aFrameInfo%28%29" title="Retrieves information about the specified frame">FrameInfo()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive" title="The core class of the active object abstraction">CActive</a></code>:
<br><code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aCancel%28%29" title="Cancels the wait for completion of an outstanding request">Cancel()</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aDeque%28%29" title="Removes the active object from the active scheduler's list of active objects">Deque()</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aDoCancel%28%29" title="Implements cancellation of an outstanding request">DoCancel()</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aEPriorityHigh" title="A priority higher than EPriorityUserInput">EPriorityHigh</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aEPriorityIdle" title="A low priority, useful for active objects representing background processing">EPriorityIdle</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aEPriorityLow" title="A priority higher than EPriorityIdle but lower thanEPriorityStandard">EPriorityLow</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aEPriorityStandard" title="Most active objects will have this priority">EPriorityStandard</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aEPriorityUserInput" title="A priority higher than EPriorityStandard; useful for active objects handling user input">EPriorityUserInput</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aIsActive%28%29" title="Determines whether the active object has a request outstanding">IsActive()</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aIsAdded%28%29" title="Determines whether the active object has been added to the active scheduler's list of active objects">IsAdded()</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aPriority%28%29" title="Returns the priority of the active object">Priority()</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aRunError%28%29" title="Handles a leave occurring in the request completion event handlerRunL()">RunError()</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aRunL%28%29" title="Handles an active object's request completion event">RunL()</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aSetActive%28%29" title="Indicates that the active object has issued a request and that it is now outstanding">SetActive()</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aSetPriority%28%29" title="Sets the priority of the active object">SetPriority()</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aTPriority" title="Defines standard priorities for active objects">TPriority</a></code>,
<code class="ApiItem"><a href="../AsynchronousServices/CActiveClass.html#%3a%3aCActive%3a%3aiStatus" title="The request status associated with an asynchronous request">iStatus</a></code></p>
<p>Inherited from <code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase" title="Base class for all classes to be instantiated on the heap">CBase</a></code>:
<br><code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase%3a%3aoperator%20new%28%29" title="Allocates the object from the heap and then initialises its contents to binary zeroes">operator new()</a></code></p>
<p>Inherited from <code class="ApiItem"><a href="../AudioSampleEditor/MMdaObjectStateChangeObserverClass.html#%3a%3aMMdaObjectStateChangeObserver" title="An interface class for handling the change of state of an audio data sample object">MMdaObjectStateChangeObserver</a></code>:
<br><code class="ApiItem"><a href="../AudioSampleEditor/MMdaObjectStateChangeObserverClass.html#%3a%3aMMdaObjectStateChangeObserver%3a%3aMoscoStateChangeEvent%28%29" title="Defines required client behaviour when the observed audio data sample object changes state">MoscoStateChangeEvent()</a></code></p>
<a name="imageconverter%2eCMdaImageUtility%2econversion"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Conversion</h2>
</div><div class="Bodytext">
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aCMdaImageUtility%3a%3aConvertL%28%29"></a>
<hr size="1" noshade>
<h3><code>ConvertL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void ConvertL(CFbsBitmap&amp; aBitmap,TInt aFrameNumber = 0) = 0;<br>virtual void ConvertL(CFbsBitmap&amp; aBitmap,CFbsBitmap&amp; aMaskBitmap,TInt aFrameNumber = 0) = 0;</code></p><h4 class="subheading">Description</h4>
<p>Begins the image conversion operation for the specified frame
&#8212; overloaded function.</p>
<p>The operation is asynchronous. When the conversion operation is
complete, successfully or otherwise, the callback function
<code>MMdaImageUtilObserver::MiuoConvertComplete()</code> is called.</p>
<p>When converting from a file or descriptor to a bitmap, the
operation can complete with <code>KErrUnderflow</code>, if there is
insufficient information in the file or descriptor. Typically, this occurs when
using the file or descriptor as a cache. In this situation, the conversion
operation should be performed repeatedly until the file or descriptor has
accumulated enough information for the operation to complete with
<code>KErrNone</code>. As much of the image as is present is converted and
written to the target bitmap at each call to this function.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> CFbsBitmap&amp; aBitmap </code></td>
<td class="Cell"><p class="ValueDesc"> A reference to a bitmap. This may be a source or a target for
the conversion process, depending on the concrete conversion class utility
being used. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> CFbsBitmap&amp; aMaskBitmap </code></td>
<td class="Cell"><p class="ValueDesc"> A masking bitmap. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aFrameNumber = 0 </code></td>
<td class="Cell"><p class="ValueDesc"> The frame number. This value is relative to zero. For those
concrete conversion classes which perform conversion from a bitmap, this value
must always be zero. For those concrete conversion classes which perform
conversion to a bitmap, this value must be less than the number of frames in
the image. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function always attempts to allocate a cell to contain
the new element and may also attempt to expand the array buffer. If there is
insufficient memory available, the function leaves. The leave code is one of
the system wide error codes. If the function leaves, the array is left in the
state it was in before the call. </p></td>
</tr>
</table></td></tr></table>
<a name="2.6.4"></a></div><div class="Head3">
<a name="%3a%3aCMdaImageUtility%3a%3aCancelConvertL%28%29"></a>
<hr size="1" noshade>
<h3><code>CancelConvertL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void CancelConvertL() = 0;</code></p><h4 class="subheading">Description</h4>
<p>Cancels the conversion operation. The callback function
<code>MMdaImageUtilObserver::MiuoConvertComplete()</code> is not called.</p>
<a name="imageconverter%2eCMdaImageUtility%2eclosing"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Closing</h2>
</div><div class="Bodytext">
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aCMdaImageUtility%3a%3aClose%28%29"></a>
<hr size="1" noshade>
<h3><code>Close()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void Close();</code></p><h4 class="subheading">Description</h4>
<p>Closes the open file-based or descriptor-based image.</p>
<p>Any conversion operation in progress is cancelled.</p>
<a name="imageconverter%2eCMdaImageUtility%2einformation"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Information</h2>
</div><div class="Bodytext">
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aCMdaImageUtility%3a%3aFrameInfo%28%29"></a>
<hr size="1" noshade>
<h3><code>FrameInfo()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void FrameInfo(TInt aFrame,TFrameInfo&amp; aInfo) const;</code></p><h4 class="subheading">Description</h4>
<p>Retrieves information about the specified frame.</p>
<p>This function should only be called after an existing image has
been successfully opened or a new image successfully created.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aFrame </code></td>
<td class="Cell"><p class="ValueDesc"> The frame number. This value is relative to zero. The value
must be less than the total number of frames in the image, otherwise the
function raises a USER 0 panic </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TFrameInfo&amp; aInfo </code></td>
<td class="Cell"><p class="ValueDesc"> Frame information. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.4"></a></div><div class="Head3">
<a name="%3a%3aCMdaImageUtility%3a%3aFrameCount%28%29"></a>
<hr size="1" noshade>
<h3><code>FrameCount()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TInt FrameCount() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the number of frames, counting from the first frame in
the image, to the next frame to be decoded.</p>
<p>For example, if 5 frames in the image have been decoded, this
function returns 5 if there are no more frames to decode, otherwise 6,
regardless of how many more frames there are in the image.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"> The number of the next frame to be decoded.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Notes:</h4>
<ul>
<li><note>The image conversion utilities do not scan all
the image data on calling <code>OpenL()</code>, just the header. Therefore, if,
as in the case of an animated gif, there is no frame count in the header, then
until all the frames in the image have been decoded, the total frame count is
unknown. Initially therefore, <code>FrameCount()</code> returns 1, but this
increments as each frame is decoded, and the utility reads the next frame's
header. Once the last frame has been decoded, all frames are available for
access as the information about each frame is stored.</note></li>
</ul>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
