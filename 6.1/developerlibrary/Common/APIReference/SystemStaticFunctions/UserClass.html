<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>User</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="index.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="UsingUser.guide.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">System&nbsp;Static&nbsp;Functions</a>&nbsp;<span class="separator">&#187;</span>
User</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>e32std.h</code>
<br>Link against: <code>euser.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aUser"></a>

<h1>Class <code>User</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>User</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Set of static user functions. These functions are related to a
number of System component APIs.</p>
<p>The majority of the functions are related to either the current
thread, or its heap. Examples in this category include
<code>User::Exit()</code>, which causes the thread to terminate, and
<code>User::Alloc()</code>, which allocates memory from the current thread's
heap.</p>
<p>Some of these functions are equivalent to functions in the
<code>RThread</code> or <code>RHeap</code> classes. In these cases, the
<code>User</code> function is a convenient way to access the function without
first having to get a handle to the current thread.</p>
<p>Functions are also provided to support debugging of memory leaks.
These function calls can be written explicitly or can be generated using a
corresponding macro&#0160;&#8212;  the advantage of using a macro is that the function
call is only generated for debug builds.</p>
<p>A final category of functions, which includes
<code>User::BinarySearch()</code> and <code>User::QuickSort()</code>, are just
useful functions which have no other natural home.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code>User</code></td><td class="Cell">Set of static user functions</td>
</tr>
<tr><td class="Cell"><code><a href="../MemoryAllocation/UserHeapClass.html#%3a%3aUserHeap">UserHeap</a></code></td><td class="Cell">A set of static functions for constructing fixed length heaps and local or global heaps</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>User</code>:
<br><code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aAbort%28%29" title="Raises an exception of type TExcType::EExcAbort on the current thread">Abort()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aAdjust%28%29" title="Stretches or shrinks an existing cell by a specified amount at a specified offset from the start of the cell">Adjust()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aAdjustL%28%29" title="Stretches or shrinks an existing cell by a specified amount at a specified offset from the start of the cell and leaves if there is insufficient memory in the heap to adjust or reallocate the cell">AdjustL()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aAfter%28%29" title="Suspends the current thread until a specified time interval has expired">After()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aAlloc%28%29" title="Allocates a cell of specified size from the current thread's heap">Alloc()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aAllocL%28%29" title="Allocates a cell of specified size from the current thread's heap and leaves if there is insufficient memory in the heap">AllocL()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aAllocLC%28%29" title="Allocates a cell of specified size from the current thread's heap, and if successful places a pointer to the cell on the cleanup stack">AllocLC()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aAllocLen%28%29" title="Returns the length of the specified allocated heap cell">AllocLen()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aAllocSize%28%29" title="Returns the total number of cells allocated on the current thread's heap and the total space allocated to them">AllocSize()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aAt%28%29" title="Suspends the current thread until the specified absolute time">At()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aAvailable%28%29" title="Returns the total free space currently available on the current thread's heap and the space available in the largest free block">Available()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aBeep%28%29" title="Makes a beep tone with a specified frequency and duration">Beep()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aBinarySearch%28%29" title="Performs a binary search for an array element containing a specified key">BinarySearch()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aCheck%28%29" title="Checks the validity of the current thread's heap">Check()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aCollate%28%29" title="Converts the character to its collated form">Collate()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aCompressAllHeaps%28%29" title="Compresses all the chunks containing heaps">CompressAllHeaps()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aCountAllocCells%28%29" title="Returns the total number of cells allocated, and the number of free cells, on the current thread's heap">CountAllocCells()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aDying%28%29" title="Thread called by the Kernel when any thread is terminated, panicked, aborted etc">Dying()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aExit%28%29" title="Terminates the current thread, specifying a reason">Exit()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aFold%28%29" title="Folds the character according to a specified folding method">Fold()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aFree%28%29" title="Frees a specified cell and returns it to the current thread's heap">Free()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aFreeLogicalDevice%28%29" title="Frees the logical device driver DLL associated with a specified driver name">FreeLogicalDevice()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aFreePhysicalDevice%28%29" title="Frees the physical device driver DLL associated with a specified driver name">FreePhysicalDevice()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aFreeZ%28%29" title="Frees a specified cell, returns it to the current thread's heap, and resets the pointer to NULL">FreeZ()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aHandleException%28%29" title="Enables the current thread to handle an exception of type TExcType">HandleException()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aHeap%28%29" title="Returns a reference to the handle to the current thread's heap">Heap()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aInactivityTime%28%29" title="Returns the time since the last user activity">InactivityTime()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aInfoPrint%28%29" title="Invokes the notify server to display a text message on the screen for a short time">InfoPrint()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aInvariant%28%29" title="Panics the current thread with a USER 0 panic">Invariant()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aIsRomAddress%28%29" title="Tests whether a specified address is in the ROM">IsRomAddress()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aJustInTime%28%29" title="Tests whether just-in-time debugging is on or off">JustInTime()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aLanguage%28%29" title="Returns the language of the current locale">Language()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aLeave%28%29" title="Leaves the currently executing function, unwinds the call stack, and returns from the most recently entered trap harness">Leave()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aLeaveIfError%28%29" title="Leaves or returns with a specified reason code">LeaveIfError()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aLeaveIfNull%28%29" title="Leaves with the reason code KErrNoMemory, if the specified pointer is NULL">LeaveIfNull()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aLeaveNoMemory%28%29" title="Leaves with the specific reason code KErrNoMemory">LeaveNoMemory()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aLoadLogicalDevice%28%29" title="Loads the logical device driver (LDD) DLL with the specified filename">LoadLogicalDevice()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aLoadPhysicalDevice%28%29" title="Loads the physical device driver (PDD) DLL with the specified filename">LoadPhysicalDevice()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aLockPeriod%28%29" title="Returns which of the periods the clock is currently in">LockPeriod()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aLockedDec%28%29" title="Decrements a TInt value by 1 when the current thread is locked">LockedDec()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aLockedInc%28%29" title="Increments a TInt value by 1 when the current thread is locked">LockedInc()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aLowerCase%28%29" title="Converts the specified character to lower case">LowerCase()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aPanic%28%29" title="Panics the current thread, specifying a category name and panic number">Panic()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aQueryVersionSupported%28%29" title="Compares two version objects and returns a true if the test version is less than the current version">QueryVersionSupported()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aQuickSort%28%29" title="Quick sorts array elements">QuickSort()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aReAlloc%28%29" title="Increases or decreases the size of an existing cell">ReAlloc()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aReAllocL%28%29" title="Increases or decreases the size of an existing cell and leaves if there is insufficient memory available in the heap from which to reallocate the cell to the required size">ReAllocL()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aRequestComplete%28%29" title="Signals the current thread that the asynchronous request associated with the specified request status object is complete">RequestComplete()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aResetInactivityTime%28%29" title="Resets all user inactivity timers">ResetInactivityTime()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aSetCurrencySymbol%28%29" title="Sets the system wide currency symbol">SetCurrencySymbol()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aSetHomeTime%28%29" title="Sets the machine's home time to a specified time value">SetHomeTime()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aSetJustInTime%28%29" title="Sets just-in-time debugging on or off">SetJustInTime()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aSetTrapHandler%28%29" title="Sets the current thread's trap handler and returns a pointer to any pre-existing trap handler">SetTrapHandler()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aStringLength%28%29" title="Gets the length of a C style, null terminated, string of double-byte valued characters">StringLength()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aSwitchHeap%28%29" title="Changes the current thread's heap">SwitchHeap()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aTickCount%28%29" title="Returns the machine's current tick count">TickCount()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aTitleCase%28%29" title="Converts a specified character to its title case version">TitleCase()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aTrapHandler%28%29" title="Gets a pointer to the current thread's trap handler">TrapHandler()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aUpperCase%28%29" title="Converts a specified character to upper case">UpperCase()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aValidateName%28%29" title="Checks whether a specified name is a valid CObject name">ValidateName()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aVersion%28%29" title="Gets the version of the operating system">Version()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aWaitForAnyRequest%28%29" title="Waits for any asynchronous request to complete">WaitForAnyRequest()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3aWaitForRequest%28%29" title="Waits for either of two specific asynchronous requests to complete">WaitForRequest()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3a__DbgMarkCheck%28%29" title="Checks the current number of allocated heap cells for the current thread's heap">__DbgMarkCheck()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3a__DbgMarkEnd%28%29" title="Marks the end of heap cell checking at the current nested level for the current thread's heap">__DbgMarkEnd()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3a__DbgMarkStart%28%29" title="Marks the start of heap cell checking for the current thread's heap">__DbgMarkStart()</a></code>, <code class="ApiItem"><a href="UserClass.html#%3a%3aUser%3a%3a__DbgSetAllocFail%28%29" title="Simulates a heap allocation failure for the current thread's heap">__DbgSetAllocFail()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../MemoryAllocation/UserHeapClass.html#%3a%3aUserHeap" title="A set of static functions for constructing fixed length heaps and local or global heaps">UserHeap</a></code>:
<br><code class="ApiItem"><a href="../MemoryAllocation/UserHeapClass.html#%3a%3aUserHeap%3a%3aChunkHeap%28%29" title="Creates a heap in a local or global chunk">ChunkHeap()</a></code>,
<code class="ApiItem"><a href="../MemoryAllocation/UserHeapClass.html#%3a%3aUserHeap%3a%3aFixedHeap%28%29" title="Creates a fixed length heap at a specified location">FixedHeap()</a></code></p>
<a name="2.6"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Address information</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aIsRomAddress%28%29"></a>
<hr size="1" noshade>
<h3><code>IsRomAddress()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt IsRomAddress(TBool&amp; aBool,TAny* aPtr);</code></p><h4 class="subheading">Description</h4>
<p>Tests whether a specified address is in the ROM.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TBool&amp; aBool</code></td>
<td class="Cell"><p class="ValueDesc">True, if the address provided by <code>aPtr</code> is within
the ROM. False, otherwise.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">The address to be tested.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">Always <code>KErrNone</code>.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Algorithms</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aBinarySearch%28%29"></a>
<hr size="1" noshade>
<h3><code>BinarySearch()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt BinarySearch(TInt aCount,const TKey&amp; aKey,TInt&amp; aPos);</code></p><h4 class="subheading">Description</h4>
<p>Performs a binary search for an array element containing a
specified key. It can be used on any kind of array where elements can be
identified by key. It is used by those standard EPOC arrays having
<code>CArrayFix</code>, <code>CArrayVar</code> or <code>CArrayPak</code> in
their class hierarchy in the implementation of the various functions for
inserting, deleting and finding elements by key. The function can be used by
other arrays. </p>
<p>The function returns a zero value if the search is successful
and a non-zero value otherwise.</p>
<p>If the search is successful, the function puts the position
(i.e. the index) of the element into <code>aPos</code>. If the search is
unsuccessful, then the function puts into <code>aPos</code> the position of the
first element in the array whose key is greater than the search key.</p>
<p>If the array is empty, i.e. <code>aCount</code> is zero, then
the search is unsuccessful and <code>aPos</code> is not defined.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aCount</code></td>
<td class="Cell"><p class="ValueDesc">The number of elements in the array. If this value is negative,
the function raises a USER 97 panic.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const
TKey&amp; aKey</code></td>
<td class="Cell"><p class="ValueDesc">A reference to a suitably initialised <code>TKey</code> derived
object. In particular, the object will have been initialised with a pointer to
a sample element containing the search key.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt&amp; aPos</code></td>
<td class="Cell"><p class="ValueDesc">If the element is found, the reference is set to the position
of that element within the array. The position is relative to zero, (i.e. the
first element in the array is at position 0). If the element is not found and
the array is not empty, then the reference is set to the position of the first
element in the array with a key which is greater than the search key. If the
element is not found and the array is empty, then the reference is
undefined.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">Zero, if the element with the specified key is found. Non-zero,
if the element with the specified key is not found.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aQuickSort%28%29"></a>
<hr size="1" noshade>
<h3><code>QuickSort()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt QuickSort(TInt aCount,const TKey&amp; aKey,const TSwap&amp; aSwap);</code></p><h4 class="subheading">Description</h4>
<p>Quick sorts array elements. It is used by those standard EPOC
arrays having <code>CArrayFixBase</code>, <code>CArrayVarBase</code> or
<code>CArrayPakBase</code> in their class hierarchy in the implementation of
their sort functions. The function can be used by other arrays. </p>
<p>The function returns <code>KErrNone</code> if the operation is
successful otherwise it returns <code>KErrGeneral</code>.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aCount</code></td>
<td class="Cell"><p class="ValueDesc">The number of elements in the array. If this value is negative,
the function raises a USER 96 panic.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const
TKey&amp; aKey</code></td>
<td class="Cell"><p class="ValueDesc">A reference to a suitably initialised <code>TKey</code> derived
object.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const
TSwap&amp; aSwap</code></td>
<td class="Cell"><p class="ValueDesc">A reference to a suitably initialised <code>TSwap</code>
derived object.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if the operation is successful;
<code>KErrGeneral</code> otherwise.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Asynchronous service support</h2>
</div><div class="Bodytext">
<a name="2.8.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aWaitForAnyRequest%28%29"></a>
<hr size="1" noshade>
<h3><code>WaitForAnyRequest()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void WaitForAnyRequest();</code></p><h4 class="subheading">Description</h4>
<p>Waits for any asynchronous request to complete. The current
thread waits on its request semaphore.</p>
<p>The function completes and control returns to the caller when
the current thread's request semaphore is signalled by any of the service
providers which handle these asynchronous requests.</p>
<p>The request status of all outstanding asynchronous requests
must be examined to determine which request is complete.</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../AsynchronousServices/TRequestStatusClass.html#%3a%3aTRequestStatus" title="Indicates the completion status of a request made to a service provider"><code class="ApiItem">TRequestStatus</code></a></li>
</ul>
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aWaitForRequest%28%29"></a>
<hr size="1" noshade>
<h3><code>WaitForRequest()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void WaitForRequest(TRequestStatus&amp; aStatus);</code></p><h4 class="subheading">Description</h4>
<p>Waits for a specific asynchronous request to complete. The
current thread waits on its request semaphore.</p>
<p>The function completes and control returns to the caller when
the current thread's request semaphore is signalled by the service provider
handling the request associated with <code>aStatus</code>. Before signalling,
the service provider sets an appropriate value in <code>aStatus</code>&#0160;&#8212;
other than <code>KRequestPending</code>.</p>
<p>Note:</p>
<ul>
<li>
<p>If other asynchronous requests complete before the one
associated with <code>aStatus</code>, the request semaphore is adjusted so that
knowledge of their completion is not lost. In this a case, a subsequent call to
<code>User::WaitForAnyRequest()</code> or <code>User::WaitForRequest()</code>
will complete and return immediately.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TRequestStatus&amp; aStatus</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the request status object associated with the
specific asynchronous request.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.4"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aWaitForRequest%28%29"></a>
<hr size="1" noshade>
<h3><code>WaitForRequest()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void WaitForRequest(TRequestStatus&amp; aStatus1,TRequestStatus&amp; aStatus2);</code></p><h4 class="subheading">Description</h4>
<p>Waits for either of two specific asynchronous requests to
complete. The current thread waits on its request semaphore.</p>
<p>The function completes and control returns to the caller when
the current thread's request semaphore is signalled by either the service
provider handling the request associated with <code>aStatus1</code> or the
service provider handling the request associated with <code>aStatus2</code>.
Before signalling, the completing service provider sets an appropriate value in
the status object&#0160;&#8212;  other than <code>KRequestPending</code>.</p>
<p>Note:</p>
<ul>
<li>
<p>If other asynchronous requests complete before the ones
associated with <code>aStatus1</code> and <code>aStatus2</code>, the request
semaphore is adjusted so that knowledge of their completion is not lost. In
this a case, a subsequent call to <code>User::WaitForAnyRequest()</code> or
<code>User::WaitForRequest()</code> will complete and return
immediately.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TRequestStatus&amp; aStatus1</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the request status object associated with the
first specific asynchronous request.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TRequestStatus&amp; aStatus2</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the request status object associated with the
second specific asynchronous request.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.5"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aRequestComplete%28%29"></a>
<hr size="1" noshade>
<h3><code>RequestComplete()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void RequestComplete(TRequestStatus*&amp; aStatus,TInt aReason);</code></p><h4 class="subheading">Description</h4>
<p>Signals the current thread that the asynchronous request
associated with the specified request status object is complete.</p>
<p>This function is used to complete an asynchronous request
originating in the same thread as the code that is currently executing. If a
request originates in another thread, then executing code must use
<code>RThread::RequestComplete()</code> to signal the completion of that
request.</p>
<p>The request is completed with the completion code passed in
<code>aReason</code>. This value is copied into the request
status&nbsp;&#8212; pointed to by <code>aStatus</code>&nbsp;&#8212;
before signalling the current thread's request semaphore.</p>
<p>The meaning of the completion code passed in
<code>aReason</code> is a matter of convention to be decided between the
service requester and the service provider.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TRequestStatus*&amp; aStatus</code></td>
<td class="Cell"><p class="ValueDesc">A reference to a pointer to the request status object. This is
a pointer into the current thread's address space. On return, the pointer to
the request status is set to NULL.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aReason</code></td>
<td class="Cell"><p class="ValueDesc">The completion code of this request.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Notes:</h4>
<ul>
<li><note>Setting the pointer to the request status
object to NULL is a convenience, not all servers need it.</note></li>
<li><note>The
setting of the pointer to the request status object to NULL is done before the
function returns.</note></li>
</ul>
<a name="2.9"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Beep</h2>
</div><div class="Bodytext">
<a name="2.9.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aBeep%28%29"></a>
<hr size="1" noshade>
<h3><code>Beep()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt Beep(TInt aFrequency,TTimeIntervalMicroSeconds32 aDuration);</code></p><h4 class="subheading">Description</h4>
<p>Makes a beep tone with a specified frequency and duration. The
duration of the beep can be supplied as a positive or a negative value.</p>
<p>If the duration is passed as a positive value:</p>
<ul>
<li>
<p>the calling thread waits, if the hardware responsible for
producing the sound is busy.</p>
</li>
<li>
<p>the function completes immediately, if the hardware
responsible for producing the sound is free; in this case the sound continues
in background and the hardware producing it is busy until the operation
completes.</p>
</li>
</ul>
<p>If the duration is passed as a negative value, the function
completes immediately, whether or not the hardware responsible for producing
the sound is busy. If the hardware is busy, no sound is produced.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aFrequency</code></td>
<td class="Cell"><p class="ValueDesc">The frequency at which the beep is to be sounded
(hertz).</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TTimeIntervalMicroSeconds32
aDuration</code></td>
<td class="Cell"><p class="ValueDesc">The duration for which the beep is to be sounded
(microseconds). This value may be positive or negative.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrAccessDenied</code>, if sound production is disabled.
<code>KErrGeneral</code>, if the caller has supplied a negative value and the
hardware is busy. <code>KErrNone</code> otherwise.</p></td>
</tr>
</table></td></tr></table>
<a name="2.10"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Cleanup support</h2>
</div><div class="Bodytext">
<a name="2.10.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aLeave%28%29"></a>
<hr size="1" noshade>
<h3><code>Leave()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void Leave(TInt aReason);</code></p><h4 class="subheading">Description</h4>
<p>Leaves the currently executing function, unwinds the call
stack, and returns from the most recently entered trap harness.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aReason</code></td>
<td class="Cell"><p class="ValueDesc">The value returned from the most recent call to
<code>TRAP</code> or <code>TRAPD</code>. This is known as the reason code and,
typically, it gives the reason for the environment or user error causing this
leave to occur.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../CleanupSupport/TRAPMacro.html#TRAP" title="Executes the set of C++ statements _s under a trap harness -- use this macro as a C++ statement"><code class="ApiItem">TRAP</code></a></li>
<li><a href="../CleanupSupport/TRAPDMacro.html#TRAPD" title="Use this macro in the same way as you would TRAP, except that the variable _r is defined as part of the macro (and is therefore valid for the rest of the block in which the macro occurs)"><code class="ApiItem">TRAPD</code></a></li>
</ul>
<a name="2.10.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aLeaveNoMemory%28%29"></a>
<hr size="1" noshade>
<h3><code>LeaveNoMemory()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void LeaveNoMemory();</code></p><h4 class="subheading">Description</h4>
<p>Leaves with the specific reason code
<code>KErrNoMemory</code>.</p>
<a name="2.10.4"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aLeaveIfError%28%29"></a>
<hr size="1" noshade>
<h3><code>LeaveIfError()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt LeaveIfError(TInt aReason);</code></p><h4 class="subheading">Description</h4>
<p>Leaves or returns with a specified reason code.</p>
<p>If the reason code is negative the function leaves, and the
reason code is returned through the trap harness.</p>
<p>If the reason code is zero or positive, the function simply
returns with the reason value.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aReason</code></td>
<td class="Cell"><p class="ValueDesc">The reason code.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">If the function returns, the reason code which is either zero
or positive.</p></td>
</tr>
</table></td></tr></table>
<a name="2.10.5"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aLeaveIfNull%28%29"></a>
<hr size="1" noshade>
<h3><code>LeaveIfNull()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TAny* LeaveIfNull(TAny* aPtr);</code></p><h4 class="subheading">Description</h4>
<p>Leaves with the reason code <code>KErrNoMemory</code>, if the
specified pointer is <code>NULL</code>. If the pointer is not
<code>NULL</code>, the function simply returns with the value of the
pointer.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">The pointer to be tested.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">If the function returns, the value of <code>aPtr</code>.</p></td>
</tr>
</table></td></tr></table>
<a name="2.10.6"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aSetTrapHandler%28%29"></a>
<hr size="1" noshade>
<h3><code>SetTrapHandler()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TTrapHandler* SetTrapHandler(TTrapHandler* aHandler);</code></p><h4 class="subheading">Description</h4>
<p>Sets the current thread's trap handler and returns a pointer to
any pre-existing trap handler. Pass a <code>NULL</code> pointer to this
function to clear the trap handler.</p>
<p>The trap handler works with the <code>TRAP</code> mechanism to
handle the effects of a leave.</p>
<p>Note:</p>
<ul>
<li>
<p><code>TTrapHandler</code> is an abstract base class; a trap
handler must be implemented as a derived class.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TTrapHandler* aHandler</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the trap handler which is to be installed as the
current thread's trap handler.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TTrapHandler*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the current thread's pre-existing trap handler, if
any. <code>NULL</code>, if no pre-existing trap handler is set.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../CleanupSupport/TRAPMacro.html#TRAP" title="Executes the set of C++ statements _s under a trap harness -- use this macro as a C++ statement"><code class="ApiItem">TRAP</code></a></li>
<li><a href="../CleanupSupport/TRAPDMacro.html#TRAPD" title="Use this macro in the same way as you would TRAP, except that the variable _r is defined as part of the macro (and is therefore valid for the rest of the block in which the macro occurs)"><code class="ApiItem">TRAPD</code></a></li>
</ul>
<a name="2.10.7"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aTrapHandler%28%29"></a>
<hr size="1" noshade>
<h3><code>TrapHandler()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TTrapHandler* TrapHandler();</code></p><h4 class="subheading">Description</h4>
<p>Gets a pointer to the current thread's trap handler.</p>
<p>Note:</p>
<ul>
<li>
<p><code>TTrapHandler</code> is an abstract base class; a trap
handler must be implemented as a derived class.</p>
</li>
</ul>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TTrapHandler*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the current thread's trap handler, if any.
<code>NULL</code>, if no pre-existing trap handler is set.</p></td>
</tr>
</table></td></tr></table>
<a name="2.11"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Cobject name validation</h2>
</div><div class="Bodytext">
<a name="2.11.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aValidateName%28%29"></a>
<hr size="1" noshade>
<h3><code>ValidateName()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt ValidateName(const TDesC&amp; aName);</code></p><h4 class="subheading">Description</h4>
<p>Checks whether a specified name is a valid <code>CObject</code>
name. A name is deemed to be invalid, if it contains any of the characters:
&quot;*&quot;, &quot;?&quot;, &quot;:&quot; i.e. the characters: asterisk, question mark and single
colon.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the descriptor containing the name to be
checked.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrBadName</code>, if the name is invalid.
<code>KErrNone</code>, otherwise.</p></td>
</tr>
</table></td></tr></table>
<a name="2.12"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>C-style string length</h2>
</div><div class="Bodytext">
<a name="2.12.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aStringLength%28%29"></a>
<hr size="1" noshade>
<h3><code>StringLength()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt StringLength(const TUint8* aString);</code></p><h4 class="subheading">Description</h4>
<p>Gets the length of a C style, null terminated, string of
single-byte valued characters. The length does not include the null
terminator.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TUint8* aString</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the single byte valued, null terminated,
string.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The length of the string.</p></td>
</tr>
</table></td></tr></table>
<a name="2.12.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aStringLength%28%29"></a>
<hr size="1" noshade>
<h3><code>StringLength()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt StringLength(const TUint16* aString);</code></p><h4 class="subheading">Description</h4>
<p>Gets the length of a C style, null terminated, string of
double-byte valued characters. The length does not include the null
terminator.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TUint16* aString</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the double-byte valued, null terminated,
string.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The length of the string.</p></td>
</tr>
</table></td></tr></table>
<a name="2.13"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Debugging support</h2>
</div><div class="Bodytext">
<a name="2.13.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aSetJustInTime%28%29"></a>
<hr size="1" noshade>
<h3><code>SetJustInTime()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void SetJustInTime(const TBool aBoolean);</code></p><h4 class="subheading">Description</h4>
<p>Sets just-in-time debugging on or off. While the function can
be called by code running on both the Emulator and ARM platforms, it only has
an effect on the Emulator. The function applies to the whole machine. Turning
just-in-time debugging off prevents the debug Emulator closing down when a
panic occurs.</p>
<p>By default, just-in-time debugging is on.</p>
<p>Note that the emulator handles panics in the nomal manner, i.e.
by killing the thread.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TBool
aBoolean</code></td>
<td class="Cell"><p class="ValueDesc"><code>ETrue</code>, if just-in-time debugging is to be set on.
<code>EFalse</code>, if just-in-time debugging is to be set off. EFalse causes
<code>_asm 3</code> calls to be disabled.</p></td>
</tr>
</table></td></tr></table>
<a name="2.13.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aJustInTime%28%29"></a>
<hr size="1" noshade>
<h3><code>JustInTime()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TBool JustInTime();</code></p><h4 class="subheading">Description</h4>
<p>Tests whether just-in-time debugging is on or off. The function
is used by the Kernel, on the EPOC Emulator, to decide whether to do
just-in-time debugging for panics. The function applies to the whole
machine.</p>
<p>Unless overridden by calling
<code>User::SetJustInTime(EFalse)</code>, just-in-time debugging is on by
default.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TBool</code></td>
<td class="Cell"><p class="ValueDesc">True, if just-in-time debugging is on. False otherwise.</p></td>
</tr>
</table></td></tr></table>
<a name="2.13.4"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aCheck%28%29"></a>
<hr size="1" noshade>
<h3><code>Check()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void Check();</code></p><h4 class="subheading">Description</h4>
<p>Checks the validity of the current thread's heap. The function
walks through the list of allocated cells and the list of free cells checking
that the heap is consistent and complete.</p>
<p>If any corruption is found, the function raises either a USER
48 or a USER 49 panic.</p>
<a name="2.13.5"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aInvariant%28%29"></a>
<hr size="1" noshade>
<h3><code>Invariant()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void Invariant();</code></p><h4 class="subheading">Description</h4>
<p>Panics the current thread with a USER 0 panic. Typically, this
is called when a test for a class invariant fails, i.e. when a test which
checks that the internal data of an object is self-consistent, fails.</p>
<p>Such tests are almost always done in debug builds, commonly
using the <code>__ASSERT_DEBUG</code> macro.</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="UsingUser.guide.html#SystemStaticFunctions%2eUsingUser">Using User</a></li>
</ul>
<a name="2.14"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Device management</h2>
</div><div class="Bodytext">
<a name="2.14.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aFreeLogicalDevice%28%29"></a>
<hr size="1" noshade>
<h3><code>FreeLogicalDevice()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt FreeLogicalDevice(const TDesC&amp; aDeviceName);</code></p><h4 class="subheading">Description</h4>
<p>Frees the logical device driver DLL associated with a specified
driver name.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TDesC&amp; aDeviceName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the logical device driver object. This must match the name set during installation of the logical device. Typically, this is done in an  implementation of <code class="ApiItem">DLogicalDevice::Install()</code> through a call to  <code>SetName()</code>. Note that  the name  is rarely the same as the device's filename.
The name of a logical device driver object can be discovered by  using <code class="ApiItem">TFindLogicalDevice</code>.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful or one of the system-wide
error codes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aSetName%28%29" title="Sets or clears this reference counting object's name"><code class="ApiItem">CObject::SetName()</code></a></li>
</ul>
<a name="2.14.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aFreePhysicalDevice%28%29"></a>
<hr size="1" noshade>
<h3><code>FreePhysicalDevice()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt FreePhysicalDevice(const TDesC&amp; aDriverName);</code></p><h4 class="subheading">Description</h4>
<p>Frees the physical device driver DLL associated with a
specified driver name.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TDesC&amp; aDriverName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the physical device driver object. This must match the name set during installation of the physical  device. Typically, this is done in an  implementation of <code class="ApiItem">DPhysicalDevice::Install()</code> through a call to  <code>SetName()</code>. Note that the name  is rarely the same as the device's filename.
The name of a physical device driver object can be discovered by  using <code class="ApiItem">TFindPhysicalDevice</code>.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful or one of the system-wide
error codes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../ReferenceCountingObjects/CObjectClass.html#%3a%3aCObject%3a%3aSetName%28%29" title="Sets or clears this reference counting object's name"><code class="ApiItem">CObject::SetName()</code></a></li>
</ul>
<a name="2.14.4"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aLoadLogicalDevice%28%29"></a>
<hr size="1" noshade>
<h3><code>LoadLogicalDevice()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt LoadLogicalDevice(const TDesC&amp; aFileName);</code></p><h4 class="subheading">Description</h4>
<p>Loads the logical device driver (LDD) DLL with the specified
filename.</p>
<p>The function searches the system path for the LDD DLL, and
loads it. It then makes a Kernel server call that:</p>
<ul>
<li>
<p>creates the LDD factory object, an instance of a
<code class="ApiItem">DLogicalDevice</code>
derived class; this involves checking the first UID value to
make sure that the DLL is a valid LDD before proceeding to call the exported
function at ordinal 1, which creates the LDD factory object on the Kernel
heap</p>
</li>
<li>
<p>calls the LDD factory object's <code>Install()</code>
function to complete the installation</p>
</li>
<li>
<p>adds the new LDD factory object to the Kernel's list of LDD
factory objects.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TDesC&amp; aFileName</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the descriptor containing the name of the
physical device driver DLL. If the filename has no extension, .LDD is assumed
by default.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful or one of the system-wide
error codes.</p></td>
</tr>
</table></td></tr></table>
<a name="2.14.5"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aLoadPhysicalDevice%28%29"></a>
<hr size="1" noshade>
<h3><code>LoadPhysicalDevice()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt LoadPhysicalDevice(const TDesC&amp; aFileName);</code></p><h4 class="subheading">Description</h4>
<p>Loads the physical device driver (PDD) DLL with the specified
filename.</p>
<p>The function searches the system path for the PDD DLL, and
loads it. It then makes a Kernel server call that:</p>
<ul>
<li>
<p>creates the PDD factory object, an instance of a
<code class="ApiItem">DPhysicalDevice</code>
derived class; this involves checking the first UID value to
make sure that the DLL is a valid PDD before proceeding to call the exported
function at ordinal 1, which creates the PDD factory object on the Kernel
heap</p>
</li>
<li>
<p> calls the PDD factory object's <code>Install()</code>
function to complete the installation</p>
</li>
<li>
<p> adds the new PDD factory object to the Kernel's list of
PDD factory objects.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TDesC&amp; aFileName</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the descriptor containing the name of the
physical device driver DLL. If the filename has no extension, .PDD is assumed
by default.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful or one of the system-wide
error codes.</p></td>
</tr>
</table></td></tr></table>
<a name="2.15"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Execution control</h2>
</div><div class="Bodytext">
<a name="2.15.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aAbort%28%29"></a>
<hr size="1" noshade>
<h3><code>Abort()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void Abort();</code></p><h4 class="subheading">Support</h4>
<p>Withdrawn in 6.0
</p><h4 class="subheading">Description</h4>
<p>Raises an exception of type <code>TExcType::EExcAbort</code> on
the current thread.</p>
<p>If the thread has an exception handler for this exception type,
it is called to handle the exception, otherwise a USER-EXEC 3 panic is
raised.</p>
<a name="2.15.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aDying%28%29"></a>
<hr size="1" noshade>
<h3><code>Dying()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void Dying();</code></p><h4 class="subheading">Support</h4>
<p>Withdrawn in 6.0
</p><h4 class="subheading">Description</h4>
<p>Thread called by the Kernel when any thread is terminated,
panicked, aborted etc. For this reason, it is a good place for setting a
breakpoint when debugging. The function has an empty implementation.</p>
<a name="2.15.4"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aExit%28%29"></a>
<hr size="1" noshade>
<h3><code>Exit()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void Exit(TInt aReason);</code></p><h4 class="subheading">Description</h4>
<p>Terminates the current thread, specifying a reason. All child
threads are terminated and all resources are cleaned up.</p>
<p>If the current thread is the main thread in a process, the
process is also terminated.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aReason</code></td>
<td class="Cell"><p class="ValueDesc">The reason code.</p></td>
</tr>
</table></td></tr></table>
<a name="2.15.5"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aPanic%28%29"></a>
<hr size="1" noshade>
<h3><code>Panic()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void Panic(const TDesC&amp; aCategory,TInt aReason);</code></p><h4 class="subheading">Description</h4>
<p>Panics the current thread, specifying a category name and panic
number.</p>
<p>Keep the length of the category name small; a length of 16 is
ideal.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TDesC&amp; aCategory</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the descriptor containing the text which defines
the category for this panic.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aReason</code></td>
<td class="Cell"><p class="ValueDesc">The panic number.</p></td>
</tr>
</table></td></tr></table>
<a name="2.15.6"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aHandleException%28%29"></a>
<hr size="1" noshade>
<h3><code>HandleException()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void HandleException(TExceptionHandler* aHandler, TExcType anException);</code></p><h4 class="subheading">Description</h4>
<p>Enables the current thread to handle an exception of type
<code>TExcType</code>.</p>
<p>The function is called by:</p>
<ul>
<li>
<p>the <code>RaiseException()</code> member function of
<code>RThread</code>.</p>
</li>
<li>
<p>the Kernel, if an exception occurs and the current thread
has an exception handler for the specific type of exception.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TExceptionHandler* aHandler</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the exception handler function.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TExcType
anException</code></td>
<td class="Cell"><p class="ValueDesc">The type of exception for which the exception handler is
called.</p></td>
</tr>
</table></td></tr></table>
<a name="2.16"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Heap debugging support</h2>
</div><div class="Bodytext">
<a name="2.16.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3a__DbgMarkStart%28%29"></a>
<hr size="1" noshade>
<h3><code>__DbgMarkStart()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void __DbgMarkStart(RHeap::TDbgHeapType aHeapType);</code></p><h4 class="subheading">Description</h4>
<p>Marks the start of heap cell checking for the current thread's
heap.</p>
<p>If earlier calls to <code>__DbgMarkStart()</code> have been
made, then this call to <code>__DbgMarkStart()</code> marks the start of a new
nested level of heap cell checking.</p>
<p>Every call to <code>__DbgMarkStart()</code> should be matched
by a later call to <code>__DbgMarkEnd()</code> to verify that the number of
heap cells allocated, at the current nested level, is as expected. This
expected number of heap cells is passed to <code>__DbgMarkEnd()</code> as a
parameter; however, the most common expected number is zero, reflecting the
fact that most developers check that all memory allocated since a previous call
to <code>__DbgStartCheck()</code> has been freed.</p>
<p>Notes:</p>
<ul>
<li>
<p>This function can be called explicitly, or generated using
the corresponding macros <code>__UHEAP_MARK</code> or
<code>__KHEAP_MARK</code>. Using the macros has the advantage that the function
call is only generated for debug builds. </p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RHeap::TDbgHeapType
aHeapType</code></td>
<td class="Cell"><p class="ValueDesc">An enumeration which indicates the type of heap for which
checking is to be done.</p></td>
</tr>
</table></td></tr></table>
<a name="2.16.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3a__DbgMarkEnd%28%29"></a>
<hr size="1" noshade>
<h3><code>__DbgMarkEnd()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TUint32 __DbgMarkEnd(RHeap::TDbgHeapType aHeapType,TInt aCount);</code></p><h4 class="subheading">Description</h4>
<p>Marks the end of heap cell checking at the current nested level
for the current thread's heap. The function checks that the number of heap
cells allocated, at the current nested level, is <code>aCount</code>. The most
common value for <code>aCount</code> is zero, reflecting the fact that most
developers check that all memory allocated since a previous call to
<code>__DbgStartCheck()</code> has been freed.</p>
<p>A call to this function should match an earlier call to
<code>__DbgMarkStart()</code>. If there are more calls to this function than
calls to <code>__DbgMarkStart()</code>, then this function raises a USER 51
panic.</p>
<p>If the check fails for a user heap, the function raises an
<code>ALLOC: nnnnnnnn</code> panic, where <code>nnnnnnnn</code> is a
hexadecimal pointer to the first orphaned heap cell.</p>
<p>If the check fails for the Kernel heap, the Kernel server
raises a KERN-SVR 17 panic.</p>
<p>Notes:</p>
<ul>
<li>
<p>This function can be called explicitly, or generated using
the corresponding macros <code>__UHEAP_MARKEND</code>,
<code>__UHEAP_MARKENDC</code>, <code>__KHEAP_MARK</code>, or
<code>__KHEAP_MARKC</code>. Using the macros has the advantage that the
function call is only generated for debug builds.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RHeap::TDbgHeapType
aHeapType</code></td>
<td class="Cell"><p class="ValueDesc">An enumeration which indicates the type of heap for which
checking is to be done.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aCount</code></td>
<td class="Cell"><p class="ValueDesc">The number of allocated heap cells expected.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint32</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the first orphaned heap cell, if verification
fails; zero otherwise.</p></td>
</tr>
</table></td></tr></table>
<a name="2.16.4"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3a__DbgMarkCheck%28%29"></a>
<hr size="1" noshade>
<h3><code>__DbgMarkCheck()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void __DbgMarkCheck(RHeap::TDbgHeapType aHeapType,TBool aCountAll,TInt aCount,const TDesC8&amp; aFileName,TInt aLineNum);</code></p><h4 class="subheading">Description</h4>
<p>Checks the current number of allocated heap cells for the
current thread's heap. If <code>aCountAll</code> is true, the function checks
that the total number of allocated cells on the heap is the same as
<code>aCount</code>. If <code>aCountAll</code> is false, the function checks
that the number of allocated cells at the current nested level is the same as
<code>aCount</code>.</p>
<p>If checking fails, the function raises a panic. Information
about the failure is put into the panic category, which takes the form:</p>
<p><code>ALLOC COUNT\rExpected aaa\rAllocated bbb\rLn: ccc
ddd</code></p>
<p>Where <code>aaa</code> is the value <code>aCount</code>,
<code>bbb</code> is the number of allocated heap cells, <code>ccc</code> is a
line number, copied from <code>aLineNum</code>, and <code>ddd</code> is a file
name, copied from the descriptor <code>aFileName</code>.</p>
<p>Notes:</p>
<ul>
<li>
<p>The panic number is 1.</p>
</li>
<li>
<p>This function can be called explicitly, or generated using
the corresponding macros <code>__UHEAP_CHECK</code>,
<code>__UHEAP__CHECKALL</code>, <code>__KHEAP_CHECK</code> or
<code>__KHEAP_CHECKALL</code>. Using the macros has the advantage that the
function call is only generated for debug builds.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RHeap::TDbgHeapType
aHeapType</code></td>
<td class="Cell"><p class="ValueDesc">An enumeration which indicates the type of heap for which
checking is to be done.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TBool
aCountAll</code></td>
<td class="Cell"><p class="ValueDesc">If true, the function checks that the total number of allocated
cells on the heap is the same as <code>aCount</code>. If false, the function
checks that the number of allocated cells at the current nested level is the
same as <code>aCount</code>.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aCount</code></td>
<td class="Cell"><p class="ValueDesc">The expected number of allocated cells.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const
TDesC8&amp; aFileName</code></td>
<td class="Cell"><p class="ValueDesc">A filename; this is displayed as part of the panic category, if
the check fails.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aLineNum</code></td>
<td class="Cell"><p class="ValueDesc">A line number; this is displayed as part of the panic category,
if the check fails.</p></td>
</tr>
</table></td></tr></table>
<a name="2.16.5"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3a__DbgSetAllocFail%28%29"></a>
<hr size="1" noshade>
<h3><code>__DbgSetAllocFail()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void __DbgSetAllocFail(RHeap::TDbgHeapType aHeapType,RHeap::TAllocFail aType,TInt aRate);</code></p><h4 class="subheading">Description</h4>
<p>Simulates a heap allocation failure for the current thread's
heap. The failure occurs on subsequent calls to <code>new</code> or any of the
functions which allocate memory from the heap.</p>
<p>The timing of the allocation failure depends on the type of
allocation failure requested, i.e. on the value of <code>aType</code>.</p>
<p>The simulation of heap allocation failure is cancelled if
<code>aType</code> is given the value <code>RHeap::ENone</code>.</p>
<p>Notes:</p>
<ul>
<li>
<p>If the failure type is <code>RHeap::EFailNext</code>, the
next attempt to allocate from the heap fails; however, no further failures will
occur.</p>
</li>
<li>
<p>For failure types <code>RHeap::EFailNext</code> and
<code>RHeap::ENone</code>, set <code>aRate</code> to 1.</p>
</li>
<li>
<p>This function can be called explicitly, or generated using
the corresponding macros <code>__UHEAP_SETFAIL</code>,
<code>__UHEAP_FAILNEXT</code>, <code>__UHEAP_RESET</code>,
<code>__KHEAP_SETFAIL</code>, <code>__KHEAP_FAILNEXT</code>, or
<code>__KHEAP_RESET</code>. Using the macros has the advantage that the
function call is only generated for debug builds.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RHeap::TDbgHeapType
aHeapType</code></td>
<td class="Cell"><p class="ValueDesc">An enumeration which indicates the type of heap for which
checking is to be done.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">RHeap::TAllocFail
aType</code></td>
<td class="Cell"><p class="ValueDesc">An enumeration which indicates how to simulate heap allocation
failure.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aRate</code></td>
<td class="Cell"><p class="ValueDesc">The rate of failure; when <code>aType</code> is
<code>RHeap::EDeterministic</code>, heap allocation fails every
<code>aRate</code> attempt</p></td>
</tr>
</table></td></tr></table>
<a name="2.17"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Language-dependent character functions</h2>
</div><div class="Bodytext">
<a name="2.17.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aLanguage%28%29"></a>
<hr size="1" noshade>
<h3><code>Language()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TLanguage Language();</code></p><h4 class="subheading">Description</h4>
<p>Returns the language of the current locale.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TLanguage</code></td>
<td class="Cell"><p class="ValueDesc">A <code>TLanguage</code> enumerator identifying the language of
the current locale.</p></td>
</tr>
</table></td></tr></table>
<a name="2.17.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aCollate%28%29"></a>
<hr size="1" noshade>
<h3><code>Collate()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TUint Collate(TUint aChar);</code></p><h4 class="subheading">Description</h4>
<p>Converts the character to its collated form.</p>
<p>Collating is the process of removing differences between
characters that are deemed unimportant for the purposes of ordering characters.
The result of the conversion depends on the locale and on whether this is a
UNICODE build or not.</p>
<p>Note:</p>
<ul>
<li>
<p>For a non UNICODE build, if the binary value of the
character <code>aChar</code> is greater than or equal to 0x100, then the
character returned is the same as the character passed to the function.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint
aChar</code></td>
<td class="Cell"><p class="ValueDesc">The character to be folded.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint</code></td>
<td class="Cell"><p class="ValueDesc">The converted character.</p></td>
</tr>
</table></td></tr></table>
<a name="2.17.4"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aFold%28%29"></a>
<hr size="1" noshade>
<h3><code>Fold()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TUint Fold(TUint aChar);</code></p><h4 class="subheading">Description</h4>
<p>Folds the specified character. Folding converts the character
to a form which can be used in tolerant comparisons without control over the
operations performed. Tolerant comparisons are those which ignore character
differences like case and accents.</p>
<p>The result of folding a character depends on the locale and on
whether this is a UNICODE build or not.</p>
<p>Note:</p>
<ul>
<li>
<p>For a non UNICODE build, if the binary value of the
character <code>aChar</code> is greater than or equal to 0x100, then the
character returned is the same as the character passed to the function.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint
aChar</code></td>
<td class="Cell"><p class="ValueDesc">The character to be folded.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint</code></td>
<td class="Cell"><p class="ValueDesc">The folded character.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../BasicTypes/TCharClass.html#%3a%3aTChar%3a%3aFold%28%29" title="Converts the character to a form which can be used in tolerant comparisons allowing selection of the specific fold operations to be performed"><code class="ApiItem">TChar::Fold()</code></a></li>
</ul>
<a name="2.17.5"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aFold%28%29"></a>
<hr size="1" noshade>
<h3><code>Fold()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TUint Fold(TUint aChar,TInt aFlags);</code></p><h4 class="subheading">Description</h4>
<p>Folds the character according to a specified folding
method.</p>
<p>In ER5, this function is only defined for UNICODE
builds.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint
aChar</code></td>
<td class="Cell"><p class="ValueDesc">The character to be folded.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aFlags</code></td>
<td class="Cell"><p class="ValueDesc">A set of flags defining the folding method. They
are:<code>TChar::EFoldCase</code>, convert characters to their lower case form
if any <code>TChar::EFoldAccents</code>, strip accents
<code>TChar::EFoldDigits</code>, convert digits representing values 0..9 to
characters '0'..'9' <code>TChar::EFoldSpaces</code>, convert all spaces
(ordinary, fixed-width, ideographic, etc.) to ' '
<code>TChar::EFoldKana</code>, convert hiragana to katakana
<code>TChar::EFoldWidth</code>, fold full width and half width variants to
their standard forms <code>TChar::EFoldAll</code>, use all of the above folding
methods.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint</code></td>
<td class="Cell"><p class="ValueDesc">The folded character.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../BasicTypes/TCharClass.html#%3a%3aTChar%3a%3aFold%28%29" title="Converts the character to a form which can be used in tolerant comparisons allowing selection of the specific fold operations to be performed"><code class="ApiItem">TChar::Fold()</code></a></li>
</ul>
<a name="2.17.6"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aLowerCase%28%29"></a>
<hr size="1" noshade>
<h3><code>LowerCase()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TUint LowerCase(TUint aChar);</code></p><h4 class="subheading">Description</h4>
<p>Converts the specified character to lower case. The result of
the conversion depends on the locale and on whether this is a UNICODE build or
not.</p>
<p>Note:</p>
<ul>
<li>
<p>For a non UNICODE build, if the binary value of the
character <code>aChar</code> is greater than or equal to 0x100, then the
character returned is the same as the character passed to the function.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint
aChar</code></td>
<td class="Cell"><p class="ValueDesc">The character to be converted to lower case.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint</code></td>
<td class="Cell"><p class="ValueDesc">The lower case character.</p></td>
</tr>
</table></td></tr></table>
<a name="2.17.7"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aUpperCase%28%29"></a>
<hr size="1" noshade>
<h3><code>UpperCase()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TUint UpperCase(TUint aChar);</code></p><h4 class="subheading">Description</h4>
<p>Converts a specified character to upper case. The result of the
conversion depends on the locale and on whether this is a UNICODE build or
not.</p>
<p>Note:</p>
<ul>
<li>
<p>For a non UNICODE build, if the binary value of the
character <code>aChar</code> is greater than or equal to 0x100, then the
character returned is the same as the character passed to the function.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint
aChar</code></td>
<td class="Cell"><p class="ValueDesc">The character to be converted to upper case.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint</code></td>
<td class="Cell"><p class="ValueDesc">The upper case character.</p></td>
</tr>
</table></td></tr></table>
<a name="2.17.8"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aTitleCase%28%29"></a>
<hr size="1" noshade>
<h3><code>TitleCase()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TUint TitleCase(TUint aChar);</code></p><h4 class="subheading">Description</h4>
<p>Converts a specified character to its title case
version.</p>
<p>In ER5, this function is only defined for UNICODE
builds.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint
aChar</code></td>
<td class="Cell"><p class="ValueDesc">The character to be converted.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint</code></td>
<td class="Cell"><p class="ValueDesc">The converted character.</p></td>
</tr>
</table></td></tr></table>
<a name="2.18"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Locked incrementer and decrementer</h2>
</div><div class="Bodytext">
<a name="2.18.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aLockedInc%28%29"></a>
<hr size="1" noshade>
<h3><code>LockedInc()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt LockedInc(TInt&amp; aValue);</code></p><h4 class="subheading">Description</h4>
<p>Increments a <code>TInt</code> value by 1 when the current
thread is locked. </p>
<p>The increment to <code>aValue</code> is done while the current
thread is locked; i.e. no other thread is permitted to run until the sequence
of instructions which increment <code>aValue</code> have completed. Hence the
function gives controlled access to a <code>TInt</code> variable which may be
in a memory location accessible to more than one thread.</p>
<p>Notes:</p>
<ul>
<li>
<p>See also <code>LockedDec()</code>, the corresponding
decrementer function.</p>
</li>
<li>
<p>As an example of its use, the function is used in the
implementation of critical sections; see <code>RCrticalSection</code>.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt&amp; aValue</code></td>
<td class="Cell"><p class="ValueDesc">A reference to an integer whose value is to be incremented. On
return contains the incremented value.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The value of <code>aValue</code> before it is
incremented.</p></td>
</tr>
</table></td></tr></table>
<a name="2.18.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aLockedDec%28%29"></a>
<hr size="1" noshade>
<h3><code>LockedDec()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt LockedDec(TInt&amp; aValue);</code></p><h4 class="subheading">Description</h4>
<p>Decrements a <code>TInt</code> value by 1 when the current
thread is locked. </p>
<p>The decrement from <code>aValue</code> is done while the
current thread is locked; i.e. no other thread is permitted to run until the
sequence of instructions which decrement <code>aValue</code> have completed.
Hence the function gives controlled access to a <code>TInt</code> variable
which may be in a memory location accessible to more than one thread.</p>
<p>Notes:</p>
<ul>
<li>
<p>See also <code>LockedInc()</code>, the corresponding
incrementer function.</p>
</li>
<li>
<p>As an example of its use, the function is used in the
implementation of critical sections; see <code>RCrticalSection</code>.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt&amp; aValue</code></td>
<td class="Cell"><p class="ValueDesc">A reference to <code>TInt</code> whose value is to be
decremented. On return contains the decremented value.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The value of <code>aValue</code> before it is
decremented.</p></td>
</tr>
</table></td></tr></table>
<a name="2.19"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Notification service</h2>
</div><div class="Bodytext">
<a name="2.19.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aInfoPrint%28%29"></a>
<hr size="1" noshade>
<h3><code>InfoPrint()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt InfoPrint(const TDesC&amp; aDes);</code></p><h4 class="subheading">Description</h4>
<p>Invokes the notify server to display a text message on the
screen for a short time. </p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TDesC&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the descriptor containing the text to be sent to
the notifier server.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful&#0160;&#8212; otherwise
one of the system-wide error codes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../NotificationServices/RNotifierClass.html#%3a%3aRNotifier" title="A handle to a session with the extended notifier server that provides support for plug-in notifiers"><code class="ApiItem">RNotifier</code></a></li>
<li><a href="../SystemWideErrorCodes/SystemWideErrorCodes.html#%3a%3aKErrNone" title="No error"><code class="ApiItem">KErrNone</code></a></li>
</ul>
<a name="2.20"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Set time</h2>
</div><div class="Bodytext">
<a name="2.20.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aSetHomeTime%28%29"></a>
<hr size="1" noshade>
<h3><code>SetHomeTime()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt SetHomeTime(const TTime&amp; aTime);</code></p><h4 class="subheading">Description</h4>
<p>Sets the machine's home time to a specified time value.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TTime&amp; aTime</code></td>
<td class="Cell"><p class="ValueDesc">A reference to a time representation object containing the time
value.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful or one of the system-wide
error codes.</p></td>
</tr>
</table></td></tr></table>
<a name="2.21"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Synchronous timer services</h2>
</div><div class="Bodytext">
<a name="2.21.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aAfter%28%29"></a>
<hr size="1" noshade>
<h3><code>After()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void After(TTimeIntervalMicroSeconds32 anInterval);</code></p><h4 class="subheading">Description</h4>
<p>Suspends the current thread until a specified time interval has
expired.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TTimeIntervalMicroSeconds32
anInterval</code></td>
<td class="Cell"><p class="ValueDesc">The time interval for which the current thread is to be
suspended (microseconds).</p></td>
</tr>
</table></td></tr></table>
<a name="2.21.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aAt%28%29"></a>
<hr size="1" noshade>
<h3><code>At()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt At(const TTime&amp; aTime);</code></p><h4 class="subheading">Description</h4>
<p>Suspends the current thread until the specified absolute time.
If the machine is off at that time, the machine will be turned on again.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TTime&amp; aTime</code></td>
<td class="Cell"><p class="ValueDesc">The absolute time until which the current thread is to be
suspended.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">On completion, contains the status of the request to suspend
the current thread: <code>KErrNone</code> - suspension of the current thread
completed normally at the requested time. <code>KErrAbort</code> - suspension
of the current thread was aborted because the system time changed.
<code>KErrUnderflow</code> - the requested completion time is in the past.
<code>KErrOverFlow</code> - the requested completion time is too far in the
future.</p></td>
</tr>
</table></td></tr></table>
<a name="2.22"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>System wide locale</h2>
</div><div class="Bodytext">
<a name="2.22.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aSetCurrencySymbol%28%29"></a>
<hr size="1" noshade>
<h3><code>SetCurrencySymbol()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void SetCurrencySymbol(const TDesC&amp; aSymbol);</code></p><h4 class="subheading">Description</h4>
<p>Sets the system wide currency symbol.</p>
<p>Note:</p>
<ul>
<li>
<p>On successful return from this function, a call to the
<code>Set()</code> member function of a <code>TCurrencySymbol</code> object
fetches the new currency symbol.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TDesC&amp; aSymbol</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the descriptor containing the currency symbol to
be set. The length of the descriptor <code>aSymbol</code> cannot be greater
than <code>KMaxCurrencySymbol</code> otherwise a USER 119 panic is
raised.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../LocaleSettings/TCurrencySymbolClass.html#%3a%3aTCurrencySymbol" title="Gets a copy of the currency symbol(s) in use by the current locale"><code class="ApiItem">TCurrencySymbol</code></a></li>
</ul>
<a name="2.23"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Inactivity timing</h2>
</div><div class="Bodytext">
<a name="2.23.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aInactivityTime%28%29"></a>
<hr size="1" noshade>
<h3><code>InactivityTime()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TTimeIntervalSeconds InactivityTime();</code></p><h4 class="subheading">Support</h4>
<p>Supported from 6.0
</p><h4 class="subheading">Description</h4>
<p>Returns the time since the last user activity.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TTimeIntervalSeconds</code></td>
<td class="Cell"><p class="ValueDesc">The time interval.</p></td>
</tr>
</table></td></tr></table>
<a name="2.23.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aResetInactivityTime%28%29"></a>
<hr size="1" noshade>
<h3><code>ResetInactivityTime()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ResetInactivityTime();</code></p><h4 class="subheading">Support</h4>
<p>Supported from 6.0
</p><h4 class="subheading">Description</h4>
<p>Resets all user inactivity timers.</p>
<a name="2.24"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Timing</h2>
</div><div class="Bodytext">
<a name="2.24.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aTickCount%28%29"></a>
<hr size="1" noshade>
<h3><code>TickCount()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TUint TickCount();</code></p><h4 class="subheading">Description</h4>
<p>Returns the machine's current tick count.</p>
<p>The period between ticks is platform dependent.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUint</code></td>
<td class="Cell"><p class="ValueDesc">The machine dependent tick count.</p></td>
</tr>
</table></td></tr></table>
<a name="2.24.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aLockPeriod%28%29"></a>
<hr size="1" noshade>
<h3><code>LockPeriod()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TTimerLockSpec LockPeriod();</code></p><h4 class="subheading">Description</h4>
<p>Returns which of the periods the clock is currently in.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TTimerLockSpec</code></td>
<td class="Cell"><p class="ValueDesc">The fraction of a second at which the timer completes.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>User heap management</h2>
</div><div class="Bodytext">
<a name="2.25.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aHeap%28%29"></a>
<hr size="1" noshade>
<h3><code>Heap()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static RHeap&amp; Heap();</code></p><h4 class="subheading">Description</h4>
<p>Returns a reference to the handle to the current thread's
heap.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RHeap&amp;</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the handle to the current thread's heap.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aSwitchHeap%28%29"></a>
<hr size="1" noshade>
<h3><code>SwitchHeap()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static RHeap* SwitchHeap(RHeap* aHeap);</code></p><h4 class="subheading">Description</h4>
<p>Changes the current thread's heap.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RHeap* aHeap</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the new heap handle.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RHeap*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the old heap handle.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.4"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aAlloc%28%29"></a>
<hr size="1" noshade>
<h3><code>Alloc()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TAny* Alloc(TInt aSize);</code></p><h4 class="subheading">Description</h4>
<p>Allocates a cell of specified size from the current thread's
heap. If there is insufficient memory available on the heap from which to
allocate a cell of the required size the function returns
<code>NULL</code>.</p>
<p>Note:</p>
<ul>
<li>
<p>The maximum unsigned value of <code>aSize</code> must be
less than the value of <code>KMaxTInt</code>/2. Passing an unsigned value
greater than or equal to <code>KMaxTInt</code>/2 causes the functions to raise
a USER 47 panic. For example, calling <code>Alloc(-1)</code> causes a
panic.</p>
</li>
<li>
<p>The resulting size of the allocated cell may be rounded up
to a value greater than <code>aSize</code>, but is guaranteed to be not less
than <code>aSize</code>.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aSize</code></td>
<td class="Cell"><p class="ValueDesc">The size of the cell to be allocated from the current thread's
heap.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the allocated cell. <code>NULL</code>, if there is
insufficient memory available.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.5"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aAllocL%28%29"></a>
<hr size="1" noshade>
<h3><code>AllocL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TAny* AllocL(TInt aSize);</code></p><h4 class="subheading">Description</h4>
<p>Allocates a cell of specified size from the current thread's
heap and leaves if there is insufficient memory in the heap.</p>
<p>Notes:</p>
<ul>
<li>
<p>The maximum unsigned value of <code>aSize</code> must be
less than the value of <code>KMaxTInt</code>/2. Passing an unsigned value
greater than or equal to <code>KMaxTInt</code>/2 causes the functions to raise
a USER 47 panic. For example, calling <code>Alloc(-1)</code> causes a
panic.</p>
</li>
<li>
<p>The resulting size of the allocated cell may be rounded up
to a value greater than <code>aSize</code>, but is guaranteed to be not less
than <code>aSize</code>.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aSize</code></td>
<td class="Cell"><p class="ValueDesc">The size of the cell to be allocated from the current thread's
heap.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the allocated cell.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.6"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aAllocLC%28%29"></a>
<hr size="1" noshade>
<h3><code>AllocLC()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TAny* AllocLC(TInt aSize);</code></p><h4 class="subheading">Description</h4>
<p>Allocates a cell of specified size from the current thread's
heap, and if successful places a pointer to the cell on the cleanup stack. The
function leaves if there is insufficient memory in the heap.</p>
<p>Notes:</p>
<ul>
<li>
<p>The maximum unsigned value of <code>aSize</code> must be
less than the value of <code>KMaxTInt</code>/2. Passing an unsigned value
greater than or equal to <code>KMaxTInt</code>/2 causes the functions to raise
a USER 47 panic. For example, calling <code>Alloc(-1)</code> causes a
panic.</p>
</li>
<li>
<p>The resulting size of the allocated cell may be rounded up
to a value greater than <code>aSize</code>, but is guaranteed to be not less
than <code>aSize</code>.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aSize</code></td>
<td class="Cell"><p class="ValueDesc">The size of the cell to be allocated from the current thread's
heap.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the allocated cell.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.7"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aAdjust%28%29"></a>
<hr size="1" noshade>
<h3><code>Adjust()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TAny* Adjust(TAny* aCell,TInt anOffset,TInt aDelta);</code></p><h4 class="subheading">Description</h4>
<p>Stretches or shrinks an existing cell by a specified amount at
a specified offset from the start of the cell.</p>
<p>If successful, the function returns a pointer to the adjusted
cell. The adjusted cell may be at a different location from the original cell,
i.e. the returned pointer may be different to the value of <code>aCell</code>.
If adjustment fails, the content of the original cell is preserved.</p>
<p>Shrinking of the cell occurs when <code>aDelta</code> is
negative and means the removal of (the magnitude of) <code>aDelta</code> bytes
from the cell, starting at offset <code>anOffset</code> from the start of the
cell.</p>
<p>Stretching a cell occurs when <code>aDelta</code> is positive
and means the insertion of <code>aDelta</code> bytes into the cell at offset
<code>anOffset</code> from the start of the cell and copying the original
content of the cell at offset <code>anOffset</code> to offset
<code>anOffset+aDelta</code>.</p>
<p>If necessary, the cell is reallocated. If there is insufficient
memory available in the heap from which to reallocate the cell to the required
size the function returns <code>NULL</code>. </p>
<p>Note:</p>
<ul>
<li>
<p>The size of the adjusted cell may be rounded up from the
specified value.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny* aCell</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the cell to be adjusted. This cannot be
<code>NULL</code>.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset from the start of the cell where adjustment is to be
made. The value of must not be negative, otherwise the functions raises a USER
52 panic</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aDelta</code></td>
<td class="Cell"><p class="ValueDesc">The amount by which the cell is to be stretched, if positive,
or shrunk, if negative. The value may be zero, but this does not result in any
change to the allocated cell.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the adjusted cell.<code>NULL</code> if there is
insufficient memory available.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.8"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aAdjustL%28%29"></a>
<hr size="1" noshade>
<h3><code>AdjustL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TAny* AdjustL(TAny* aCell,TInt anOffset,TInt aDelta);</code></p><h4 class="subheading">Description</h4>
<p>Stretches or shrinks an existing cell by a specified amount at
a specified offset from the start of the cell and leaves if there is
insufficient memory in the heap to adjust or reallocate the cell.</p>
<p>If successful, the function returns a pointer to the adjusted
cell. The returned pointer may be different to the value of <code>aCell</code>
since the cell is re-allocated if there is insufficient room for adjustment at
the current cell position. If adjustment fails, the content of the original
cell is preserved.</p>
<p>Shrinking of the cell occurs when <code>aDelta</code> is
negative and means the removal of (the magnitude of) <code>aDelta</code> bytes
from the cell, starting at offset <code>anOffset</code> from the start of the
cell.</p>
<p>Stretching a cell occurs when <code>aDelta</code> is positive
and means the insertion of <code>aDelta</code> bytes into the cell at offset
<code>anOffset</code> from the start of the cell and copying the original
content of the cell at offset <code>anOffset</code> to offset
<code>anOffset+aDelta</code>.</p>
<p>Note:</p>
<ul>
<li>
<p>The size of the adjusted cell may be rounded up from the
specified value.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny* aCell</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the cell to be adjusted. This cannot be
<code>NULL</code>.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset from the start of the cell where adjustment is to be
made. The value of must not be negative, otherwise the functions raises a USER
52 panic</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aDelta</code></td>
<td class="Cell"><p class="ValueDesc">The amount by which the cell is to be stretched, if positive,
or shrunk, if negative. The value may be zero, but this does not result in any
change to the allocated cell.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the adjusted cell.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.9"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aAllocLen%28%29"></a>
<hr size="1" noshade>
<h3><code>AllocLen()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt AllocLen(const TAny* aCell);</code></p><h4 class="subheading">Description</h4>
<p>Returns the length of the specified allocated heap cell. The
cell is assumed to be in the current thread&#8217;s heap.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TAny* aCell</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the allocated cell whose length is to be
fetched.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The length of the allocated cell.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.10"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aAllocSize%28%29"></a>
<hr size="1" noshade>
<h3><code>AllocSize()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt AllocSize(TInt&amp; aTotalAllocSize);</code></p><h4 class="subheading">Description</h4>
<p>Returns the total number of cells allocated on the current
thread&#8217;s heap and the total space allocated to them.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt&amp; aTotalAllocSize</code></td>
<td class="Cell"><p class="ValueDesc">On return, this reference contains the total space allocated to
the cells.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The number of cells currently allocated on the current thread's
heap.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.11"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aAvailable%28%29"></a>
<hr size="1" noshade>
<h3><code>Available()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt Available(TInt&amp; aBiggestBlock);</code></p><h4 class="subheading">Description</h4>
<p>Returns the total free space currently available on the current
thread's heap and the space available in the largest free block.</p>
<p>The space available represents the total space which can be
allocated.</p>
<p>Note:</p>
<ul>
<li>
<p>Compressing the heap may reduce the total free space
available and the space available in the largest free block.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt&amp; aBiggestBlock</code></td>
<td class="Cell"><p class="ValueDesc">On return, this reference contains the space available in the
largest free block on the current thread&#8217;s heap.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The total free space currently available on the current
thread's heap.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.12"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aCountAllocCells%28%29"></a>
<hr size="1" noshade>
<h3><code>CountAllocCells()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt CountAllocCells();</code></p><h4 class="subheading">Description</h4>
<p>Returns the total number of cells allocated on the current
thread's heap.</p>
<p>If the <code>TInt&amp;</code> argument is passed, then, on
return, <code>aFreeCount</code> contains the number of free cells on the
heap.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The number of cells allocated on the current thread&#8217;s
heap</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.13"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aCountAllocCells%28%29"></a>
<hr size="1" noshade>
<h3><code>CountAllocCells()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt CountAllocCells(TInt&amp; aFreeCount);</code></p><h4 class="subheading">Description</h4>
<p>Returns the total number of cells allocated, and the number of
free cells, on the current thread's heap.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt&amp; aFreeCount</code></td>
<td class="Cell"><p class="ValueDesc">On return, this reference contains the number of free cells on
the current thread's heap.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The number of cells allocated on the current thread's
heap</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.14"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aFree%28%29"></a>
<hr size="1" noshade>
<h3><code>Free()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void Free(TAny* aCell);</code></p><h4 class="subheading">Description</h4>
<p>Frees a specified cell and returns it to the current thread's
heap.</p>
<p>If <code>aCell</code> is not <code>NULL</code>, it must point
to a valid cell, otherwise the function raises a USER 42 panic.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny* aCell</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid cell to be freed. If NULL this function
call will be ignored.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.15"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aFreeZ%28%29"></a>
<hr size="1" noshade>
<h3><code>FreeZ()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static void FreeZ(TAny*&amp; aCell);</code></p><h4 class="subheading">Description</h4>
<p>Frees a specified cell, returns it to the current thread's
heap, and resets the pointer to <code>NULL</code>.</p>
<p>If <code>aCell</code> is not <code>NULL</code>, it must point
to a valid cell, otherwise the function raises a USER 42 panic.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*&amp; aCell</code></td>
<td class="Cell"><p class="ValueDesc">A reference to a pointer to a valid cell to be freed. If NULL
this function call will be ignored.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.16"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aReAlloc%28%29"></a>
<hr size="1" noshade>
<h3><code>ReAlloc()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TAny* ReAlloc(TAny* aCell,TInt aSize);</code></p><h4 class="subheading">Description</h4>
<p>Increases or decreases the size of an existing cell. If there
is insufficient memory available in the heap from which to reallocate the cell
to the required size the function returns <code>NULL</code>. </p>
<p>If successful, the functions return a pointer to the
reallocated cell. The reallocated cell may be at a different location from the
original cell, i.e. the returned pointer may be different to the value of
<code>aCell</code>. However, if the cell is smaller than the original, it is
guaranteed not to move.</p>
<p>If the location of the new cell is different to that of the
original cell, the content of the original cell is copied to the reallocated
cell.</p>
<p>If reallocation fails, the content of the original cell is
preserved.</p>
<p>Notes:</p>
<ul>
<li>
<p>The maximum permitted unsigned value of <code>aSize</code>
is defined as the unsigned value of <code>KMaxTInt</code>/2. Passing an
unsigned value greater than this causes the functions to raise a USER 47 panic.
For example, calling <code>ReAlloc(someptr,-1)</code> causes a panic.</p>
</li>
<li>
<p>The resulting size of the re-allocated cell may be rounded
up to a value greater than <code>aSize</code>, but is guaranteed to be not less
than <code>aSize</code>.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny* aCell</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the cell to be reallocated. This may be
<code>NULL</code>, in which case the function allocates a new cell from the
heap and its behaviour is the same as <code>Alloc()</code>. If it is not
<code>NULL</code>, it must point to a valid cell, otherwise the function raises
a USER 42 panic.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aSize</code></td>
<td class="Cell"><p class="ValueDesc">The new size of the cell. This value must not be negative,
otherwise the functions raise a USER 54 panic.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the reallocated cell.<code>NULL</code> if there is
insufficient memory available.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.17"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aReAllocL%28%29"></a>
<hr size="1" noshade>
<h3><code>ReAllocL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TAny* ReAllocL(TAny* aCell,TInt aSize);</code></p><h4 class="subheading">Description</h4>
<p>Increases or decreases the size of an existing cell and leaves
if there is insufficient memory available in the heap from which to reallocate
the cell to the required size. </p>
<p>If successful, the functions return a pointer to the
reallocated cell. The reallocated cell may be at a different location from the
original cell, i.e. the returned pointer may be different to the value of
<code>aCell</code>. However, if the cell is smaller than the original, it is
guaranteed not to move.</p>
<p>If the location of the new cell is different to that of the
original cell, the content of the original cell is copied to the reallocated
cell.</p>
<p>If reallocation fails, the content of the original cell is
preserved.</p>
<p>Notes:</p>
<ul>
<li>
<p>The maximum permitted unsigned value of <code>aSize</code>
is defined as the unsigned value of <code>KMaxTInt</code>/2. Passing an
unsigned value greater than this causes the functions to raise a USER 47 panic.
For example, calling <code>ReAlloc(someptr,-1)</code> causes a panic.</p>
</li>
<li>
<p>The resulting size of the re-allocated cell may be rounded
up to a value greater than <code>aSize</code>, but is guaranteed to be not less
than <code>aSize</code>.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny* aCell</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the cell to be reallocated. This may be
<code>NULL</code>, in which case the function allocates a new cell from the
heap and its behaviour is the same as <code>Alloc()</code>. If it is not
<code>NULL</code>, it must point to a valid cell, otherwise the function raises
a USER 42 panic.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt
aSize</code></td>
<td class="Cell"><p class="ValueDesc">The new size of the cell. This value must not be negative,
otherwise the functions raise a USER 54 panic.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to the reallocated cell.</p></td>
</tr>
</table></td></tr></table>
<a name="2.25.18"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aCompressAllHeaps%28%29"></a>
<hr size="1" noshade>
<h3><code>CompressAllHeaps()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TInt CompressAllHeaps();</code></p><h4 class="subheading">Description</h4>
<p>Compresses all the chunks containing heaps</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code>, if successful, otherwise one of the
other system-wide codes.</p></td>
</tr>
</table></td></tr></table>
<a name="2.26"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Version information and comparisons</h2>
</div><div class="Bodytext">
<a name="2.26.2"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aQueryVersionSupported%28%29"></a>
<hr size="1" noshade>
<h3><code>QueryVersionSupported()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TBool QueryVersionSupported(const TVersion&amp; aCurrent,const TVersion&amp; aRequested);</code></p><h4 class="subheading">Description</h4>
<p>Compares two version objects and returns a true if the test
version is less than the current version. Version information is encapsulated
by a <code>TVersion</code> type object and consists of a major version number,
a minor version number and a build number.</p>
<p>The function returns true if one of the following conditions is
true:</p>
<ul>
<li>
<p>the test major version is strictly less than the current
major version</p>
</li>
<li>
<p>the test major version is equal to the current major
version and the test minor version is less than or equal to the current minor
version</p>
</li>
</ul>
<p>If neither condition is true, the function returns
false.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const
TVersion&amp; aCurrent</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the current version against which
<code>aRequested</code>is compared.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const
TVersion&amp; aRequested</code></td>
<td class="Cell"><p class="ValueDesc">A reference to the test version to be compared against
<code>aCurrent</code>.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TBool</code></td>
<td class="Cell"><p class="ValueDesc">True, if one or both conditions are true. False
otherwise.</p></td>
</tr>
</table></td></tr></table>
<a name="2.26.3"></a></div><div class="Head3">
<a name="%3a%3aUser%3a%3aVersion%28%29"></a>
<hr size="1" noshade>
<h3><code>Version()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>static TVersion Version();</code></p><h4 class="subheading">Description</h4>
<p>Gets the version of the operating system.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TVersion</code></td>
<td class="Cell"><p class="ValueDesc">The version of the operating system.</p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
