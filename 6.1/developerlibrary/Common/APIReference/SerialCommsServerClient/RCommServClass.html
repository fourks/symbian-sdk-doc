<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>RCommServ</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="RCommClass.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="TBpsEnum.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Serial&nbsp;Communications&nbsp;Server&nbsp;Client-Side</a>&nbsp;<span class="separator">&#187;</span>
RCommServ</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code> c32comm.h </code>
<br>Link against: <code> c32.lib </code>
</p>
</div><div class="Head1">
<a name="%3a%3aRCommServ"></a>

<h1>Class <code>RCommServ</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>RCommServ</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Represents a session with the comms server. Functions are provided
for connection to the server and for loading and unloading different comms
modules, and services for finding out the name and numbers of the available
ports. </p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code>RCommServ</code></td><td class="Cell">Represents a session with the comms server</td>
</tr>
<tr><td class="Cell"><code><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase">RHandleBase</a></code></td><td class="Cell">Handle to an object</td>
</tr>
<tr><td class="Cell"><code><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase">RSessionBase</a></code></td><td class="Cell">Client-side handle to a session with a server</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>RCommServ</code>:
<br><code class="ApiItem"><a href="RCommServClass.html#%3a%3aRCommServ%3a%3aConnect%28%29" title="Connects a client process to the comms server">Connect()</a></code>, <code class="ApiItem"><a href="RCommServClass.html#%3a%3aRCommServ%3a%3aGetPortInfo%28%29" title="Gets information about the serial ports that are available">GetPortInfo()</a></code>, <code class="ApiItem"><a href="RCommServClass.html#%3a%3aRCommServ%3a%3aLoadCommModule%28%29" title="Loads a comms module">LoadCommModule()</a></code>, <code class="ApiItem"><a href="RCommServClass.html#%3a%3aRCommServ%3a%3aNumPorts%28%29" title="Gets how many comms module (CSYs) are loaded">NumPorts()</a></code>, <code class="ApiItem"><a href="RCommServClass.html#%3a%3aRCommServ%3a%3aRCommServ%28%29" title="Default constructor">RCommServ()</a></code>, <code class="ApiItem"><a href="RCommServClass.html#%3a%3aRCommServ%3a%3aUnloadCommModule%28%29" title="Unloads a comms module -- for instance, if switching from RS232 to infra-red operation">UnloadCommModule()</a></code>, <code class="ApiItem"><a href="RCommServClass.html#%3a%3aRCommServ%3a%3aVersion%28%29" title="Gets the version number">Version()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase" title="Handle to an object">RHandleBase</a></code>:
<br><code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aClose%28%29" title="Closes the handle">Close()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aDuplicate%28%29" title="Creates a valid handle to the Kernel object to which the specified thread already has a handle">Duplicate()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aHandle%28%29" title="Retrieves the handle-number of the object associated with this handle">Handle()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aSetHandle%28%29" title="Use this function to set the handle-number of this handle to the specified value">SetHandle()</a></code></p>
<p>Inherited from <code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase" title="Client-side handle to a session with a server">RSessionBase</a></code>:
<br><code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aAttach%28%29" title="Explicitly attaches a thread to the session">Attach()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aCreateSession%28%29" title="Creates a session with a server">CreateSession()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aEAutoAttach" title="Client threads are auto-attached to the session">EAutoAttach</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aEExplicitAttach" title="Client threads explicitly attach to the session">EExplicitAttach</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aSend%28%29" title="Sends a blind message to the server -- no reply is expected">Send()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aSendReceive%28%29" title="Sends a message to the server and waits synchronously for the reply">SendReceive()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aSetRetry%28%29" title="Changes the retry parameters used to resend a message if the server is busy">SetRetry()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aShare%28%29" title="Makes the session shared among all threads in the process">Share()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aTAttachMode" title="Indicates whether threads in the process are automatically attached to the session when passed as a parameter to the Share() function">TAttachMode</a></code></p>
<a name="2.6"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Constructor</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aRCommServ%3a%3aRCommServ%28%29"></a>
<hr size="1" noshade>
<h3><code>RCommServ()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>RCommServ();</code></p><h4 class="subheading">Description</h4>
<p>Default constructor.</p>
<a name="2.7"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Services provided</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aRCommServ%3a%3aConnect%28%29"></a>
<hr size="1" noshade>
<h3><code>Connect()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Connect();</code></p><h4 class="subheading">Description</h4>
<p>Connects a client process to the comms server.</p>
<p>As with any server, the connection should be closed after use.
<code>RHandleBase</code> provides the necessary <code>Close()</code> function,
which should be called when the server session is no longer required.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"> System-wide error code </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aRCommServ%3a%3aVersion%28%29"></a>
<hr size="1" noshade>
<h3><code>Version()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TVersion Version() const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the version number.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> Tversion </code></td>
<td class="Cell"><p class="ValueDesc"> Version number </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.4"></a></div><div class="Head3">
<a name="%3a%3aRCommServ%3a%3aLoadCommModule%28%29"></a>
<hr size="1" noshade>
<h3><code>LoadCommModule()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt LoadCommModule(const TDesC &amp;aFileName);</code></p><h4 class="subheading">Description</h4>
<p>Loads a comms module.</p>
<p>Note:</p>
<ul>
<li>
<p>There is no need for an extension, as &quot;.CSY&quot; is automatically
appended by this function.</p>
</li>
<li>
<p>This function automatically searches the /System/Libs directories
on all drives for this file</p>
</li>
<li>
<p>Two module are available as standard. ECUART provides serial port
services. IRCOMM provides infra-red services.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC &amp;aFileName </code></td>
<td class="Cell"><p class="ValueDesc"> Name of the module to load </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"> System-wide error code </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.5"></a></div><div class="Head3">
<a name="%3a%3aRCommServ%3a%3aUnloadCommModule%28%29"></a>
<hr size="1" noshade>
<h3><code>UnloadCommModule()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt UnloadCommModule(const TDesC &amp;aName);</code></p><h4 class="subheading">Description</h4>
<p>Unloads a comms module &nbsp;&#8212; for instance, if switching from
RS232 to infra-red operation.</p>
<p>There is no need to unload a comms module when the connection to the
server is closed, as this is done automatically.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC &amp;aFileName </code></td>
<td class="Cell"><p class="ValueDesc"> Name of the module to unload </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"> System-wide error code </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.6"></a></div><div class="Head3">
<a name="%3a%3aRCommServ%3a%3aNumPorts%28%29"></a>
<hr size="1" noshade>
<h3><code>NumPorts()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt NumPorts(TInt&amp; aNum);</code></p><h4 class="subheading">Description</h4>
<p>Gets how many comms module (CSYs) are loaded.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt&amp; aNum </code></td>
<td class="Cell"><p class="ValueDesc"> On return, holds the number of loaded CSYs </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"> System-wide error code </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.7"></a></div><div class="Head3">
<a name="%3a%3aRCommServ%3a%3aGetPortInfo%28%29"></a>
<hr size="1" noshade>
<h3><code>GetPortInfo()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt GetPortInfo(const TDesC &amp;aName,TSerialInfo &amp;aInfo);<br>TInt GetPortInfo(TInt aIndex, TDes &amp;aModuleName, TSerialInfo &amp;aInfo);</code></p><h4 class="subheading">Description</h4>
<p>Gets information about the serial ports that are available. It is
overloaded and can be called in two versions. </p>
<p>The first obtains the port information for a comms module specified by
name (for example, COMM for RS232). The second version is similar, but allows
you to specify the comms modules by an index number from 0. This allows you to
enumerate through the loaded comms modules. You can obtain the current number
of loaded comms modules by calling <code>NumPorts()</code>.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC &amp;aName </code></td>
<td class="Cell"><p class="ValueDesc"> The name of the comms module </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TSerialInfo &amp;aInfo </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains information about the ports available, including the
high and low unit numbers and their name. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aIndex </code></td>
<td class="Cell"><p class="ValueDesc"> Index number of the comms module from 0. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TDes &amp;aModuleName </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the name of the comms module referred to
by<code>aIndex</code>
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"> System-wide error code </p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
