<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>MLayDoc</title>
<link href="../../../_stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../_stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../_stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../_stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../_stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../_stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../_stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="MFormatTextClass.html"><img src="../../../_stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="MTextFieldFactoryClass.html"><img src="../../../_stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Text&nbsp;and&nbsp;Text&nbsp;Attributes</a>&nbsp;<span class="separator">&#187;</span>
MLayDoc</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code> txtlaydc.h </code>
<br>Link against: <code></code>
</p>
</div><div class="Head1">
<a name="%3a%3aMLayDoc"></a>

<h1>Class <code>MLayDoc</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>MLayDoc</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>This class specifies the mixin protocol for providing the
information needed by the text layout engine to lay out a text object. It is
inherited by classes which implement this protocol. Examples of such classes
are <code>CRichText</code> and <code>CGlobalText</code>.</p>
<p>At the heart of the interface are two interrogation functions; one
gives the paragraph formatting for a document position, and the other gives a
pointer descriptor to a series of contiguous characters with identical
character formatting, and their character formatting. This information is
sufficient for the layout engine to find the formatting and content of an
entire document.</p>
<p>The constructor for the layout engine (<code>CTextLayout</code>) is
prototyped as:</p>
<p class="CodeBlock"><code>static CTextLayout *NewL(MLayDoc *aDoc,TInt aWrapWidth);</code></p>
<p>By viewing the text object purely in terms of the
<code>MLayDoc</code> interface, the layout engine is insulated from any
editable text implementation issues.</p>
<p>Defined in <code>MLayDoc</code>:
<br><code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aCancelSelectLabel%28%29" title="Cancels a paragraph label selection made by a call toSelectParagraphLabel() so that the main document reverts back to the main body of text">CancelSelectLabel()</a></code>, <code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aEForceLoadFalse" title="Do not load the picture data into memory">EForceLoadFalse</a></code>, <code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aEForceLoadTrue" title="Load the picture data into memory">EForceLoadTrue</a></code>, <code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aEnquirePageBreak%28%29" title="Tests whether a page break occurs within a range of characters">EnquirePageBreak()</a></code>, <code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aGetChars%28%29" title="Gets a constant pointer descriptor to a portion of the text object with constant character formatting">GetChars()</a></code>, <code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aGetParagraphFormatL%28%29" title="Gets the effective paragraph formatting which applies to the paragraph which contains a specified document position">GetParagraphFormatL()</a></code>, <code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aGetPictureSizeInTwips%28%29" title="Gets the size of a picture located at a specified document position">GetPictureSizeInTwips()</a></code>, <code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aLdDocumentLength%28%29" title="Gets the the number of characters in the document">LdDocumentLength()</a></code>, <code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aLdToParagraphStart%28%29" title="Gets the document position of the start of the paragraph containing a specified position">LdToParagraphStart()</a></code>, <code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aPictureHandleL%28%29" title="Gets a pointer to the picture located at a specified document position, if one exists">PictureHandleL()</a></code>, <code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aSelectParagraphLabel%28%29" title="This function should be implemented by text objects which support paragraph labels">SelectParagraphLabel()</a></code>, <code class="ApiItem"><a href="MLayDocClass.html#%3a%3aMLayDoc%3a%3aTForcePictureLoad" title="Used as a parameter to the PictureHandleL() function to control whether picture data should be loaded into memory or not">TForcePictureLoad</a></code>
</p>
<a name="2.5"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Enquiry</h2>
</div><div class="Bodytext">
<a name="2.5.2"></a></div><div class="Head3">
<a name="%3a%3aMLayDoc%3a%3aLdDocumentLength%28%29"></a>
<hr size="1" noshade>
<h3><code>LdDocumentLength()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TInt LdDocumentLength()const=0;</code></p><h4 class="subheading">Description</h4>
<p>Gets the the number of characters in the document.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"> The number of characters contained in the document. </p></td>
</tr>
</table></td></tr></table>
<a name="2.5.3"></a></div><div class="Head3">
<a name="%3a%3aMLayDoc%3a%3aLdToParagraphStart%28%29"></a>
<hr size="1" noshade>
<h3><code>LdToParagraphStart()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TInt LdToParagraphStart(TInt&amp; aCurrentPos)const=0;</code></p><h4 class="subheading">Description</h4>
<p>Gets the document position of the start of the paragraph containing
a specified position.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt&amp; aCurrentPos </code></td>
<td class="Cell"><p class="ValueDesc"> A valid document position. On return contains the document
position of the first character in the paragraph. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"> The number of characters skipped in scanning to the start of the
paragraph. </p></td>
</tr>
</table></td></tr></table>
<a name="2.5.4"></a></div><div class="Head3">
<a name="%3a%3aMLayDoc%3a%3aGetParagraphFormatL%28%29"></a>
<hr size="1" noshade>
<h3><code>GetParagraphFormatL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void GetParagraphFormatL(CParaFormat* aFormat,TInt aPos)const=0;</code></p><h4 class="subheading">Description</h4>
<p>Gets the effective paragraph formatting which applies to the
paragraph which contains a specified document position. On return,
<code>aFormat</code> is filled with values for all paragraph format
attributes.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> CParaFormat* aFormat </code></td>
<td class="Cell"><p class="ValueDesc"> On return, filled with the paragraph's effective paragraph
formatting. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aPos </code></td>
<td class="Cell"><p class="ValueDesc"> Any document position within the paragraph of interest. </p></td>
</tr>
</table></td></tr></table>
<a name="2.5.5"></a></div><div class="Head3">
<a name="%3a%3aMLayDoc%3a%3aGetChars%28%29"></a>
<hr size="1" noshade>
<h3><code>GetChars()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void GetChars(TPtrC&amp; aView,TCharFormat&amp; aFormat,TInt aStartPos)const=0;</code></p><h4 class="subheading">Description</h4>
<p>Gets a constant pointer descriptor to a portion of the text object with
constant character formatting. The view starts at the document position
specified, and ends at: </p>
<ul>
<li>
<p>the last character which shares the same character formatting (rich
text only), or</p>
</li>
<li>
<p>the end of the document, or</p>
</li>
<li>
<p>the end of the segment, if segmented storage is being used</p>
</li>
</ul>
<p>whichever occurs first. </p>
<p>Also fills a character format object with the character formatting of
the range of characters.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TPtrC&amp; aView </code></td>
<td class="Cell"><p class="ValueDesc"> On return, a constant pointer to a portion of the text. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TCharFormat&amp; aFormat </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the character formatting of the text. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aStartPos </code></td>
<td class="Cell"><p class="ValueDesc"> The start position for the view. Must be a valid document position, or
a panic occurs. </p></td>
</tr>
</table></td></tr></table>
<a name="2.5.6"></a></div><div class="Head3">
<a name="%3a%3aMLayDoc%3a%3aPictureHandleL%28%29"></a>
<hr size="1" noshade>
<h3><code>PictureHandleL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual CPicture* PictureHandleL(TInt aPos,TForcePictureLoad aForceLoad=EForceLoadTrue)const=0;</code></p><h4 class="subheading">Description</h4>
<p>Gets a pointer to the picture located at a specified document position,
if one exists. If the picture is not in memory, the function loads it (if the
second argument has a value of <code>EForceLoadTrue</code>).</p>
<p>Note</p>
<p>The global text implementation of this function always returns NULL
because global text does not support pictures.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aPos </code></td>
<td class="Cell"><p class="ValueDesc"> Document position of the picture character. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TForcePictureLoad aForceLoad </code></td>
<td class="Cell"><p class="ValueDesc"> If the picture is not loaded into memory, <code>EForceLoadTrue</code>
loads it using the picture factory; <code>EForceLoadFalse</code> does not, and
in this case, the function returns NULL. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> CPicture* </code></td>
<td class="Cell"><p class="ValueDesc"> A pointer to the picture located at <code>aPos</code>. NULL if
<code>aPos</code> does not specify a picture character, or if there is a
picture at <code>aPos</code> which is not in memory, and the second argument is
<code>EForceLoadFalse</code>. </p></td>
</tr>
</table></td></tr></table>
<a name="2.5.7"></a></div><div class="Head3">
<a name="%3a%3aMLayDoc%3a%3aGetPictureSizeInTwips%28%29"></a>
<hr size="1" noshade>
<h3><code>GetPictureSizeInTwips()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt GetPictureSizeInTwips(TSize&amp; aSize, TInt aPos)const=0;</code></p><h4 class="subheading">Description</h4>
<p>Gets the size of a picture located at a specified document
position.</p>
<p>Note</p>
<p>The global text implementation of this function always
returns<code>KErrNotFound</code> because global text does not support
pictures.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TSize&amp; aSize </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the size of the picture located
at<code>aPos</code>.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aPos </code></td>
<td class="Cell"><p class="ValueDesc"> Document position of the picture. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNotFound</code> if there is no picture at the specified
document position, <code>KErrNone</code> if there is. </p></td>
</tr>
</table></td></tr></table>
<a name="2.5.8"></a></div><div class="Head3">
<a name="%3a%3aMLayDoc%3a%3aEnquirePageBreak%28%29"></a>
<hr size="1" noshade>
<h3><code>EnquirePageBreak()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TBool EnquirePageBreak(TInt aPos,TInt aLength=0)const=0;</code></p><h4 class="subheading">Description</h4>
<p>Tests whether a page break occurs within a range of characters. A page
table should have been set up first:
see<code>CPlainText::SetPageTable()</code>.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aPos </code></td>
<td class="Cell"><p class="ValueDesc"> The document position from which to begin searching for a page
break.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aLength </code></td>
<td class="Cell"><p class="ValueDesc"> The number of characters to search for a page break, beginning
at<code>aPos</code>. The default is zero. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TBool </code></td>
<td class="Cell"><p class="ValueDesc"> True if a page break occurs within the specified range, otherwise
false.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Paragraph labels</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aMLayDoc%3a%3aSelectParagraphLabel%28%29"></a>
<hr size="1" noshade>
<h3><code>SelectParagraphLabel()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TBool SelectParagraphLabel(TInt aPos)=0;</code></p><h4 class="subheading">Description</h4>
<p>This function should be implemented by text objects which support
paragraph labels. Each paragraph may have at most one label. By default, the
functions provided by <code>MLayDoc</code> apply to the main body of text. This
function is provided to change this so that the <code>MLayDoc</code> object is
an individual paragraph label, (each of which is treated as a separate
document). Paragraph labelling has not been implemented by global or rich
text.</p>
<p>This function should select the paragraph label associated with the
paragraph containing document position <code>aPos</code> (<code>aPos</code> is
a document position in the main document).</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aPos </code></td>
<td class="Cell"><p class="ValueDesc"> A document position within a paragraph. This paragraph's label should be
set as the main <code>MLayDoc</code> document. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TBool </code></td>
<td class="Cell"><p class="ValueDesc"> Should return <code>EFalse</code> if the paragraph has no label, in
which case the function has no effect, <code>ETrue</code> otherwise. </p></td>
</tr>
</table></td></tr></table>
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aMLayDoc%3a%3aCancelSelectLabel%28%29"></a>
<hr size="1" noshade>
<h3><code>CancelSelectLabel()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void CancelSelectLabel()=0;</code></p><h4 class="subheading">Description</h4>
<p>Cancels a paragraph label selection made by a call
to<code>SelectParagraphLabel()</code> so that the main document reverts back to
the main body of text.</p>
<a name="2.7"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><a name="%3a%3aMLayDoc%3a%3aTForcePictureLoad"></a>
<hr size="2" noshade>
<h2>Enum <code>TForcePictureLoad</code></h2>
</div><div class="Bodytext"><p class="Prototype"><code>TForcePictureLoad</code></p><h4 class="subheading">Description</h4>
<p>Used as a parameter to the <code>PictureHandleL()</code> function to
control whether picture data should be loaded into memory or not.</p>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><a name="%3a%3aMLayDoc%3a%3aEForceLoadFalse"><code class="Value">EForceLoadFalse</code></a></td>
<td class="Cell"><p class="ValueDesc">
<para>Do not load the picture data into memory.</para>
</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><a name="%3a%3aMLayDoc%3a%3aEForceLoadTrue"><code class="Value">EForceLoadTrue</code></a></td>
<td class="Cell"><p class="ValueDesc">
<para>Load the picture data into memory.</para>
</p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../_stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
