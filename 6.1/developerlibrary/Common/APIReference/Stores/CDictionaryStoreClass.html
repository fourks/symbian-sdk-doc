<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>CDictionaryStore</title>
<link href="../../../_stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../_stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../_stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../_stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../_stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../_stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../_stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CBufStoreClass.html"><img src="../../../_stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="CEmbeddedStoreClass.html"><img src="../../../_stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Stores</a>&nbsp;<span class="separator">&#187;</span>
CDictionaryStore</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>s32stor.h</code>
<br>Link against: <code>estor.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aCDictionaryStore"></a>

<h1>Class <code>CDictionaryStore</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>CDictionaryStore</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Dictionary store interface.</p>
<p>This is an abstract class which provides the necessary interface
for using concrete dictionary stores.</p>
<p>A dictionary store is a store where a stream is accessed by UID
(<code>TUid</code>), rather than directly by stream id
(<code>TStreamId</code>).</p>
<p>This type of store contains streams in the usual way but, in
addition, the root stream is a stream dictionary. The stream dictionary
provides a list of two-way associations between unique identifiers and stream
ids.</p>
<p>Note that a dictionary store object does not derive from
<code>CStreamStore</code>, but owns a persistent store and a stream dictionary
as part of its implementation.</p><h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase">CBase</a></code></td><td class="Cell">Base class for all classes to be instantiated on the heap</td>
</tr>
<tr><td class="Cell"><code>CDictionaryStore</code></td><td class="Cell">Dictionary store interface</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>CDictionaryStore</code>:
<br><code class="ApiItem"><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aCommit%28%29" title="Commits changes">Commit()</a></code>, <code class="ApiItem"><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aCommitL%28%29" title="Commits changes and leaves if unsuccessful">CommitL()</a></code>, <code class="ApiItem"><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aIsNullL%28%29" title="Tests whether the dictionary store's stream dictionary is empty">IsNullL()</a></code>, <code class="ApiItem"><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aIsPresentL%28%29" title="Tests whether the specified UID has an associated stream within this dictionary store">IsPresentL()</a></code>, <code class="ApiItem"><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aRemove%28%29" title="Removes the stream associated with the specified UID from the dictionary store">Remove()</a></code>, <code class="ApiItem"><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aRemoveL%28%29" title="Removes the stream associated with the specified UID from the dictionary store and leaves if unsuccessful">RemoveL()</a></code>, <code class="ApiItem"><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aRevert%28%29" title="Rolls the dictionary store back to its state at the last commit point">Revert()</a></code>, <code class="ApiItem"><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aRevertL%28%29" title="Rolls the dictionary store back to its state at the last commit point and leaves if unsuccessful">RevertL()</a></code>, <code class="ApiItem"><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3a%7eCDictionaryStore%28%29" title="Frees resources owned by the object, prior to its destruction">~CDictionaryStore()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase" title="Base class for all classes to be instantiated on the heap">CBase</a></code>:
<br><code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase%3a%3aoperator%20new%28%29" title="Allocates the object from the heap and then initialises its contents to binary zeroes">operator new()</a></code></p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../StoreStreams/CStreamDictionaryClass.html#%3a%3aCStreamDictionary" title="Maintains two way associations between a UID (a TUid type) and a stream id (a TStreamId type)"><code class="ApiItem">CStreamDictionary</code></a></li>
<li><a href="CPersistentStoreClass.html#%3a%3aCPersistentStore" title="Persistent store abstract base class"><code class="ApiItem">CPersistentStore</code></a></li>
<li><a href="../FileStores/CDictionaryFileStoreClass.html#%3a%3aCDictionaryFileStore" title="File based dictionary store"><code class="ApiItem">CDictionaryFileStore</code></a></li>
<li><a href="../UIDManipulation/TUidClass.html#%3a%3aTUid" title="Globally unique 32-bit number"><code class="ApiItem">TUid</code></a></li>
<li><a href="../StoreStreams/TStreamIdClass.html#%3a%3aTStreamId" title="Provides unique identification for stream within a store"><code class="ApiItem">TStreamId</code></a></li>
</ul>
<a name="2.7"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Construction and destruction</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aCDictionaryStore%3a%3a%7eCDictionaryStore%28%29"></a>
<hr size="1" noshade>
<h3><code>~CDictionaryStore()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>~CDictionaryStore();</code></p><h4 class="subheading">Description</h4>
<p>Frees resources owned by the object, prior to its
destruction.</p>
<a name="2.8"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Stream management</h2>
</div><div class="Bodytext">
<a name="2.8.2"></a></div><div class="Head3">
<a name="%3a%3aCDictionaryStore%3a%3aIsNullL%28%29"></a>
<hr size="1" noshade>
<h3><code>IsNullL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TBool IsNullL() const;</code></p><h4 class="subheading">Description</h4>
<p>Tests whether the dictionary store&#8217;s stream dictionary is
empty.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TBool</code></td>
<td class="Cell"><p class="ValueDesc">True, if the stream dictionary is empty. False, if the stream
dictionary contains at least one entry.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function restores the stream dictionary, if this has not
already been done, and may fail because of lack of memory. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../StoreStreams/CStreamDictionaryClass.html#%3a%3aCStreamDictionary" title="Maintains two way associations between a UID (a TUid type) and a stream id (a TStreamId type)"><code class="ApiItem">CStreamDictionary</code></a></li>
</ul>
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aCDictionaryStore%3a%3aIsPresentL%28%29"></a>
<hr size="1" noshade>
<h3><code>IsPresentL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TBool IsPresentL(TUid aUid) const;</code></p><h4 class="subheading">Description</h4>
<p>Tests whether the specified UID has an associated stream within
this dictionary store.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUid aUid</code></td>
<td class="Cell"><p class="ValueDesc">The UID.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TBool</code></td>
<td class="Cell"><p class="ValueDesc">True, if there is a stream associated with the specified UID in the
dictionary store; false otherwise.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function restores the stream dictionary, if this has not
already been done, and may fail because of lack of memory. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../StoreStreams/CStreamDictionaryClass.html#%3a%3aCStreamDictionary" title="Maintains two way associations between a UID (a TUid type) and a stream id (a TStreamId type)"><code class="ApiItem">CStreamDictionary</code></a></li>
</ul>
<a name="2.8.4"></a></div><div class="Head3">
<a name="%3a%3aCDictionaryStore%3a%3aRemove%28%29"></a>
<hr size="1" noshade>
<h3><code>Remove()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Remove(TUid aUid);</code></p><h4 class="subheading">Description</h4>
<p>Removes the stream associated with the specified UID from the
dictionary store.</p>
<p>If there is no stream associated with the specified UID, then the
dictionary store remains unchanged.</p>
<p>The function cannot leave; it returns whether or not it is
succesful.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUid aUid</code></td>
<td class="Cell"><p class="ValueDesc">The UID whose associated stream is to be removed from the dictionary
store.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.5"></a></div><div class="Head3">
<a name="%3a%3aCDictionaryStore%3a%3aRemoveL%28%29"></a>
<hr size="1" noshade>
<h3><code>RemoveL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void RemoveL(TUid aUid);</code></p><h4 class="subheading">Description</h4>
<p>Removes the stream associated with the specified UID from the
dictionary store and leaves if unsuccessful.</p>
<p>If there is no stream associated with the specified UID, then the
dictionary store remains unchanged.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TUid aUid</code></td>
<td class="Cell"><p class="ValueDesc">The UID whose associated stream is to be removed from the dictionary
store.</p></td>
</tr>
</table></td></tr></table>
<a name="2.9"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Committing changes to the dictionary store</h2>
</div><div class="Bodytext">
<a name="2.9.2"></a></div><div class="Head3">
<a name="%3a%3aCDictionaryStore%3a%3aCommit%28%29"></a>
<hr size="1" noshade>
<h3><code>Commit()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Commit();</code></p><h4 class="subheading">Description</h4>
<p>Commits changes.</p>
<p>It establishes a new commit point and then compacts the dictionary store.
Typically, this is done after changes to new or existing streams are complete
and the streams themselves have been committed.</p>
<p>Establishing a new commit point makes changes to the store permanent.
Until such changes are committed, they can be rolled back, effectively causing
the store to revert back to its state before the changes were made.</p>
<p>This ensures that persistent data moves from one consistent state to
another and guarantees the integrity of persistent store data in the event of
failures. In particular, if a process terminates or a media failure occurs, the
store reverts automatically to its state at the last successful commit
point.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, otherwise another of the system-wide
error codes.</p></td>
</tr>
</table></td></tr></table>
<a name="2.9.3"></a></div><div class="Head3">
<a name="%3a%3aCDictionaryStore%3a%3aCommitL%28%29"></a>
<hr size="1" noshade>
<h3><code>CommitL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void CommitL();</code></p><h4 class="subheading">Description</h4>
<p>Commits changes and leaves if unsuccessful.</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aCommit%28%29" title="Commits changes"><code class="ApiItem">CDictionaryStore::Commit()</code></a></li>
</ul>
<a name="2.10"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Reverting changes</h2>
</div><div class="Bodytext">
<a name="2.10.2"></a></div><div class="Head3">
<a name="%3a%3aCDictionaryStore%3a%3aRevert%28%29"></a>
<hr size="1" noshade>
<h3><code>Revert()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Revert();</code></p><h4 class="subheading">Description</h4>
<p>Rolls the dictionary store back to its state at the last commit
point.</p>
<p>A commit point is set using the <code>Commit()</code> or
<code>CommitL()</code> functions.</p>
<p>The function returns, whether or not it completes
successfully.</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aCommit%28%29" title="Commits changes"><code class="ApiItem">CDictionaryStore::Commit()</code></a></li>
<li><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aCommitL%28%29" title="Commits changes and leaves if unsuccessful"><code class="ApiItem">CDictionaryStore::CommitL()</code></a></li>
</ul>
<a name="2.10.3"></a></div><div class="Head3">
<a name="%3a%3aCDictionaryStore%3a%3aRevertL%28%29"></a>
<hr size="1" noshade>
<h3><code>RevertL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void RevertL();</code></p><h4 class="subheading">Description</h4>
<p>Rolls the dictionary store back to its state at the last commit point and
leaves if unsuccessful.</p>
<p>A commit point is set using the <code>Commit()</code> or
<code>CommitL()</code> functions.</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aCommit%28%29" title="Commits changes"><code class="ApiItem">CDictionaryStore::Commit()</code></a></li>
<li><a href="CDictionaryStoreClass.html#%3a%3aCDictionaryStore%3a%3aCommitL%28%29" title="Commits changes and leaves if unsuccessful"><code class="ApiItem">CDictionaryStore::CommitL()</code></a></li>
</ul>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../_stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
