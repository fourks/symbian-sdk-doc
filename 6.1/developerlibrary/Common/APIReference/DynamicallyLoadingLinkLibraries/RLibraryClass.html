<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>RLibrary</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="AboutDynamicallyLoadingLinkLibraries.guide.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="TFindLibraryClass.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Dynamically&nbsp;Loading&nbsp;Link&nbsp;Libraries</a>&nbsp;<span class="separator">&#187;</span>
RLibrary</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code> e32std.h </code>
<br>Link against: <code> euser.lib </code>
</p>
</div><div class="Head1">
<a name="%3a%3aRLibrary"></a>

<h1>Class <code>RLibrary</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>RLibrary</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Provides a handle to a dynamically loadable DLL.</p>
<p>The class is not intended for user derivation.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase">RHandleBase</a></code></td><td class="Cell">Handle to an object</td>
</tr>
<tr><td class="Cell"><code>RLibrary</code></td><td class="Cell">Provides a handle to a dynamically loadable DLL</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>RLibrary</code>:
<br><code class="ApiItem"><a href="RLibraryClass.html#%3a%3aRLibrary%3a%3aClose%28%29" title="Closes this DLL">Close()</a></code>, <code class="ApiItem"><a href="RLibraryClass.html#%3a%3aRLibrary%3a%3aDllRefTable%28%29" title="Returns a pointer to this DLL's reference table">DllRefTable()</a></code>, <code class="ApiItem"><a href="RLibraryClass.html#%3a%3aRLibrary%3a%3aEntryPoint%28%29" title="Returns this DLL's entry point">EntryPoint()</a></code>, <code class="ApiItem"><a href="RLibraryClass.html#%3a%3aRLibrary%3a%3aFileName%28%29" title="Returns the name of this DLL's file">FileName()</a></code>, <code class="ApiItem"><a href="RLibraryClass.html#%3a%3aRLibrary%3a%3aGetRamSizes%28%29" title="Gets the current size of the code and the const data for this DLL">GetRamSizes()</a></code>, <code class="ApiItem"><a href="RLibraryClass.html#%3a%3aRLibrary%3a%3aLibraryCallList%28%29" title="Gets a list of entrypoints which become inaccessible to the current thread when this DLL is unloaded">LibraryCallList()</a></code>, <code class="ApiItem"><a href="RLibraryClass.html#%3a%3aRLibrary%3a%3aLoad%28%29" title="Loads the named DLL">Load()</a></code>, <code class="ApiItem"><a href="RLibraryClass.html#%3a%3aRLibrary%3a%3aLookup%28%29" title="Returns a pointer to the function at the specified ordinal within this DLL">Lookup()</a></code>, <code class="ApiItem"><a href="RLibraryClass.html#%3a%3aRLibrary%3a%3aType%28%29" title="Returns this DLL's UID type">Type()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase" title="Handle to an object">RHandleBase</a></code>:
<br><code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aDuplicate%28%29" title="Creates a valid handle to the Kernel object to which the specified thread already has a handle">Duplicate()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aHandle%28%29" title="Retrieves the handle-number of the object associated with this handle">Handle()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aSetHandle%28%29" title="Use this function to set the handle-number of this handle to the specified value">SetHandle()</a></code></p>
<a name="dynamicallyloadinglinklibraries%2eRLibrary%2eloading"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Loading DLLs</h2>
</div><div class="Bodytext">
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aRLibrary%3a%3aLoad%28%29"></a>
<hr size="1" noshade>
<h3><code>Load()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Load(const TDesC&amp; aFileName,const TUidType&amp; aType);</code></p><h4 class="subheading">Description</h4>
<p>Loads the named DLL which matches the specified UID type. If
successful, the function increments the usage count by one.</p>
<p>No additional search paths can be specified with this
function.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aFileName </code></td>
<td class="Cell"><p class="ValueDesc"> A descriptor containing the name of the DLL to be loaded.
The length of the file name must not be greater than <code>KMaxFileName</code>.
</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TUidType&amp; aType </code></td>
<td class="Cell"><p class="ValueDesc"> A UID type (a triplet of UIDs) which the DLL must match.
Individual UIDs can contain the <code>KNullUid</code> wild card. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code>, if successful
<code>KErrBadName</code>, if the length of <code>aFileName</code> is greater
than <code>KMaxFileName</code> otherwise one of the system wide error codes
</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.4"></a></div><div class="Head3">
<a name="%3a%3aRLibrary%3a%3aLoad%28%29"></a>
<hr size="1" noshade>
<h3><code>Load()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Load(const TDesC&amp; aFileName,const TDesC&amp; aPath,const TUidType&amp; aType);</code></p><h4 class="subheading">Description</h4>
<p>Loads the named DLL which matches the specified UID type. If
successful, the function increments the usage count by one.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aFileName </code></td>
<td class="Cell"><p class="ValueDesc"> A descriptor containing the name of the DLL to be loaded. The
length of the file name must not be greater than <code>KMaxFileName</code>.
</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aPath </code></td>
<td class="Cell"><p class="ValueDesc"> A descriptor containing a list of path names, each separated
by a semicolon. These paths are searched for the DLL before the standard search
locations. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TUidType&amp; aType </code></td>
<td class="Cell"><p class="ValueDesc"> A UID type (a triplet of UIDs) which the DLL must match.
Individual UIDs can contain the <code>KNullUid</code> wild card. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code>, if successful <code>KErrBadName</code>,
if the length of <code>aFileName</code> is greater than
<code>KMaxFileName</code> otherwise one of the system wide error codes </p></td>
</tr>
</table></td></tr></table>
<a name="2.6.5"></a></div><div class="Head3">
<a name="%3a%3aRLibrary%3a%3aLoad%28%29"></a>
<hr size="1" noshade>
<h3><code>Load()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Load(const TDesC&amp; aFileName,const TDesC&amp; aPath=KNullDesC);</code></p><h4 class="subheading">Description</h4>
<p>Loads the named DLL. If successful, the function increments the
usage count by one.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aFileName </code></td>
<td class="Cell"><p class="ValueDesc"> A descriptor containing the name of the DLL to be loaded. The
length of the file name must not be greater than <code>KMaxFileName</code>.
</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aPath </code></td>
<td class="Cell"><p class="ValueDesc"> A descriptor containing a list of path names, each separated by
a semicolon. When specified, these paths are searched for the DLL before the
standard search locations. By default, no pathnames are specified. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code>, if successful <code>KErrBadName</code>,
if the length of <code>aFileName</code> is greater than
<code>KMaxFileName</code> otherwise one of the system wide error codes </p></td>
</tr>
</table></td></tr></table>
<a name="dynamicallyloadinglinklibraries%2eRLibrary%2eunloading"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Unloading DLLs</h2>
</div><div class="Bodytext">
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aRLibrary%3a%3aClose%28%29"></a>
<hr size="1" noshade>
<h3><code>Close()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Close();</code></p><h4 class="subheading">Description</h4>
<p>Closes this DLL. The function decrements the usage count by
one.</p>
<p>This handle must have been used to load the DLL using one of the
<code>Load()</code> functions.</p>
<a name="dynamicallyloadinglinklibraries%2eRLibrary%2eusing"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Using a loaded DLL</h2>
</div><div class="Bodytext">
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aRLibrary%3a%3aLookup%28%29"></a>
<hr size="1" noshade>
<h3><code>Lookup()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TLibraryFunction Lookup(TInt anOrdinal) const;</code></p><h4 class="subheading">Description</h4>
<p>Returns a pointer to the function at the specified ordinal within
this DLL.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt anOrdinal </code></td>
<td class="Cell"><p class="ValueDesc"> The ordinal of the required function in this DLL. This value must be
greater than zero, otherwise the function raises a USER 116 panic. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TLibraryFunction </code></td>
<td class="Cell"><p class="ValueDesc"> A pointer to the function at position <code>anOrdinal</code> in this
DLL. The value is <code>NULL</code> if there is no function at that ordinal.
</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.4"></a></div><div class="Head3">
<a name="%3a%3aRLibrary%3a%3aType%28%29"></a>
<hr size="1" noshade>
<h3><code>Type()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TUidType Type() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns this DLL's UID type.</p>
<p>The UID type is a property of an EPOC file; for a DLL, its value is set
during the building of that DLL.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TUidType </code></td>
<td class="Cell"><p class="ValueDesc"> The UID type of this DLL. Note that the first <code>TUid</code>
component of the <code>TUidType</code> has the value
<code>KDynamicLibraryUid</code>. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.5"></a></div><div class="Head3">
<a name="%3a%3aRLibrary%3a%3aEntryPoint%28%29"></a>
<hr size="1" noshade>
<h3><code>EntryPoint()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TLibraryEntry EntryPoint() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns this DLL's entry point.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TLibraryEntry </code></td>
<td class="Cell"><p class="ValueDesc"> A pointer to this DLL's entry point </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.6"></a></div><div class="Head3">
<a name="%3a%3aRLibrary%3a%3aFileName%28%29"></a>
<hr size="1" noshade>
<h3><code>FileName()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TFileName FileName() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the name of this DLL's file.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TFileName </code></td>
<td class="Cell"><p class="ValueDesc"> This DLL's filename </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.7"></a></div><div class="Head3">
<a name="%3a%3aRLibrary%3a%3aGetRamSizes%28%29"></a>
<hr size="1" noshade>
<h3><code>GetRamSizes()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt GetRamSizes(TInt&amp; aCodeSize, TInt&amp; aConstDataSize);</code></p><h4 class="subheading">Description</h4>
<p>Gets the current size of the code and the const data for this DLL. This
function can be called on a RAM loaded DLL or a ROM based DLL.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt&amp; aCodeSize </code></td>
<td class="Cell"><p class="ValueDesc"> The current size of the code for a RAM loaded DLL. This is zero for a
ROM based DLL </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt&amp; aConstDataSize </code></td>
<td class="Cell"><p class="ValueDesc"> The current size of the const data for a RAM loaded DLL. This is zero
for a ROM based DLL </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise one of the system-wide
error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.8"></a></div><div class="Head3">
<a name="%3a%3aRLibrary%3a%3aDllRefTable%28%29"></a>
<hr size="1" noshade>
<h3><code>DllRefTable()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TUint* DllRefTable() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns a pointer to this DLL's reference table.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TUint* </code></td>
<td class="Cell"><p class="ValueDesc"> A pointer to this DLL's reference table. This is NULL, if this DLL has
no reference table. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.9"></a></div><div class="Head3">
<a name="%3a%3aRLibrary%3a%3aLibraryCallList%28%29"></a>
<hr size="1" noshade>
<h3><code>LibraryCallList()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt LibraryCallList(TInt&amp; aNumEps, TUint*&amp; aCallList);</code></p><h4 class="subheading">Support</h4>
<p>Withdrawn in 6.0
</p><h4 class="subheading">Description</h4>
<p>Gets a list of entrypoints which become inaccessible to the current
thread when this DLL is unloaded.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt&amp; aNumEps </code></td>
<td class="Cell"><p class="ValueDesc"> On entry, the number of pointer locations provided by the caller at
<code>aCallList</code>. On return , the number of entry points supplied.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TUint*&amp; aCallList </code></td>
<td class="Cell"><p class="ValueDesc"> A reference to contiguous memory sufficiently big to
hold<code>aNumEps</code> pointers. This is provided by the caller. On return,
the list of entrypoints. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful <code>KErrGeneral</code>, if the
number of entrypoints returned by the function is the same as the number of
pointer locations supplied by the caller. This is a hint that there may be more
entrypoints than there is space to rertun them. otherwise, one of the system
wide error codes. </p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
