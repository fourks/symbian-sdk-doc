<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>CFontCache</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CFbsTypefaceStoreClass.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="CFontClass.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Fonts</a>&nbsp;<span class="separator">&#187;</span>
CFontCache</p>

<hr noshade size="1">
<div class="AuthoredContent">
<p>Location: <code>
gdi.h
</code><br>Link against: <code>
gdi.lib
</code></p>
</div><div class="Head1">
<a name="%3a%3aCFontCache"></a>

<h1>Class <code>CFontCache</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>CFontCache</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Font cache. </p>
<p>When a <code>CFont*</code> needs to be found for a particular <code>TFontSpec</code>, the cache can be searched to see if the <code>TFontSpec</code> is already in the cache. If the <code>TFontSpec</code> is in the cache, its corresponding <code>CFont*</code> can be returned. Otherwise <code>GetNearestFontInTwips()</code> must be used to search all of the available fonts for the nearest <code>CFont</code>&#0160;&#8212;  a procedure which takes much longer than a simple cache search.</p>
<p>The current font cache should be destroyed and a new cache created whenever the zoom factor or device map changes, as these changes break the relation between <code>CFont</code> and <code>TFontSpec</code>.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase">CBase</a></code></td><td class="Cell">Base class for all classes to be instantiated on the heap</td>
</tr>
<tr><td class="Cell"><code>CFontCache</code></td><td class="Cell">Font cache</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>CFontCache</code>:
<br><code class="ApiItem"><a href="CFontCacheClass.html#%3a%3aCFontCache%3a%3aAddEntryL%28%29" title="Adds a font entry to the cache">AddEntryL()</a></code>, <code class="ApiItem"><a href="CFontCacheClass.html#%3a%3aCFontCache%3a%3aCFontCache%28%29" title="Constructor specifying the number of cache entries">CFontCache()</a></code>, <code class="ApiItem"><a href="CFontCacheClass.html#%3a%3aCFontCache%3a%3aRemoveFirstEntry%28%29" title="Removes the first entry from the font cache and returns it">RemoveFirstEntry()</a></code>, <code class="ApiItem"><a href="CFontCacheClass.html#%3a%3aCFontCache%3a%3aSearch%28%29" title="Searches the cache for a specified font">Search()</a></code>, <code class="ApiItem"><a href="CFontCacheClass.html#%3a%3aCFontCache%3a%3aiNumHits" title="The number of cache hits since the font cache was created -- i.e">iNumHits</a></code>, <code class="ApiItem"><a href="CFontCacheClass.html#%3a%3aCFontCache%3a%3aiNumMisses" title="The number of cache misses since the font cache was created -- i.e">iNumMisses</a></code>, <code class="ApiItem"><a href="CFontCacheClass.html#%3a%3aCFontCache%3a%3a%7eCFontCache%28%29" title="Destructor">~CFontCache()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase" title="Base class for all classes to be instantiated on the heap">CBase</a></code>:
<br><code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase%3a%3aoperator%20new%28%29" title="Allocates the object from the heap and then initialises its contents to binary zeroes">operator new()</a></code></p>
<a name="2.6"></a></div><div class="Head2">
<hr size="2" noshade>
<h2>Construction and destruction</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aCFontCache%3a%3aCFontCache%28%29"></a>
<hr size="1" noshade>
<h3><code>CFontCache()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CFontCache();</code></p><h4 class="subheading">Description</h4>
<p>Default constructor.</p><p>This constructs a <code>CFontCache</code> of size <code>KMaxFontCacheEntries</code>.</p>
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aCFontCache%3a%3aCFontCache%28%29"></a>
<hr size="1" noshade>
<h3><code>CFontCache()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CFontCache(TInt aMaxEntries);</code></p><h4 class="subheading">Description</h4>
<p>Constructor specifying the number of cache entries.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
TInt aMaxEntries
</code></td>
<td class="Cell"><p class="ValueDesc">
Number of entries for this cache. You must ensure this is less than or equal to <code>KMaxFontCacheEntries</code>.
</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.4"></a></div><div class="Head3">
<a name="%3a%3aCFontCache%3a%3a%7eCFontCache%28%29"></a>
<hr size="1" noshade>
<h3><code>~CFontCache()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>~CFontCache();</code></p><h4 class="subheading">Description</h4>
<p>Destructor. </p><p>This destroys the cashe and releases its allocated memory.</p>
<a name="2.7"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Searching the cache</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aCFontCache%3a%3aSearch%28%29"></a>
<hr size="1" noshade>
<h3><code>Search()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CFont* Search(const TFontSpec&amp; aFontSpec);</code></p><h4 class="subheading">Description</h4>
<p>Searches the cache for a specified font.  </p><p>The <code>CFont</code> returned is that which corresponds to the font specification <code>aFontSpec</code>.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
const TFontSpec&amp; aFontSpec
</code></td>
<td class="Cell"><p class="ValueDesc">
The specification of the font to be searched for.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CFont*
</code></td>
<td class="Cell"><p class="ValueDesc">
If an entry for the font specification is found in the cache, the pointer to the font corresponding to the font specification is returned.  Otherwise <code>NULL</code> is returned.
</p></td>
</tr>
</table></td></tr></table>
<a name="2.8"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Maintaining the cache</h2>
</div><div class="Bodytext">
<a name="2.8.2"></a></div><div class="Head3">
<a name="%3a%3aCFontCache%3a%3aAddEntryL%28%29"></a>
<hr size="1" noshade>
<h3><code>AddEntryL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CFont* AddEntryL(CFont* aFont,const TFontSpec&amp; aFontSpec);</code></p><h4 class="subheading">Description</h4>
<p>Adds a font entry to the cache.  </p><p>The font, and the font specification required to extract it from the cache, are both specified.  If the cache is already full, the font replaces the oldest entry already in the cache, which is returned.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CFont* aFont
</code></td>
<td class="Cell"><p class="ValueDesc">
The font to be stored in the cache.
</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">
const TFontSpec&amp; aFontSpec
</code></td>
<td class="Cell"><p class="ValueDesc">
The font's corresponding font specification.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CFont*
</code></td>
<td class="Cell"><p class="ValueDesc">
If the cache isn't full, <code>NULL</code> is returned.  If the cache is full, the displaced cache entry is returned.
</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aCFontCache%3a%3aRemoveFirstEntry%28%29"></a>
<hr size="1" noshade>
<h3><code>RemoveFirstEntry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CFont* RemoveFirstEntry();</code></p><h4 class="subheading">Description</h4>
<p>Removes the first entry from the font cache and returns it.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CFont*
</code></td>
<td class="Cell"><p class="ValueDesc">
The entry removed from the font cache. If the cache is empty, <code>NULL</code> is returned.
</p></td>
</tr>
</table></td></tr></table>
<a name="2.9"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Public data members</h2>
</div><div class="Bodytext">
<h4 class="subheading">Description</h4>
<p>The two public member data items provide statistics of cache usage.</p>
<a name="2.9.3"></a></div><div class="Head3">
<a name="%3a%3aCFontCache%3a%3aiNumHits"></a>
<hr size="1" noshade>
<h3><code>iNumHits</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt iNumHits</code></p><h4 class="subheading">Description</h4>
<p>The number of cache hits since the font cache was created&#0160;&#8212;  i.e. successful results from <code>CFontCache::Search()</code>. </p>
<a name="2.9.4"></a></div><div class="Head3">
<a name="%3a%3aCFontCache%3a%3aiNumMisses"></a>
<hr size="1" noshade>
<h3><code>iNumMisses</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt iNumMisses</code></p><h4 class="subheading">Description</h4>
<p>The number of cache misses since the font cache was created&#0160;&#8212;  i.e. unsuccessful results from <code>CFontCache::Search()</code>.</p>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
