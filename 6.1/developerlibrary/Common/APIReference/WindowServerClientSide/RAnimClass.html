<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>RAnim</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="MWsClientClassClass.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="RAnimDllClass.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Window&nbsp;Server</a>&nbsp;<span class="separator">&#187;</span>
RAnim</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>w32std.h</code>
<br>Link against: <code>ws32.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aRAnim"></a>

<h1>Class <code>RAnim</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>RAnim</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Client-side handle to a server-side animation class. </p>
<p>This class should be sub-classed to provide a client side interface
to the server side animation DLL. The server side animation DLL is derived from
<code>CAnim</code>.</p>
<p>Defined in <code>RAnim</code>:
<br><code class="ApiItem"><a href="RAnimClass.html#%3a%3aRAnim%3a%3aClose%28%29" title="Sends the close command">Close()</a></code>, <code class="ApiItem"><a href="RAnimClass.html#%3a%3aRAnim%3a%3aCommand%28%29" title="Sends a command to the server-side CAnim instance, and returns immediately">Command()</a></code>, <code class="ApiItem"><a href="RAnimClass.html#%3a%3aRAnim%3a%3aCommandReply%28%29" title="Sends a command and its arguments to the server-side CAnim instance, and waits for a response">CommandReply()</a></code>, <code class="ApiItem"><a href="RAnimClass.html#%3a%3aRAnim%3a%3aConstruct%28%29" title="Completes construction of the Anim DLL based on a sprite">Construct()</a></code>, <code class="ApiItem"><a href="RAnimClass.html#%3a%3aRAnim%3a%3aDestroy%28%29" title="Closes and deletes the server-side animation object">Destroy()</a></code>, <code class="ApiItem"><a href="RAnimClass.html#%3a%3aRAnim%3a%3aRAnim%28%29" title="Protected C++ constructor">RAnim()</a></code>, <code class="ApiItem"><a href="RAnimClass.html#%3a%3aRAnim%3a%3a%7eRAnim%28%29" title="Empty virtual destructor">~RAnim()</a></code>
</p>
<a name="2.5"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Construction and destruction</h2>
</div><div class="Bodytext">
<a name="2.5.2"></a></div><div class="Head3">
<a name="%3a%3aRAnim%3a%3aRAnim%28%29"></a>
<hr size="1" noshade>
<h3><code>RAnim()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: RAnim();</code></p><h4 class="subheading">Description</h4>
<p>Default constructor. Developers should use the other
constructor overload.</p>
<a name="2.5.3"></a></div><div class="Head3">
<a name="%3a%3aRAnim%3a%3aRAnim%28%29"></a>
<hr size="1" noshade>
<h3><code>RAnim()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: RAnim(RAnimDll&amp; aAnimDll);</code></p><h4 class="subheading">Description</h4>
<p>Protected C++ constructor. </p>
<p>This constructor should be used to construct an animation
object from a given animation DLL. The DLL must be loaded first, see the
discussion of <code>RAnimDll</code>.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> RAnimDll&amp; aAnimDll</code></td>
<td class="Cell"><p class="ValueDesc">The animation DLL. </p></td>
</tr>
</table></td></tr></table>
<a name="2.5.4"></a></div><div class="Head3">
<a name="%3a%3aRAnim%3a%3aConstruct%28%29"></a>
<hr size="1" noshade>
<h3><code>Construct()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: TInt Construct(const RWindowBase&amp; aDevice, TInt aType, const TDesC8&amp; aParams);</code></p><h4 class="subheading">Description</h4>
<p>Completes construction of the object based on a window device,
and creates the server-side animation system. </p>
<p>Construction information is passed to the server side via
<code>aType</code> and <code>aParams</code>. The server then passes the
information to the function <code>CreateInstanceL()</code> inside the Anim
DLL.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const RWindowBase&amp; aDevice</code></td>
<td class="Cell"><p class="ValueDesc"> A window device. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aType </code></td>
<td class="Cell"><p class="ValueDesc"> The type of this animation object, as understood by
<code>CAnimDll::CreateInstanceL()</code>. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC8&amp; aParams</code></td>
<td class="Cell"><p class="ValueDesc"> Packaged arguments which will be passed to the server side
object to tell it how to construct itself or initialise itself. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt</code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise one of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../Animation/CAnimClass.html#%3a%3aCAnim%3a%3aConstructL%28%29" title="Server side construction and initialisation of an animation class"><code class="ApiItem">CAnim::ConstructL()</code></a></li>
<li><a href="../Animation/CAnimDllClass.html#%3a%3aCAnimDll%3a%3aCreateInstanceL%28%29" title="Factory function for animation DLL"><code class="ApiItem">CAnimDll::CreateInstanceL()</code></a></li>
</ul>
<a name="2.5.5"></a></div><div class="Head3">
<a name="%3a%3aRAnim%3a%3aConstruct%28%29"></a>
<hr size="1" noshade>
<h3><code>Construct()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected:  TInt Construct(const RWsSprite&amp; aDevice, TInt aType, const TDesC8 &amp;aParams);</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.1
</p><h4 class="subheading">Description</h4>
<p>Completes construction of the Anim DLL based on a sprite.
</p>
<p>Construction information is passed to the server side via
<code>aType</code> and <code>aParams</code>. The server then passes the
information to the function <code>CreateInstanceL()</code> inside the Anim
DLL.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const RWsSprite&amp; aDevice </code></td>
<td class="Cell"><p class="ValueDesc"> A sprite. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aType</code></td>
<td class="Cell"><p class="ValueDesc"> The type of this animation object, as understood by
<code>CAnimDll::CreateInstanceL()</code>. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC8&amp; aParams</code></td>
<td class="Cell"><p class="ValueDesc"> Packaged arguments which will be passed to the server side
object to tell it how to construct itself or initialise itself. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt</code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise one of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../Animation/CAnimClass.html#%3a%3aCAnim%3a%3aConstructL%28%29" title="Server side construction and initialisation of an animation class"><code class="ApiItem">CAnim::ConstructL()</code></a></li>
<li><a href="../Animation/CAnimDllClass.html#%3a%3aCAnimDll%3a%3aCreateInstanceL%28%29" title="Factory function for animation DLL"><code class="ApiItem">CAnimDll::CreateInstanceL()</code></a></li>
</ul>
<a name="2.5.6"></a></div><div class="Head3">
<a name="%3a%3aRAnim%3a%3a%7eRAnim%28%29"></a>
<hr size="1" noshade>
<h3><code>~RAnim()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual ~RAnim();</code></p><h4 class="subheading">Description</h4>
<p>Empty virtual destructor.</p>
<a name="2.6"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Member functions</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aRAnim%3a%3aClose%28%29"></a>
<hr size="1" noshade>
<h3><code>Close()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void Close();</code></p><h4 class="subheading">Description</h4>
<p>Sends the close command.</p>
<p>This frees resources belonging to an animation object. It would
be called to release resources when the RAnim is owned in-line by another
object (so that destruction is automatic).</p>
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aRAnim%3a%3aCommand%28%29"></a>
<hr size="1" noshade>
<h3><code>Command()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: void Command(TInt aOpcode, const TPtrC8&amp; aArgs);</code></p><h4 class="subheading">Description</h4>
<p>Sends a command and its arguments to the server-side
<code>CAnim</code> instance, and returns immediately. </p>
<p>Commands issued by this function may be buffered before being
passed to the server.</p>
<p>Server-side errors cannot be detected, so
<code>Command()</code> should not be used for operations which could fail or
which may leave. Use <code>CommandReply()</code> for those. Although the window
server will not fail due to errors not being returned to the client side,
client side behaviour will almost certainly not be correct if errors have been
generated but not received.</p>
<p>Use of this function results in a server-side call to the
equivalent <code>CAnim::Command()</code>.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aOpcode</code></td>
<td class="Cell"><p class="ValueDesc"> An operation meaningful to the server-side <code>CAnim</code>
object. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TPtrC8&amp; aArgs</code></td>
<td class="Cell"><p class="ValueDesc"> Packaged arguments which will be passed to the server side
object. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RAnimClass.html#%3a%3aRAnim%3a%3aCommandReply%28%29" title="Sends a command and its arguments to the server-side CAnim instance, and waits for a response"><code class="ApiItem">CommandReply()</code></a></li>
<li><a href="../Animation/CAnimClass.html#%3a%3aCAnim%3a%3aCommand%28%29" title="Implements client-side initiated commands"><code class="ApiItem">CAnim::Command()</code></a></li>
</ul>
<a name="2.6.4"></a></div><div class="Head3">
<a name="%3a%3aRAnim%3a%3aCommand%28%29"></a>
<hr size="1" noshade>
<h3><code>Command()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: void Command(TInt aOpcode);</code></p><h4 class="subheading">Description</h4>
<p>Sends a command to the server-side <code>CAnim</code> instance,
and returns immediately. </p>
<p>Commands issued by this function may be buffered before being
passed to the server.</p>
<p>Server-side errors cannot be detected, so
<code>Command()</code> should not be used for operations which could fail or
which may leave. Use <code>CommandReply()</code> for those. Although the window
server will not fail due to errors not being returned to the client side,
client side behaviour will almost certainly not be correct if errors have been
generated but not received.</p>
<p>Use of this function results in a server-side call to the
equivalent <code>CAnim::Command()</code>.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aOpcode</code></td>
<td class="Cell"><p class="ValueDesc"> An operation meaningful to the server-side <code>CAnim</code>
object. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RAnimClass.html#%3a%3aRAnim%3a%3aCommandReply%28%29" title="Sends a command and its arguments to the server-side CAnim instance, and waits for a response"><code class="ApiItem">CommandReply()</code></a></li>
<li><a href="../Animation/CAnimClass.html#%3a%3aCAnim%3a%3aCommand%28%29" title="Implements client-side initiated commands"><code class="ApiItem">CAnim::Command()</code></a></li>
</ul>
<a name="2.6.5"></a></div><div class="Head3">
<a name="%3a%3aRAnim%3a%3aCommandReply%28%29"></a>
<hr size="1" noshade>
<h3><code>CommandReply()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: TInt CommandReply(TInt aOpcode);</code></p><h4 class="subheading">Description</h4>
<p>Sends a command to the server-side <code>CAnim</code> instance,
and waits for a response. </p>
<p>This function executes synchronously and returns the code
returned by the server-side method <code>CAnim::CommandReplyL()</code>. The
request is not buffered.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aOpcode</code></td>
<td class="Cell"><p class="ValueDesc"> An opcode meaningful to the server-side
<code>CAnim</code>-derived class. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt</code></td>
<td class="Cell"><p class="ValueDesc"> A value defined by the animation writer. The value may, in
some cases, be defined to be an error code.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RAnimClass.html#%3a%3aRAnim%3a%3aCommand%28%29" title="Sends a command to the server-side CAnim instance, and returns immediately"><code class="ApiItem">Command()</code></a></li>
<li><a href="../Animation/CAnimClass.html#%3a%3aCAnim%3a%3aCommandReplyL%28%29" title="Implements client-side initiated commands, returning a value"><code class="ApiItem">CAnim::CommandReplyL()</code></a></li>
</ul>
<a name="2.6.6"></a></div><div class="Head3">
<a name="%3a%3aRAnim%3a%3aCommandReply%28%29"></a>
<hr size="1" noshade>
<h3><code>CommandReply()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: TInt CommandReply(TInt aOpcode, const TPtrC8 &amp;aArgs);</code></p><h4 class="subheading">Description</h4>
<p>Sends a command and its arguments to the server-side
<code>CAnim</code> instance, and waits for a response. </p>
<p>The packaged command arguments are passed to the matching
server side function, where the behaviour should be implemented. The request is
not buffered. The function executes synchronously and returns the code returned
by the server-side method <code>CAnim::CommandReplyL()</code>.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aOpcode</code></td>
<td class="Cell"><p class="ValueDesc"> An opcode meaningful to the server-side
<code>CAnim</code>-derived class. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TPtrC8&amp; aArgs</code></td>
<td class="Cell"><p class="ValueDesc"> Packaged arguments which will be passed to the server side
object. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt</code></td>
<td class="Cell"><p class="ValueDesc"> A value defined by the animation writer. The value may, in
some cases, be defined to be an error code. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RAnimClass.html#%3a%3aRAnim%3a%3aCommand%28%29" title="Sends a command to the server-side CAnim instance, and returns immediately"><code class="ApiItem">Command()</code></a></li>
<li><a href="../Animation/CAnimClass.html#%3a%3aCAnim%3a%3aCommandReplyL%28%29" title="Implements client-side initiated commands, returning a value"><code class="ApiItem">CAnim::CommandReplyL()</code></a></li>
</ul>
<a name="2.6.7"></a></div><div class="Head3">
<a name="%3a%3aRAnim%3a%3aDestroy%28%29"></a>
<hr size="1" noshade>
<h3><code>Destroy()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Destroy();</code></p><h4 class="subheading">Description</h4>
<p>Closes and deletes the server-side animation object. </p>
<p>This should be called on heap allocated objects.</p>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
