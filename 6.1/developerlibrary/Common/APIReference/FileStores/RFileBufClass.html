<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>RFileBuf</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CPermanentFileStoreClass.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="RFileReadStreamClass.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">File&nbsp;Stores</a>&nbsp;<span class="separator">&#187;</span>
RFileBuf</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>s32file.h</code>
<br>Link against: <code>estor.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aRFileBuf"></a>

<h1>Class <code>RFileBuf</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>RFileBuf</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>A stream buffer hosted by a file.</p><p>Instances of this class are used by file based persistent stores, i.e. <code>CFileStore</code> type objects. An  <code>RFileBuf</code> object is associated with a file and the file is said to be attached to the stream buffer.</p><p>An <code>RFileBuf</code> object is also used by <code>RFileReadStream</code> and <code>RFileWriteStream</code> objects to provide buffered file I/O.</p><p>The stream  buffer has intermediate buffering capabilities.</p><p>When used as the basis for a file store, it hosts multiple streams through the <code>TStreamExchange</code> and <code>RShareBuf</code> classes</p><h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf">MStreamBuf</a></code></td><td class="Cell">A stream buffer that provides a generic I/O interface for streamed data</td>
</tr>
<tr><td class="Cell"><code>RFileBuf</code></td><td class="Cell">A stream buffer hosted by a file</td>
</tr>
<tr><td class="Cell"><code><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf">TStreamBuf</a></code></td><td class="Cell">Adds buffering capabilities to a stream buffer</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>RFileBuf</code>:
<br><code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3a%20Reset%28%29" title="Frees the intermediate buffer and changes the size of any future intermediate buffer to the specified value"> Reset()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aAttach%28%29" title="Attaches the specified file to this stream buffer">Attach()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aClose%28%29" title="Writes any outstanding data from the intermediate buffer before freeing the intermediate buffer and closing the attached file">Close()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aCreate%28%29" title="Creates a file with the specified name and attaches it to this stream buffer">Create()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aDetach%28%29" title="Detaches the file from this stream buffer">Detach()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aFile%28%29" title="Gets a reference to the file attached to this stream buffer">File()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aOpen%28%29" title="Opens the specified file and attaches it to this stream buffer">Open()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aRFileBuf%28%29" title="This is internal and is not intended for use">RFileBuf()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aReattach%28%29" title="Re-attaches the specified file to this stream buffer">Reattach()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aReplace%28%29" title="Replaces the file with the specified name and attaches it to this stream buffer">Replace()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aReset%28%29" title="Frees the intermediate buffer">Reset()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aSetSizeL%28%29" title="Changes the size of the file attached to this buffer to the specified value">SetSizeL()</a></code>, <code class="ApiItem"><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aTemp%28%29" title="Creates and opens a temporary file with a unique name and attaches it to this stream buffer">Temp()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf" title="A stream buffer that provides a generic I/O interface for streamed data">MStreamBuf</a></code>:
<br><code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3a%20SeekL%28%29" title="Moves the position of the read mark or the write mark in the stream"> SeekL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aDoRelease%28%29" title="Frees resources before abandoning the stream buffer">DoRelease()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aDoSeekL%28%29" title="Moves the position of the read/write mark in the stream">DoSeekL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aDoSynchL%28%29" title="Synchronises the stream buffer with the stream, leaving if any error occurs">DoSynchL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aERead" title="The flag bit used to indicate that an operation applies to the read mark in a stream or to the read area in an stream buffer">ERead</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aEWrite" title="The flag bit used to indicate that an operation applies to the write mark in a stream or to the write area in an stream buffer">EWrite</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aPushL%28%29" title="Puts a cleanup item for this object onto the cleanup stack">PushL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aRead%28%29" title="Reads data, asynchronously, from the stream buffer into the specified descriptor; request completion is guaranteed, even if request initiation fails">Read()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aReadL%28%29" title="Reads data from the stream buffer into the specified data sink">ReadL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aRelease%28%29" title="Frees resources before abandoning the stream buffer">Release()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aSeekL%28%29" title="Moves the position of the write mark in the stream by the specified offset">SeekL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aSizeL%28%29" title="Gets the size of the stream">SizeL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aSynch%28%29" title="Synchronises the stream buffer with the stream, returning any error">Synch()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aSynchL%28%29" title="Synchronises the stream buffer with the stream, leaving if any error occurs">SynchL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aTMark" title="Used to identify the type of mark in a stream">TMark</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aTRead" title="Indicates that an operation applies to the read mark in a stream or to the read area in an stream buffer">TRead</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aTWrite" title="Indicates that an operation applies to the write mark in a stream or to the write area in an stream buffer">TWrite</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aTellL%28%29" title="Gets the position of the write mark within the stream">TellL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aWrite%28%29" title="Writes data, asynchronously, from the specified descriptor into the stream buffer; request completion is guaranteed, even if request initiation fails">Write()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/MStreamBufClass.html#%3a%3aMStreamBuf%3a%3aWriteL%28%29" title="Writes data into the stream buffer from the specified data source">WriteL()</a></code></p>
<p>Inherited from <code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf" title="Adds buffering capabilities to a stream buffer">TStreamBuf</a></code>:
<br><code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf%3a%3aAvail%28%29" title="Gets the number of bytes available in the write area within the intermediate buffer">Avail()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf%3a%3aDoReadL%28%29" title="Reads data from the intermediate buffer and, if necessary, any remaining data from the stream to the specified target stream input object">DoReadL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf%3a%3aDoWriteL%28%29" title="Writes data to the intermediate buffer and then, if necessary, to the stream from the specified source stream output object">DoWriteL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf%3a%3aEnd%28%29" title="Gets the current end point of the write area within the intermediate buffer">End()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf%3a%3aOverflowL%28%29" title="Empties the intermediate buffer and resets the start and end points of the write area">OverflowL()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf%3a%3aPtr%28%29" title="Gets the current start point of the write area within the intermediate buffer">Ptr()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf%3a%3aSetBuf%28%29" title="Sets the start and end points of the write area within the intermediate buffer">SetBuf()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf%3a%3aSetEnd%28%29" title="Sets the end point of the write area within the intermediate buffer">SetEnd()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf%3a%3aSetPtr%28%29" title="Sets the start point of the write area within the intermediate buffer">SetPtr()</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf%3a%3aTArea" title="Used to identify the type of area within an intermediate buffer">TArea</a></code>,
<code class="ApiItem"><a href="../StreamBuffers/TStreamBufClass.html#%3a%3aTStreamBuf%3a%3aUnderflowL%28%29" title="Re-fills the intermediate buffer and resets the start and end points of the read area">UnderflowL()</a></code></p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CFileStoreClass.html#%3a%3aCFileStore" title="File based persistent store -- abstract base class"><code class="ApiItem">CFileStore</code></a></li>
<li><a href="RFileReadStreamClass.html#%3a%3aRFileReadStream" title="Supports the reading of a stream from a file"><code class="ApiItem">RFileReadStream</code></a></li>
<li><a href="RFileWriteStreamClass.html#%3a%3aRFileWriteStream" title="Supports the writing of a stream to a file"><code class="ApiItem">RFileWriteStream</code></a></li>
</ul>
<a name="2.7"></a></div><div class="Head2">
<hr size="2" noshade>
<h2>Construction</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aRFileBuf%28%29"></a>
<hr size="1" noshade>
<h3><code>RFileBuf()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>RFileBuf();</code></p><h4 class="subheading">Description</h4>
<p>Constructs  the object with a default intermediate buffer size.</p>
<p>The size of the intermediate buffer is the value of the constant <code>KDefaultFileBufSize</code>.</p>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aRFileBuf%28%29"></a>
<hr size="1" noshade>
<h3><code>RFileBuf()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>RFileBuf(TInt aSize);</code></p><h4 class="subheading">Description</h4>
<p>Constructs the object with the specified  intermediate buffer size.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aSize</code></td>
<td class="Cell"><p class="ValueDesc">The size of the intermediate buffer.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Notes:</h4>
<ul>
<li><note>If the intermediate buffer size is zero, then the class provides an <code>MStreamBuf</code> interface to unbuffered file I/O.</note></li>
</ul>
<a name="2.8"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Member functions</h2>
</div><div class="Bodytext">
<a name="2.8.2"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aReset%28%29"></a>
<hr size="1" noshade>
<h3><code>Reset()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Reset();</code></p><h4 class="subheading">Description</h4>
<p>Frees the intermediate buffer.</p>
<p>If there is any read data in the intermediate buffer, then the function reverts the read position within the stream.</p>
<h4 class="subheading">Notes:</h4>
<ul>
<li><note>The intermediate buffer must not contain any outstanding write data, otherwise the function raises a STORE-File 6 panic.</note></li>
</ul>
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3a%20Reset%28%29"></a>
<hr size="1" noshade>
<h3><code> Reset()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Reset(TInt aSize);</code></p><h4 class="subheading">Description</h4>
<p>Frees the intermediate buffer and changes the size of any future intermediate buffer to the specified value.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aSize</code></td>
<td class="Cell"><p class="ValueDesc">The size of any future intermediate buffer.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Notes:</h4>
<ul>
<li><note>The intermediate buffer must not contain any outstanding write data, otherwise the function raises a STORE-File 6 panic.</note></li>
</ul>
<a name="2.8.4"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aSetSizeL%28%29"></a>
<hr size="1" noshade>
<h3><code>SetSizeL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void SetSizeL(TInt aSize);<br>&nbsp;&nbsp;&nbsp;&nbsp;</code></p><h4 class="subheading">Description</h4>
<p>Changes the size of the file attached to this buffer to the specified value.</p>
<p>Writes any outstanding data from the intermediate buffer to the stream hosted by the file. Any data in the intermediate buffer that would lie beyond the end of the truncated file, is not written.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aSize</code></td>
<td class="Cell"><p class="ValueDesc">The new size of the file.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.5"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aAttach%28%29"></a>
<hr size="1" noshade>
<h3><code>Attach()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Attach(RFile&amp; aFile,TInt aPos=0);</code></p><h4 class="subheading">Description</h4>
<p>Attaches the specified file to this stream buffer.</p><p>The function also re-sets the intermediate buffer's read and write marks to the beginning of the intermediate buffer and sets the read and write stream positions to the specified offset within the file.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RFile&amp; aFile</code></td>
<td class="Cell"><p class="ValueDesc">The file to be attached.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aPos</code></td>
<td class="Cell"><p class="ValueDesc">The offset within the file to which  the read and write stream positions are set. By default this is zero.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aDetach%28%29" title="Detaches the file from this stream buffer"><code class="ApiItem">Detach()</code></a></li>
<li><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aReattach%28%29" title="Re-attaches the specified file to this stream buffer"><code class="ApiItem">Reattach()</code></a></li>
</ul>
<a name="2.8.6"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aDetach%28%29"></a>
<hr size="1" noshade>
<h3><code>Detach()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Detach();</code></p><h4 class="subheading">Description</h4>
<p>Detaches the file from this stream buffer.</p><p>The intermediate buffer's read and write marks are not changed, and the stream positions are not changed. This means that  the contents of the file should not
change while it is detached.
</p><h4 class="subheading">See also:</h4>
<ul>
<li><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aAttach%28%29" title="Attaches the specified file to this stream buffer"><code class="ApiItem">Attach()</code></a></li>
<li><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aReattach%28%29" title="Re-attaches the specified file to this stream buffer"><code class="ApiItem">Reattach()</code></a></li>
</ul>
<a name="2.8.7"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aReattach%28%29"></a>
<hr size="1" noshade>
<h3><code>Reattach()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Reattach(RFile&amp; aFile);</code></p><h4 class="subheading">Description</h4>
<p>Re-attaches the specified file to this stream buffer.</p><p>The intermediate buffer's read and write marks are not changed, and the stream positions are not changed.</p><p>The file should be the one
that was detached using the <code>Detach()</code> function.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RFile&amp; aFile</code></td>
<td class="Cell"><p class="ValueDesc">The file to be re-attached.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aAttach%28%29" title="Attaches the specified file to this stream buffer"><code class="ApiItem">Attach()</code></a></li>
<li><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aDetach%28%29" title="Detaches the file from this stream buffer"><code class="ApiItem">Detach()</code></a></li>
</ul>
<a name="2.8.8"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aOpen%28%29"></a>
<hr size="1" noshade>
<h3><code>Open()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Open(RFs&amp; aFs,const TDesC&amp; aName,TUint aFileMode);</code></p><h4 class="subheading">Description</h4>
<p>Opens the specified file and attaches it to this stream buffer.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RFs&amp; aFs</code></td>
<td class="Cell"><p class="ValueDesc">Handle to a file server session through which the file is opened.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the file to be opened.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TUint aFileMode</code></td>
<td class="Cell"><p class="ValueDesc">The mode in which the file is to be accessed. The mode is
defined by the <code>TFileMode</code> type.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code>, if successful, otherwise one of the other system wide error codes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Notes:</h4>
<ul>
<li><note>If the file cannot be opened, then it is not attached to this stream buffer.</note></li>
</ul>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aAttach%28%29" title="Attaches the specified file to this stream buffer"><code class="ApiItem">Attach()</code></a></li>
<li><a href="../FileServerClientSide/TFileModeEnum.html#%3a%3aTFileMode" title="Access and share modes available when opening a file"><code class="ApiItem">TFileMode</code></a></li>
<li><a href="../FileServerClientSide/RFileClass.html#%3a%3aRFile" title="Creates and opens a file, and performs all operations on a single open file"><code class="ApiItem">RFile</code></a></li>
</ul>
<a name="2.8.9"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aCreate%28%29"></a>
<hr size="1" noshade>
<h3><code>Create()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Create(RFs&amp; aFs,const TDesC&amp; aName,TUint aFileMode);</code></p><h4 class="subheading">Description</h4>
<p>Creates a file with the specified name and attaches it to this stream buffer.</p><p>The file must not already exist.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RFs&amp; aFs</code></td>
<td class="Cell"><p class="ValueDesc">Handle to a file server session through which the file is created.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the file to be created.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TUint aFileMode</code></td>
<td class="Cell"><p class="ValueDesc">The mode in which the file is to be accessed. The mode is
defined by the <code>TFileMode</code> type.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code>, if successful, otherwise one of the other system wide error codes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Notes:</h4>
<ul>
<li><note>If the file cannot be created and opened, then it is not attached to this stream buffer.</note></li>
</ul>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aAttach%28%29" title="Attaches the specified file to this stream buffer"><code class="ApiItem">Attach()</code></a></li>
<li><a href="../FileServerClientSide/TFileModeEnum.html#%3a%3aTFileMode" title="Access and share modes available when opening a file"><code class="ApiItem">TFileMode</code></a></li>
<li><a href="../FileServerClientSide/RFileClass.html#%3a%3aRFile" title="Creates and opens a file, and performs all operations on a single open file"><code class="ApiItem">RFile</code></a></li>
</ul>
<a name="2.8.10"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aReplace%28%29"></a>
<hr size="1" noshade>
<h3><code>Replace()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Replace(RFs&amp; aFs,const TDesC&amp; aName,TUint aFileMode);</code></p><h4 class="subheading">Description</h4>
<p>Replaces the file with the specified name and attaches it to this stream buffer.</p><p>If there is an existing file with the same name, then this function overwrites it. If the file does not already exist, it is created.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RFs&amp; aFs</code></td>
<td class="Cell"><p class="ValueDesc">Handle to a file server session through which the file is replaced.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">The name of the file to be replaced.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TUint aFileMode</code></td>
<td class="Cell"><p class="ValueDesc">The mode in which the file is to be accessed. The mode is
defined by the <code>TFileMode</code> type.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code>, if successful, otherwise one of the other system wide error codes.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Notes:</h4>
<ul>
<li><note>If the file cannot be replaced, then it is not attached to this stream buffer.</note></li>
</ul>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aAttach%28%29" title="Attaches the specified file to this stream buffer"><code class="ApiItem">Attach()</code></a></li>
<li><a href="../FileServerClientSide/TFileModeEnum.html#%3a%3aTFileMode" title="Access and share modes available when opening a file"><code class="ApiItem">TFileMode</code></a></li>
<li><a href="../FileServerClientSide/RFileClass.html#%3a%3aRFile" title="Creates and opens a file, and performs all operations on a single open file"><code class="ApiItem">RFile</code></a></li>
</ul>
<a name="2.8.11"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aTemp%28%29"></a>
<hr size="1" noshade>
<h3><code>Temp()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Temp(RFs&amp; aFs,const TDesC&amp; aPath,TFileName&amp; aName,TUint aFileMode);</code></p><h4 class="subheading">Description</h4>
<p>Creates and opens a temporary file with a unique name and attaches it to this stream buffer.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RFs&amp; aFs</code></td>
<td class="Cell"><p class="ValueDesc">Handle to a file server session through which the file is created.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aPath</code></td>
<td class="Cell"><p class="ValueDesc">The directory in which the file is created.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aName</code></td>
<td class="Cell"><p class="ValueDesc">On return, contains the full path and file name of the file. The filename is guaranteed to be unique within the specified directory.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TUint aFileMode</code></td>
<td class="Cell"><p class="ValueDesc">The mode in which the file is to be accessed. The mode is
defined by the <code>TFileMode</code> type.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="RFileBufClass.html#%3a%3aRFileBuf%3a%3aAttach%28%29" title="Attaches the specified file to this stream buffer"><code class="ApiItem">Attach()</code></a></li>
<li><a href="../FileServerClientSide/TFileModeEnum.html#%3a%3aTFileMode" title="Access and share modes available when opening a file"><code class="ApiItem">TFileMode</code></a></li>
<li><a href="../FileServerClientSide/RFileClass.html#%3a%3aRFile" title="Creates and opens a file, and performs all operations on a single open file"><code class="ApiItem">RFile</code></a></li>
</ul>
<a name="2.8.12"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aFile%28%29"></a>
<hr size="1" noshade>
<h3><code>File()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>RFile&amp; File() const;</code></p><h4 class="subheading">Description</h4>
<p>Gets a reference to the file attached to this stream buffer.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RFile&amp;</code></td>
<td class="Cell"><p class="ValueDesc">The file attached to this stream buffer.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.13"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aClose%28%29"></a>
<hr size="1" noshade>
<h3><code>Close()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Close();</code></p><h4 class="subheading">Description</h4>
<p>Writes any outstanding data from the intermediate buffer before freeing the intermediate buffer and closing the attached file.</p>
<a name="2.9"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Internal members</h2>
</div><div class="Bodytext">
<a name="2.9.2"></a></div><div class="Head3">
<a name="%3a%3aRFileBuf%3a%3aRFileBuf%28%29"></a>
<hr size="1" noshade>
<h3><code>RFileBuf()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>RFileBuf(TCapture&lt;RFileBuf&gt; aCapture);</code></p><h4 class="subheading">Description</h4>
<p>This is internal and is not intended for use.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TCapture&lt;RFileBuf&gt; aCapture</code></td>
<td class="Cell"><p class="ValueDesc">No description.</p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
