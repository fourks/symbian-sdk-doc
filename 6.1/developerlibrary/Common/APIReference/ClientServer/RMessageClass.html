<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>RMessage</title>
<link href="../../../_stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../_stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../_stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../_stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../_stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../_stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../_stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CSharableSessionClass.html"><img src="../../../_stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="RSessionBaseClass.html"><img src="../../../_stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Client/Server</a>&nbsp;<span class="separator">&#187;</span>
RMessage</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>e32std.h</code>
<br>Link against: <code>euser.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aRMessage"></a>

<h1>Class <code>RMessage</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>RMessage</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>An object which encapsulates a client request.</p><p>It is used on the
server-side to communicate a client request to a server-side client
session.</p>
<p>It contains the opcode specifying the client&#8217;s request and
the message argument array - an array of four 32 bit parameters.</p>
<p>Depending on the client request, as identified by the opcode, the
message argument array may contain pointers into the client-side address space,
allowing data to be transferred from and to the client. The transfer of data is
implemented using inter-thread communication.</p><p>Defined in <code>RMessage</code>:
<br><code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aClient%28%29" title="Returns the client thread associated with this session">Client()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aComplete%28%29" title="Signals completion of the client request">Complete()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aFunction%28%29" title="Returns the opcode specifying the client's request">Function()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aInt0%28%29" title="Returns the first element in the message argument array as an integer">Int0()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aInt1%28%29" title="Returns the second element in the message argument array as an integer">Int1()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aInt2%28%29" title="Returns the third element in the message argument array as an integer">Int2()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aInt3%28%29" title="Returns the fourth element in the message argument array as an integer">Int3()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aKill%28%29" title="Ends the client thread associated with this session and completes the client request">Kill()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aMessagePtr%28%29" title="Returns this RMessage object cast as a RMessagePtr type">MessagePtr()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aPanic%28%29" title="Panics the client thread associated with this session and completes the client request">Panic()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aPtr0%28%29" title="Returns the first element in the message argument array as a pointer">Ptr0()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aPtr1%28%29" title="Returns the second element in the message argument array as a pointer">Ptr1()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aPtr2%28%29" title="Returns the third element in the message argument array as a pointer">Ptr2()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aPtr3%28%29" title="Returns the fourth element in the message argument array as a pointer">Ptr3()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aRMessage%28%29" title="Copy constructor">RMessage()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aReadL%28%29" title="Copies data from the client thread's address space into a 16 bit descriptor in the server address space">ReadL()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aWriteL%28%29" title="Copies data from a 16 bit descriptor in the server address space to the client thread's address space">WriteL()</a></code>, <code class="ApiItem"><a href="RMessageClass.html#%3a%3aRMessage%3a%3aoperator%3d%28%29" title="Assignment constructor">operator=()</a></code>
</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../ThreadsAndProcesses/RThreadClass.html#%3a%3aRThread" title="A handle to a thread"><code class="ApiItem">RThread</code></a></li>
</ul>
<a name="2.6"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Construction and destruction</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aRMessage%28%29"></a>
<hr size="1" noshade>
<h3><code>RMessage()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>RMessage();</code></p><h4 class="subheading">Description</h4>
<p>Creates a default server-side message.</p>
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aRMessage%28%29"></a>
<hr size="1" noshade>
<h3><code>RMessage()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>RMessage(const RMessage&amp; aMessage);</code></p><h4 class="subheading">Description</h4>
<p>Copy constructor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const RMessage&amp; aMessage</code></td>
<td class="Cell"><p class="ValueDesc">The server-side message to be copied.</p></td>
</tr>
</table></td></tr></table>
<a name="2.6.4"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aoperator%3d%28%29"></a>
<hr size="1" noshade>
<h3><code>operator=()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>RMessage&amp; operator=(const RMessage&amp; aMessage);</code></p><h4 class="subheading">Description</h4>
<p>Assignment constructor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const RMessage&amp; aMessage</code></td>
<td class="Cell"><p class="ValueDesc">The server-side message to be assigned.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RMessage&amp;</code></td>
<td class="Cell"><p class="ValueDesc">A reference to this message</p></td>
</tr>
</table></td></tr></table>
<a name="2.7"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Accessing opcode that specifies client&#8217;s request</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aFunction%28%29"></a>
<hr size="1" noshade>
<h3><code>Function()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Function() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the opcode specifying the client&#8217;s
request.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The opcode.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Accessing the client&#8217;s message arguments as integers</h2>
</div><div class="Bodytext">
<a name="2.8.2"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aInt0%28%29"></a>
<hr size="1" noshade>
<h3><code>Int0()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Int0() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the first element in the message argument array as an
integer.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The first array element interpreted as an integer.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aInt1%28%29"></a>
<hr size="1" noshade>
<h3><code>Int1()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Int1() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the second element in the message argument array as an
integer.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The second array element interpreted as an integer.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.4"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aInt2%28%29"></a>
<hr size="1" noshade>
<h3><code>Int2()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Int2() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the third element in the message argument array as an
integer.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The third array element interpreted as an integer.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.5"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aInt3%28%29"></a>
<hr size="1" noshade>
<h3><code>Int3()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Int3() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the fourth element in the message argument array as an
integer.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The fourth array element interpreted as an integer.</p></td>
</tr>
</table></td></tr></table>
<a name="2.9"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Accessing the client&#8217;s message arguments as pointers</h2>
</div><div class="Bodytext">
<a name="2.9.2"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aPtr0%28%29"></a>
<hr size="1" noshade>
<h3><code>Ptr0()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const TAny* Ptr0() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the first element in the message argument array as a
pointer.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">The first array element interpreted as a pointer.</p></td>
</tr>
</table></td></tr></table>
<a name="2.9.3"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aPtr1%28%29"></a>
<hr size="1" noshade>
<h3><code>Ptr1()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const TAny* Ptr1() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the second element in the message argument array as a
pointer.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">The second array element interpreted as a pointer.</p></td>
</tr>
</table></td></tr></table>
<a name="2.9.4"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aPtr2%28%29"></a>
<hr size="1" noshade>
<h3><code>Ptr2()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const TAny* Ptr2() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the third element in the message argument array as a
pointer.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">The third array element interpreted as a pointer.</p></td>
</tr>
</table></td></tr></table>
<a name="2.9.5"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aPtr3%28%29"></a>
<hr size="1" noshade>
<h3><code>Ptr3()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const TAny* Ptr3() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the fourth element in the message argument array as a
pointer.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">The fourth array element interpreted as a pointer.</p></td>
</tr>
</table></td></tr></table>
<a name="2.10"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Completion of client request</h2>
</div><div class="Bodytext">
<a name="2.10.2"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aComplete%28%29"></a>
<hr size="1" noshade>
<h3><code>Complete()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Complete(TInt aReason) const;</code></p><h4 class="subheading">Description</h4>
<p>Signals completion of the client request.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aReason</code></td>
<td class="Cell"><p class="ValueDesc">An integer or 32 bit value to be returned to the client. The meaning of
this depends on the needs of the message. The system wide error codes,
including <code>KErrNone</code>, may also be used.</p></td>
</tr>
</table></td></tr></table>
<a name="2.11"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Read data from the client address space</h2>
</div><div class="Bodytext">
<a name="2.11.2"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aReadL%28%29"></a>
<hr size="1" noshade>
<h3><code>ReadL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ReadL(const TAny* aPtr,TDes8&amp; aDes) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from the client thread&#8217;s address space into an 8 bit
descriptor in the server address space.</p>
<p>The source data must be a valid descriptor.</p>
<p>Data is copied from the start of the source descriptor data area. The
length of data copied is the length of the source descriptor.</p>
<p>The length of data copied is limited to the maximum length of the target
descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread&#8217;s address
space. The data at this pointer must be a descriptor, i.e. a
<code>TDesC8</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDes8&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">An 8 bit descriptor in the server address space. This is the target of
the copy operation.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
pointer in the client thread &#8217; s address space is not valid within that
address space. the pointer in the client thread &#8217; s address space does
not point to a valid descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.11.3"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aReadL%28%29"></a>
<hr size="1" noshade>
<h3><code>ReadL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ReadL(const TAny* aPtr,TDes8&amp; aDes,TInt anOffset) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from the client thread&#8217;s address space into an 8 bit
descriptor in the server address space.</p>
<p>The source data must be a valid descriptor.</p>
<p>Data is copied from the specified offset position within the source
descriptor data area. The length of data copied is the length of source
descriptor data minus the offset value. If the offset value is greater than the
length of the source descriptor, then no data is copied.</p>
<p>The length of data copied is limited to the maximum length of the target
descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread&#8217;s address
space. The data at this pointer must be a descriptor, i.e. a
<code>TDesC8</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDes8&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">An 8 bit descriptor in the server address space. This is the target of
the copy operation.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset from the start of the source descriptor data area from where
copying is to begin. This value must be greater than or equal to zero.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
offset value is negative the pointer in the client thread &#8217; s address
space is not valid within that address space. the pointer in the client thread
&#8217; s address space does not point to a valid descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.11.4"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aReadL%28%29"></a>
<hr size="1" noshade>
<h3><code>ReadL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ReadL(const TAny* aPtr,TDes16&amp; aDes) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from the client thread&#8217;s address space into a 16 bit
descriptor in the server address space.</p>
<p>The source data must be a valid descriptor.</p>
<p>Data is copied from the start of the source descriptor data area. The
length of data copied is the length of the source descriptor.</p>
<p>The length of data copied is limited to the maximum length of the target
descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread&#8217;s address
space. The data at this pointer must be a descriptor, i.e. a
<code>TDesC16</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDes16&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">A 16 bit descriptor in the server address space. This is the target of
the copy operation.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
pointer in the client thread &#8217; s address space is not valid within that
address space. the pointer in the client thread &#8217; s address space does
not point to a valid descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.11.5"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aReadL%28%29"></a>
<hr size="1" noshade>
<h3><code>ReadL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ReadL(const TAny* aPtr,TDes16&amp; aDes,TInt anOffset) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from the client thread&#8217;s address space into a 16 bit
descriptor in the server address space.</p>
<p>The source data must be a valid descriptor.</p>
<p>Data is copied from the specified offset position within the source
descriptor data area. The length of data copied is the length of source
descriptor data minus the offset value. If the offset value is greater than the
length of the source descriptor, then no data is copied.</p>
<p>The length of data copied is limited to the maximum length of the target
descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread&#8217;s address
space. The data at this pointer must be a descriptor, i.e. a
<code>TDesC16</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDes16&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">A 16 bit descriptor in the server address space. This is the target of
the copy operation.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset from the start of the source descriptor data area from where
copying is to begin. This value must be greater than or equal to zero.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
offset value is negative the pointer in the client thread &#8217; s address
space is not valid within that address space. the pointer in the client thread
&#8217; s address space does not point to a valid descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.12"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Write data to the client from the server</h2>
</div><div class="Bodytext">
<a name="2.12.2"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aWriteL%28%29"></a>
<hr size="1" noshade>
<h3><code>WriteL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void WriteL(const TAny* aPtr,const TDesC8&amp; aDes) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from an 8 bit descriptor in the server address space to the
client thread&#8217;s address space.</p>
<p>The target location must be a valid modifiable descriptor.</p>
<p>Data is copied from the source descriptor to the data area of the target
descriptor; the length of data copied is the length of the source
descriptor.</p>
<p>The target descriptor in the client address space must be big enough to
contain the data otherwise the function leaves; i.e. the target descriptor
maximum length cannot be less than the length of the source
descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread&#8217;s address
space. The data type at this location must be a modifiable descriptor, i.e. a
<code>TDes8</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDesC8&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">An 8 bit descriptor in the server address space. This is the source of
the copy operation.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
pointer in the client thread &#8217; s address space is not valid within that
address space. the pointer in the client thread &#8217; s address space does
not point to a valid modifiable descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.12.3"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aWriteL%28%29"></a>
<hr size="1" noshade>
<h3><code>WriteL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void WriteL(const TAny* aPtr,const TDesC8&amp; aDes,TInt anOffset) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from an 8 bit descriptor in the server address space to the
client thread&#8217;s address space.</p>
<p>The target location must be a valid modifiable descriptor.</p>
<p>Data is copied from the source descriptor to the specified offset
position within the target descriptor data area. The length of data copied is
the length of the source descriptor. The length of the target descriptor is set
to the length of the source descriptor plus the value of the offset.</p>
<p>The target descriptor in the client address space must be big enough to
contain the data otherwise the function leaves; i.e. the target descriptor
maximum length cannot be less than the sum of the source descriptor length plus
the value of the offset.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread&#8217;s address
space. The data type at this location must be a modifiable descriptor, i.e. a
<code>TDes8</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC8&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">An 8 bit descriptor in the server address space. This is the source of
the copy operation.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset from the start of the target descriptor data area where
copying is to begin. This value must be greater than or equal to zero.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
offset value is negative the pointer in the client thread &#8217; s address
space is not valid within that address space. the pointer in the client thread
&#8217; s address space does not point to a valid modifiable descriptor. there
is insufficient space in the target descriptor in the client thread &#8217; s
address space. </p></td>
</tr>
</table></td></tr></table>
<a name="2.12.4"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aWriteL%28%29"></a>
<hr size="1" noshade>
<h3><code>WriteL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void WriteL(const TAny* aPtr,const TDesC16&amp; aDes) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from a 16 bit descriptor in the server address space to the
client thread&#8217;s address space.</p>
<p>The target location must be a valid modifiable descriptor.</p>
<p>Data is copied from the source descriptor to the data area of the target
descriptor; the length of data copied is the length of the source
descriptor.</p>
<p>The target descriptor in the client address space must be big enough to
contain the data otherwise the function leaves; i.e. the target descriptor
maximum length cannot be less than the length of the source
descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread&#8217;s address
space. The data type at this location must be a modifiable descriptor, i.e. a
<code>TDes16</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDesC16&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">A 16 bit descriptor in the server address space. This is the source of
the copy operation.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
pointer in the client thread &#8217; s address space is not valid within that
address space. the pointer in the client thread &#8217; s address space does
not point to a valid modifiable descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.12.5"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aWriteL%28%29"></a>
<hr size="1" noshade>
<h3><code>WriteL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void WriteL(const TAny* aPtr,const TDesC16&amp; aDes,TInt anOffset) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from a 16 bit descriptor in the server address space to the
client thread&#8217;s address space.</p>
<p>The target location must be a valid modifiable descriptor.</p>
<p>Data is copied from the source descriptor to the specified offset
position within the target descriptor data area. The length of data copied is
the length of the source descriptor. The length of the target descriptor is set
to the length of the source descriptor plus the value of the offset.</p>
<p>The target descriptor in the client address space must be big enough to
contain the data otherwise the function leaves; i.e. the target descriptor
maximum length cannot be less than the sum of the source descriptor length plus
the value of the offset.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread&#8217;s address
space. The data type at this location must be a modifiable descriptor, i.e. a
<code>TDes16</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC16&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">A 16 bit descriptor in the server address space. This is the source of
the copy operation.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset from the start of the target descriptor data area where
copying is to begin. This value must be greater than or equal to zero.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
offset value is negative the pointer in the client thread &#8217; s address
space is not valid within that address space. the pointer in the client thread
&#8217; s address space does not point to a valid modifiable descriptor. there
is insufficient space in the target descriptor in the client thread &#8217; s
address space. </p></td>
</tr>
</table></td></tr></table>
<a name="2.13"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Accessor functions</h2>
</div><div class="Bodytext">
<a name="2.13.2"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aClient%28%29"></a>
<hr size="1" noshade>
<h3><code>Client()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const RThread&amp; Client() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the client thread associated with this
session.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RThread&amp;</code></td>
<td class="Cell"><p class="ValueDesc">The client thread.</p></td>
</tr>
</table></td></tr></table>
<a name="2.13.3"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aMessagePtr%28%29"></a>
<hr size="1" noshade>
<h3><code>MessagePtr()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const RMessagePtr MessagePtr() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns this <code>RMessage</code> object cast as a <code>RMessagePtr</code> type.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RMessagePtr</code></td>
<td class="Cell"><p class="ValueDesc">This object cast as a <code>RMessagePtr</code> type.</p></td>
</tr>
</table></td></tr></table>
<a name="2.14"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Error handling</h2>
</div><div class="Bodytext">
<a name="2.14.2"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aPanic%28%29"></a>
<hr size="1" noshade>
<h3><code>Panic()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Panic(const TDesC&amp; aCategory,TInt aReason) const;</code></p><h4 class="subheading">Description</h4>
<p>Panics the client thread associated with this session and completes the
client request.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aCategory</code></td>
<td class="Cell"><p class="ValueDesc">Text specifying the panic category name.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aReason</code></td>
<td class="Cell"><p class="ValueDesc">The panic number.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../ThreadsAndProcesses/RThreadClass.html#%3a%3aRThread%3a%3aPanic%28%29" title="Panics this thread, specifying the panic category name and reason"><code class="ApiItem">RThread::Panic()</code></a></li>
</ul>
<a name="2.14.3"></a></div><div class="Head3">
<a name="%3a%3aRMessage%3a%3aKill%28%29"></a>
<hr size="1" noshade>
<h3><code>Kill()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Kill(TInt aReason) const;</code></p><h4 class="subheading">Description</h4>
<p>Ends the client thread associated with this session and completes the
client request.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aReason</code></td>
<td class="Cell"><p class="ValueDesc">The reason associated with the ending of the client thread.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../ThreadsAndProcesses/RThreadClass.html#%3a%3aRThread%3a%3aKill%28%29" title="Ends this thread specifying a reason code"><code class="ApiItem">RThread::Kill()</code></a></li>
</ul>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../_stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
