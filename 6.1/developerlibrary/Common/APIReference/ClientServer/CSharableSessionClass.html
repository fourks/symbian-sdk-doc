<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>CSharableSession</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CSessionClass.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="RMessageClass.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Client/Server</a>&nbsp;<span class="separator">&#187;</span>
CSharableSession</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code> e32base.h </code>
<br>Link against: <code> euser.lib </code>
</p>
</div><div class="Head1">
<a name="%3a%3aCSharableSession"></a>

<h1>Class <code>CSharableSession</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>CSharableSession</code></p><h4 class="subheading">Support</h4>
<p>Supported from 6.0
</p><h4 class="subheading">Description</h4>
<p>Sharable session abstract base class.</p>
<p>The class is the base class for all sessions and also provides the
support needed for a session to be sharable by all threads within a single
process.</p>
<p>The class is a base class for the <code>CSession</code>
class.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase">CBase</a></code></td><td class="Cell">Base class for all classes to be instantiated on the heap</td>
</tr>
<tr><td class="Cell"><code>CSharableSession</code></td><td class="Cell">Sharable session abstract base class</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>CSharableSession</code>:
<br><code class="ApiItem"><a href="CSharableSessionClass.html#%3a%3aCSharableSession%3a%3aCountResources%28%29" title="Returns the number of resources currently in use">CountResources()</a></code>, <code class="ApiItem"><a href="CSharableSessionClass.html#%3a%3aCSharableSession%3a%3aCreateL%28%29" title="Completes construction of this server-side client session object">CreateL()</a></code>, <code class="ApiItem"><a href="CSharableSessionClass.html#%3a%3aCSharableSession%3a%3aMessage%28%29" title="Returns the current message">Message()</a></code>, <code class="ApiItem"><a href="CSharableSessionClass.html#%3a%3aCSharableSession%3a%3aResourceCountMarkEnd%28%29" title="Ends resource counting">ResourceCountMarkEnd()</a></code>, <code class="ApiItem"><a href="CSharableSessionClass.html#%3a%3aCSharableSession%3a%3aResourceCountMarkStart%28%29" title="Initialises resource counting">ResourceCountMarkStart()</a></code>, <code class="ApiItem"><a href="CSharableSessionClass.html#%3a%3aCSharableSession%3a%3aServer%28%29" title="Returns the server active object which provides message handling for this session, i.e">Server()</a></code>, <code class="ApiItem"><a href="CSharableSessionClass.html#%3a%3aCSharableSession%3a%3aServiceL%28%29" title="Handles the servicing of client requests passed to the server">ServiceL()</a></code>, <code class="ApiItem"><a href="CSharableSessionClass.html#%3a%3aCSharableSession%3a%3a%7eCSharableSession%28%29" title="Frees resources prior to destruction">~CSharableSession()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase" title="Base class for all classes to be instantiated on the heap">CBase</a></code>:
<br><code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase%3a%3aoperator%20new%28%29" title="Allocates the object from the heap and then initialises its contents to binary zeroes">operator new()</a></code></p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CSessionClass.html#%3a%3aCSession" title="Represents a session for a client thread on the server-side"><code class="ApiItem">CSession</code></a></li>
</ul>
<a name="2.7"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Construction and destruction</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aCSharableSession%3a%3aCreateL%28%29"></a>
<hr size="1" noshade>
<h3><code>CreateL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void CreateL(const CServer&amp; aServer);</code></p><h4 class="subheading">Description</h4>
<p>Completes construction of this server-side client session
object.</p>
<p>The default implementation stores a pointer to the server
active object that provides message handling for this session, i.e. the server
active object that created this session object.</p>
<p>This function is called by the server active object when a
client makes a connect request.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const CServer&amp; aServer</code></td>
<td class="Cell"><p class="ValueDesc"> The server active object which is responsible for this
session.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aCSharableSession%3a%3a%7eCSharableSession%28%29"></a>
<hr size="1" noshade>
<h3><code>~CSharableSession()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>~CSharableSession();</code></p><h4 class="subheading">Description</h4>
<p>Frees resources prior to destruction. Specifically, it removes
this session object from the server active objectâ€™s list of sessions.</p>
<a name="2.8"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Accessors</h2>
</div><div class="Bodytext">
<a name="2.8.2"></a></div><div class="Head3">
<a name="%3a%3aCSharableSession%3a%3aServer%28%29"></a>
<hr size="1" noshade>
<h3><code>Server()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const CServer* Server() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the server active object which provides message handling
for this session, i.e. the server active object which created this session
object.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CServer*</code></td>
<td class="Cell"><p class="ValueDesc"> The server active object.</p></td>
</tr>
</table></td></tr></table>
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aCSharableSession%3a%3aMessage%28%29"></a>
<hr size="1" noshade>
<h3><code>Message()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const RMessage&amp; Message() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the current message.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RMessage&amp;</code></td>
<td class="Cell"><p class="ValueDesc">The current message.</p></td>
</tr>
</table></td></tr></table>
<a name="2.9"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Request handling</h2>
</div><div class="Bodytext">
<a name="2.9.2"></a></div><div class="Head3">
<a name="%3a%3aCSharableSession%3a%3aServiceL%28%29"></a>
<hr size="1" noshade>
<h3><code>ServiceL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void ServiceL(const RMessage&amp; aMessage) = 0;</code></p><h4 class="subheading">Description</h4>
<p>Handles the servicing of client requests passed to the server.</p>
<p>This function must be implemented in a derived class. The details of
the request are contained within the message.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const RMessage&amp; aMessage</code></td>
<td class="Cell"><p class="ValueDesc">The message containing the client request</p></td>
</tr>
</table></td></tr></table>
<a name="2.10"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Resource checking</h2>
</div><div class="Bodytext">
<a name="2.10.2"></a></div><div class="Head3">
<a name="%3a%3aCSharableSession%3a%3aResourceCountMarkStart%28%29"></a>
<hr size="1" noshade>
<h3><code>ResourceCountMarkStart()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ResourceCountMarkStart();</code></p><h4 class="subheading">Description</h4>
<p>Initialises resource counting.</p>
<p>If resource counting has not been implemented in a derived class, the
function panics the client thread associated with the most recent message,
specifying the category name CSession and panic number 1.</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CSharableSessionClass.html#%3a%3aCSharableSession%3a%3aCountResources%28%29" title="Returns the number of resources currently in use"><code class="ApiItem">CSharableSession::CountResources()</code></a></li>
</ul>
<a name="2.10.3"></a></div><div class="Head3">
<a name="%3a%3aCSharableSession%3a%3aResourceCountMarkEnd%28%29"></a>
<hr size="1" noshade>
<h3><code>ResourceCountMarkEnd()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ResourceCountMarkEnd();</code></p><h4 class="subheading">Description</h4>
<p>Ends resource counting.</p>
<p>The function checks that the current number of resources in use is the
same as that when resource counting started. If these values are not equal, the
function panics the client thread associated with the most recent message,
specifying the category name CSession and panic number 2.</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CSharableSessionClass.html#%3a%3aCSharableSession%3a%3aCountResources%28%29" title="Returns the number of resources currently in use"><code class="ApiItem">CSharableSession::CountResources()</code></a></li>
</ul>
<a name="2.10.4"></a></div><div class="Head3">
<a name="%3a%3aCSharableSession%3a%3aCountResources%28%29"></a>
<hr size="1" noshade>
<h3><code>CountResources()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TInt CountResources();</code></p><h4 class="subheading">Description</h4>
<p>Returns the number of resources currently in use.</p>
<p>The default implementation returns <code>KErrGeneral</code>.</p>
<p>Derived classes which support resource counting must provide a suitable
implementation.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The current number of resources in use</p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
