<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>CSession</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CServerClass.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="CSharableSessionClass.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Client/Server</a>&nbsp;<span class="separator">&#187;</span>
CSession</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>e32base.h</code>
<br>Link against: <code>euser.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aCSession"></a>

<h1>Class <code>CSession</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>CSession</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Represents a session for a client thread on the server-side.</p>
<p>A session acts as a channel of communication between the client and
the server. A client thread can have multiple concurrent sessions with a
server.</p>
<p>A session can also be shared by all threads within a single
process</p>
<p>A server must define and implement a derived class. In particular
it must provide an implementation for the <code>ServiceL()</code> virtual
function.</p>
<p>Note that in ER5:</p>
<ul>
<li>
<p>There is no concept of a sharable session; a session is tied to
the connecting thread, and no other thread can use it.</p>
</li>
<li>
<p>This class is derived from <code>CBase</code>.</p>
</li>
</ul>
<p></p><h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase">CBase</a></code></td><td class="Cell">Base class for all classes to be instantiated on the heap</td>
</tr>
<tr><td class="Cell"><code>CSession</code></td><td class="Cell">Represents a session for a client thread on the server-side</td>
</tr>
<tr><td class="Cell"><code><a href="CSharableSessionClass.html#%3a%3aCSharableSession">CSharableSession</a></code></td><td class="Cell">Sharable session abstract base class</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>CSession</code>:
<br><code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aCSession%28%29" title="Constructs the server-side client session object for the specified client thread">CSession()</a></code>, <code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aClient%28%29" title="Returns the client thread that caused this session to be created">Client()</a></code>, <code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aCountResources%28%29" title="Returns the number of resources currently in use">CountResources()</a></code>, <code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aKill%28%29" title="Ends the client thread associated with this session">Kill()</a></code>, <code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aMessage%28%29" title="Returns the current message">Message()</a></code>, <code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aPanic%28%29" title="Panics the client thread associated with this session">Panic()</a></code>, <code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aReadL%28%29" title="Copies data from the client thread's address space into a 16 bit descriptor in the server address space">ReadL()</a></code>, <code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aResourceCountMarkEnd%28%29" title="Ends resource counting">ResourceCountMarkEnd()</a></code>, <code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aResourceCountMarkStart%28%29" title="Initialises resource counting">ResourceCountMarkStart()</a></code>, <code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aServer%28%29" title="Returns the server active object which provides message handling for this session, i.e">Server()</a></code>, <code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aServiceL%28%29" title="Handles the servicing of client requests to the server">ServiceL()</a></code>, <code class="ApiItem"><a href="CSessionClass.html#%3a%3aCSession%3a%3aWriteL%28%29" title="Copies data from a 16 bit descriptor in the server address space to the client thread's address space">WriteL()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase" title="Base class for all classes to be instantiated on the heap">CBase</a></code>:
<br><code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase%3a%3aoperator%20new%28%29" title="Allocates the object from the heap and then initialises its contents to binary zeroes">operator new()</a></code></p>
<p>Inherited from <code class="ApiItem"><a href="CSharableSessionClass.html#%3a%3aCSharableSession" title="Sharable session abstract base class">CSharableSession</a></code>:
<br><code class="ApiItem"><a href="CSharableSessionClass.html#%3a%3aCSharableSession%3a%3aCreateL%28%29" title="Completes construction of this server-side client session object">CreateL()</a></code></p>
<a name="2.6"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Construction and destruction</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aCSession%28%29"></a>
<hr size="1" noshade>
<h3><code>CSession()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: CSession(RThread aClient);</code></p><h4 class="subheading">Description</h4>
<p>Constructs the server-side client session object for the
specified client thread.</p>
<p>Derived classes must define and implement a constructor through
which the client thread can be specified. A typical implementation calls this
client session base class constructor through a constructor initialization
list.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RThread aClient</code></td>
<td class="Cell"><p class="ValueDesc">The client thread for which this server-side client session is
being constructed.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Read data from the client address space</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aReadL%28%29"></a>
<hr size="1" noshade>
<h3><code>ReadL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ReadL(const TAny* aPtr,TDes8&amp; aDes) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from the client thread's address space into an 8 bit
descriptor in the server address space.</p>
<p>The source data must be a valid descriptor.</p>
<p>Data is copied from the start of the source descriptor data area.
The length of data copied is the length of the source descriptor.</p>
<p>The length of data copied is limited to the maximum length of the
target descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread's address
space. The data at this pointer must be a descriptor, i.e. a
<code>TDesC8</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDes8&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">An 8 bit descriptor in the server address space. This is the
target of the copy operation.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes,
if: the pointer in the client thread's address space is not valid within that
address space. the pointer in the client thread's address space does not point
to a valid descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aReadL%28%29"></a>
<hr size="1" noshade>
<h3><code>ReadL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ReadL(const TAny* aPtr,TDes8&amp; aDes,TInt anOffset) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from the client thread's address space into an 8 bit
descriptor in the server address space.</p>
<p>The source data must be a valid descriptor.</p>
<p>Data is copied from the specified offset position within the source
descriptor data area. The length of data copied is the length of source
descriptor data minus the offset value. If the offset value is greater than the
length of the source descriptor, then no data is copied.</p>
<p>The length of data copied is limited to the maximum length of the
target descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread's address
space. The data at this pointer must be a descriptor, i.e. a
<code>TDesC8</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDes8&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">An 8 bit descriptor in the server address space. This is the target
of the copy operation.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset from the start of the source descriptor data area from
where copying is to begin. This value must be greater than or equal to
zero.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if:
the offset value is negative the pointer in the client thread's address space
is not valid within that address space. the pointer in the client thread's
address space does not point to a valid descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.4"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aReadL%28%29"></a>
<hr size="1" noshade>
<h3><code>ReadL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ReadL(const TAny* aPtr,TDes16&amp; aDes) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from the client thread's address space into a 16 bit
descriptor in the server address space.</p>
<p>The source data must be a valid descriptor.</p>
<p>Data is copied from the start of the source descriptor data area. The
length of data copied is the length of the source descriptor.</p>
<p>The length of data copied is limited to the maximum length of the
target descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread's address
space. The data at this pointer must be a descriptor, i.e. a
<code>TDesC16</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDes16&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">A 16 bit descriptor in the server address space. This is the target
of the copy operation.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if:
the pointer in the client thread's address space is not valid within that
address space. the pointer in the client thread's address space does not point
to a valid descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.5"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aReadL%28%29"></a>
<hr size="1" noshade>
<h3><code>ReadL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ReadL(const TAny* aPtr,TDes16&amp; aDes,TInt anOffset) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from the client thread's address space into a 16 bit
descriptor in the server address space.</p>
<p>The source data must be a valid descriptor.</p>
<p>Data is copied from the specified offset position within the source
descriptor data area. The length of data copied is the length of source
descriptor data minus the offset value. If the offset value is greater than the
length of the source descriptor, then no data is copied.</p>
<p>The length of data copied is limited to the maximum length of the
target descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread's address space.
The data at this pointer must be a descriptor, i.e. a<code>TDesC16</code>
type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDes16&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">A 16 bit descriptor in the server address space. This is the target of
the copy operation.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset from the start of the source descriptor data area from where
copying is to begin. This value must be greater than or equal to zero.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
offset value is negative the pointer in the client thread's address space is
not valid within that address space. the pointer in the client thread's address
space does not point to a valid descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Write data into the client address space</h2>
</div><div class="Bodytext">
<a name="2.8.2"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aWriteL%28%29"></a>
<hr size="1" noshade>
<h3><code>WriteL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void WriteL(const TAny* aPtr,const TDesC8&amp; aDes) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from an 8 bit descriptor in the server address space to the
client thread's address space.</p>
<p>The target location must be a valid modifiable descriptor.</p>
<p>Data is copied from the source descriptor to the data area of the target
descriptor; the length of data copied is the length of the source
descriptor.</p>
<p>The target descriptor in the client address space must be big enough to
contain the data otherwise the function leaves; i.e. the target descriptor
maximum length cannot be less than the length of the source
descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread's address space.
The data type at this location must be a modifiable descriptor, i.e.
a<code>TDes8</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDesC8&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">An 8 bit descriptor in the server address space. This is the source of
the copy operation.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
pointer in the client thread's address space is not valid within that address
space. the pointer in the client thread's address space does not point to a
valid modifiable descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aWriteL%28%29"></a>
<hr size="1" noshade>
<h3><code>WriteL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void WriteL(const TAny* aPtr,const TDesC8&amp; aDes,TInt anOffset) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from an 8 bit descriptor in the server address space to the
client thread's address space.</p>
<p>The target location must be a valid modifiable descriptor.</p>
<p>Data is copied from the source descriptor to the specified offset
position within the target descriptor data area. The length of data copied is
the length of the source descriptor. The length of the target descriptor is set
to the length of the source descriptor plus the value of the offset.</p>
<p>The target descriptor in the client address space must be big enough to
contain the data otherwise the function leaves; i.e. the target descriptor
maximum length cannot be less than the sum of the source descriptor length plus
the value of the offset.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread's address space.
The data type at this location must be a modifiable descriptor, i.e.
a<code>TDes8</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC8&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">An 8 bit descriptor in the server address space. This is the source of
the copy operation.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset from the start of the target descriptor data area where
copying is to begin. This value must be greater than or equal to zero.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
offset value is negative the pointer in the client thread's address space is
not valid within that address space. the pointer in the client thread's address
space does not point to a valid modifiable descriptor. there is insufficient
space in the target descriptor in the client thread's address space. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.4"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aWriteL%28%29"></a>
<hr size="1" noshade>
<h3><code>WriteL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void WriteL(const TAny* aPtr,const TDesC16&amp; aDes) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from a 16 bit descriptor in the server address space to the
client thread's address space.</p>
<p>The target location must be a valid modifiable descriptor.</p>
<p>Data is copied from the source descriptor to the data area of the target
descriptor; the length of data copied is the length of the source
descriptor.</p>
<p>The target descriptor in the client address space must be big enough to
contain the data otherwise the function leaves; i.e. the target descriptor
maximum length cannot be less than the length of the source
descriptor.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread's address space.
The data type at this location must be a modifiable descriptor, i.e.
a<code>TDes16</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TDesC16&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">A 16 bit descriptor in the server address space. This is the source of
the copy operation.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
pointer in the client thread's address space is not valid within that address
space. the pointer in the client thread's address space does not point to a
valid modifiable descriptor. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.5"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aWriteL%28%29"></a>
<hr size="1" noshade>
<h3><code>WriteL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void WriteL(const TAny* aPtr,const TDesC16&amp; aDes,TInt anOffset) const;</code></p><h4 class="subheading">Description</h4>
<p>Copies data from a 16 bit descriptor in the server address space to the
client thread's address space.</p>
<p>The target location must be a valid modifiable descriptor.</p>
<p>Data is copied from the source descriptor to the specified offset
position within the target descriptor data area. The length of data copied is
the length of the source descriptor. The length of the target descriptor is set
to the length of the source descriptor plus the value of the offset.</p>
<p>The target descriptor in the client address space must be big enough to
contain the data otherwise the function leaves; i.e. the target descriptor
maximum length cannot be less than the sum of the source descriptor length plus
the value of the offset.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a valid address within the client thread's address space.
The data type at this location must be a modifiable descriptor, i.e.
a<code>TDes16</code> type.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC16&amp; aDes</code></td>
<td class="Cell"><p class="ValueDesc">A 16 bit descriptor in the server address space. This is the source of
the copy operation.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset from the start of the target descriptor data area where
copying is to begin. This value must be greater than or equal to zero.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Leave codes</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">&nbsp;</code></td>
<td class="Cell"><p class="ValueDesc">The function leaves with one of the system-wide error codes, if: the
offset value is negative the pointer in the client thread's address space is
not valid within that address space. the pointer in the client thread's address
space does not point to a valid modifiable descriptor. there is insufficient
space in the target descriptor in the client thread's address space. </p></td>
</tr>
</table></td></tr></table>
<a name="2.9"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Error handling</h2>
</div><div class="Bodytext">
<a name="2.9.2"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aPanic%28%29"></a>
<hr size="1" noshade>
<h3><code>Panic()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Panic(const TDesC&amp; aCategory,TInt aReason) const;</code></p><h4 class="subheading">Description</h4>
<p>Panics the client thread associated with this
session.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TDesC&amp; aCategory</code></td>
<td class="Cell"><p class="ValueDesc">Text specifying the panic category name.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aReason</code></td>
<td class="Cell"><p class="ValueDesc">The panic number.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../ThreadsAndProcesses/RThreadClass.html#%3a%3aRThread%3a%3aPanic%28%29" title="Panics this thread, specifying the panic category name and reason"><code class="ApiItem">RThread::Panic()</code></a></li>
</ul>
<a name="2.9.3"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aKill%28%29"></a>
<hr size="1" noshade>
<h3><code>Kill()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void Kill(TInt aReason) const;</code></p><h4 class="subheading">Description</h4>
<p>Ends the client thread associated with this session.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aReason</code></td>
<td class="Cell"><p class="ValueDesc">The reason associated with the ending of the client thread.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../ThreadsAndProcesses/RThreadClass.html#%3a%3aRThread%3a%3aKill%28%29" title="Ends this thread specifying a reason code"><code class="ApiItem">RThread::Kill()</code></a></li>
</ul>
<a name="2.10"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Accessor functions</h2>
</div><div class="Bodytext">
<a name="2.10.2"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aClient%28%29"></a>
<hr size="1" noshade>
<h3><code>Client()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const RThread&amp; Client() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns the client thread that caused this session to be
created.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RThread&amp;</code></td>
<td class="Cell"><p class="ValueDesc">The client thread.</p></td>
</tr>
</table></td></tr></table>
<a name="2.10.3"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aServer%28%29"></a>
<hr size="1" noshade>
<h3><code>Server()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const CServer* Server() const;</code></p><h4 class="subheading">Support</h4>
<p>Withdrawn in 6.0
</p><h4 class="subheading">Description</h4>
<p>Returns the server active object which provides message handling for this
session, i.e. the server active object which created this session
object.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">CServer*</code></td>
<td class="Cell"><p class="ValueDesc">The server active object.</p></td>
</tr>
</table></td></tr></table>
<a name="2.10.4"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aMessage%28%29"></a>
<hr size="1" noshade>
<h3><code>Message()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>const RMessage&amp; Message() const;</code></p><h4 class="subheading">Support</h4>
<p>Withdrawn in 6.0
</p><h4 class="subheading">Description</h4>
<p>Returns the current message.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">RMessage&amp;</code></td>
<td class="Cell"><p class="ValueDesc">The current message.</p></td>
</tr>
</table></td></tr></table>
<a name="2.11"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Request handling</h2>
</div><div class="Bodytext">
<a name="2.11.2"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aServiceL%28%29"></a>
<hr size="1" noshade>
<h3><code>ServiceL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void ServiceL(const RMessage&amp; aMessage) = 0;</code></p><h4 class="subheading">Support</h4>
<p>Withdrawn in 6.0
</p><h4 class="subheading">Description</h4>
<p>Handles the servicing of client requests to the server.</p>
<p>This function must be implemented in a derived class. The details of the
request are contained within the message.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const RMessage&amp; aMessage</code></td>
<td class="Cell"><p class="ValueDesc">The message containing the client request</p></td>
</tr>
</table></td></tr></table>
<a name="2.11.3"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aResourceCountMarkStart%28%29"></a>
<hr size="1" noshade>
<h3><code>ResourceCountMarkStart()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ResourceCountMarkStart();</code></p><h4 class="subheading">Support</h4>
<p>Withdrawn in 6.0
</p><h4 class="subheading">Description</h4>
<p>Initialises resource counting.</p>
<p>If resource counting has not been implemented in the derived class, the
function panics the client thread associated with this session, specifying the
category name CSession and panic number 1.</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CSessionClass.html#%3a%3aCSession%3a%3aCountResources%28%29" title="Returns the number of resources currently in use"><code class="ApiItem">CSession::CountResources()</code></a></li>
</ul>
<a name="2.11.4"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aResourceCountMarkEnd%28%29"></a>
<hr size="1" noshade>
<h3><code>ResourceCountMarkEnd()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void ResourceCountMarkEnd();</code></p><h4 class="subheading">Support</h4>
<p>Withdrawn in 6.0
</p><h4 class="subheading">Description</h4>
<p>Ends resource counting.</p>
<p>It checks that the current number of resources in use is the same as that
when resource counting started. If these values are not equal, the function
panics the client thread associated with this session, specifying the category
name CSession and panic number 2.</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="CSessionClass.html#%3a%3aCSession%3a%3aCountResources%28%29" title="Returns the number of resources currently in use"><code class="ApiItem">CSession::CountResources()</code></a></li>
</ul>
<a name="2.11.5"></a></div><div class="Head3">
<a name="%3a%3aCSession%3a%3aCountResources%28%29"></a>
<hr size="1" noshade>
<h3><code>CountResources()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TInt CountResources();</code></p><h4 class="subheading">Support</h4>
<p>Withdrawn in 6.0
</p><h4 class="subheading">Description</h4>
<p>Returns the number of resources currently in use.</p>
<p>The default implementation returns <code>KErrGeneral</code>.</p>
<p>Derived classes which support resource counting must provide a suitable
implementation.</p><h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">The current number of resources in use.</p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
