<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>RWorldServer</title>
<link href="../../../_stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../_stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../_stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../_stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../_stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../_stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../_stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="AboutWorldServer.guide.html"><img src="../../../_stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="TAreaCodeTypedef.html"><img src="../../../_stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">World&nbsp;Server</a>&nbsp;<span class="separator">&#187;</span>
RWorldServer</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code> t32wld.h </code>
<br>Link against: <code> ealwl.lib </code>
</p>
</div><div class="Head1">
<a name="%3a%3aRWorldServer"></a>

<h1>Class <code>RWorldServer</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>RWorldServer</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Defines the world server&#8217;s client side API.</p>
<p>Clients can use this API to connect to the server, add, update and
delete cities/countries, retrieve city/country information, navigate and search
the world database, set the home city, default country, and the units used in
distance comparisons. In addition, clients can use the file handling functions
to import and export database data files.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase">RHandleBase</a></code></td><td class="Cell">Handle to an object</td>
</tr>
<tr><td class="Cell"><code><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase">RSessionBase</a></code></td><td class="Cell">Client-side handle to a session with a server</td>
</tr>
<tr><td class="Cell"><code>RWorldServer</code></td><td class="Cell">Defines the world server's client side API</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>RWorldServer</code>:
<br><code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aAddCity%28%29" title="Adds a new city to the world database">AddCity()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aAddCountry%28%29" title="Adds a new country, with its capital city, to the world database">AddCountry()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aCalculateDistance%28%29" title="Calculates the distance between two cities -- using the currently selected distance units">CalculateDistance()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aCalculateSunlight%28%29" title="Gets a city's sunset and sunrise time on a specified date">CalculateSunlight()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aCityData%28%29" title="Gets the city data associated with the specified ID">CityData()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aConnect%28%29" title="Connects the client process to the world server">Connect()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aCountryData%28%29" title="Gets the country data associated with the specified ID">CountryData()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aDataFileLocation%28%29" title="Gets the location of the most recently imported user data file">DataFileLocation()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aDataFileOpen%28%29" title="Allows clients to import a specified world database data file">DataFileOpen()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aDataFileRevertToSaved%28%29" title="Reverts the world database to its state when the data file was last saved -- discarding data which was not saved">DataFileRevertToSaved()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aDataFileSave%28%29" title="Saves the world database data -- added by the user -- to the current data file">DataFileSave()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aDataFileSaveAs%28%29" title="Saves the world database data -- added by the user -- to a specified data file">DataFileSaveAs()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aDefaultCountry%28%29" title="Gets the ID of the default country">DefaultCountry()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aDeleteCity%28%29" title="Deletes a city from the world database">DeleteCity()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aDeleteCountry%28%29" title="Deletes a country from the world database">DeleteCountry()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aDistanceUnits%28%29" title="Gets the distance units used by the session">DistanceUnits()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aFind%28%29" title="Finds the ID of the city which precisely matches the specified city and country names">Find()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aFindCity%28%29" title="Locates the ID of the first city that has a name which starts with the search string">FindCity()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aFindCountry%28%29" title="Locates the ID of the first country which starts with the search string">FindCountry()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aFirstCity%28%29" title="Gets the ID of the first city in the selected locale">FirstCity()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aFirstCountry%28%29" title="Gets the ID of the first country in the world database">FirstCountry()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aGetCountryNameByISOCode%28%29" title="Gets the country name for the given ISO country code">GetCountryNameByISOCode()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aHome%28%29" title="Gets the ID of the home city">Home()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aIsCityDeletable%28%29" title="Tests whether a given city can be deleted">IsCityDeletable()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aIsCountryDeletable%28%29" title="Determines whether a given country can be deleted">IsCountryDeletable()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aLastCity%28%29" title="Gets the ID of the last city -- in the selected locale">LastCity()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aLastCountry%28%29" title="Gets the ID of the last country in the world database">LastCountry()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aNearestCity%28%29" title="Initialises the parameters for a next city search">NearestCity()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aNextCity%28%29" title="Gets the ID of the next city in the selected locale">NextCity()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aNextCountry%28%29" title="Gets the ID of the next country in the world database">NextCountry()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aNextNearestCity%28%29" title="Gets the results of a search for the city nearest to a map co-ordinate -- the co-ordinate is specified using theNearestCity() function">NextNearestCity()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aNotifyOnChange%28%29" title="Provides notification of changes to the home city, default country, system time, and database files -- asynchronous">NotifyOnChange()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aNotifyOnChangeCancel%28%29" title="Cancels an outstanding request for notification of changes to the home city, default country, system time, and database files">NotifyOnChangeCancel()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aNumberCities%28%29" title="Gets the number of cities in the world database">NumberCities()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aNumberCountries%28%29" title="Gets the number of countries in the world database">NumberCountries()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aPrevCity%28%29" title="Gets the ID of the previous city in the selected locale">PrevCity()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aPrevCountry%28%29" title="Gets the ID of the previous country in the world database">PrevCountry()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aResetAllData%28%29" title="Resets the database to the state it had when first opened, and notifies the clients">ResetAllData()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aRomTitle%28%29" title="Gets the title of the currently loaded world database, which is defined in the read-only file..">RomTitle()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aSetDefaultCountry%28%29" title="Sets the default country">SetDefaultCountry()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aSetDistanceUnits%28%29" title="Sets the distance units used by the session">SetDistanceUnits()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aSetHome%28%29" title="Sets the home city">SetHome()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aUpdateCity%28%29" title="Updates the information for a city">UpdateCity()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aUpdateCountry%28%29" title="Updates the data of an existing country">UpdateCountry()</a></code>, <code class="ApiItem"><a href="RWorldServerClass.html#%3a%3aRWorldServer%3a%3aVersion%28%29" title="Gets the version number of the world server">Version()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase" title="Handle to an object">RHandleBase</a></code>:
<br><code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aClose%28%29" title="Closes the handle">Close()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aDuplicate%28%29" title="Creates a valid handle to the Kernel object to which the specified thread already has a handle">Duplicate()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aHandle%28%29" title="Retrieves the handle-number of the object associated with this handle">Handle()</a></code>,
<code class="ApiItem"><a href="../Handles/RHandleBaseClass.html#%3a%3aRHandleBase%3a%3aSetHandle%28%29" title="Use this function to set the handle-number of this handle to the specified value">SetHandle()</a></code></p>
<p>Inherited from <code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase" title="Client-side handle to a session with a server">RSessionBase</a></code>:
<br><code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aAttach%28%29" title="Explicitly attaches a thread to the session">Attach()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aCreateSession%28%29" title="Creates a session with a server">CreateSession()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aEAutoAttach" title="Client threads are auto-attached to the session">EAutoAttach</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aEExplicitAttach" title="Client threads explicitly attach to the session">EExplicitAttach</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aSend%28%29" title="Sends a blind message to the server -- no reply is expected">Send()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aSendReceive%28%29" title="Sends a message to the server and waits synchronously for the reply">SendReceive()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aSetRetry%28%29" title="Changes the retry parameters used to resend a message if the server is busy">SetRetry()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aShare%28%29" title="Makes the session shared among all threads in the process">Share()</a></code>,
<code class="ApiItem"><a href="../ClientServer/RSessionBaseClass.html#%3a%3aRSessionBase%3a%3aTAttachMode" title="Indicates whether threads in the process are automatically attached to the session when passed as a parameter to the Share() function">TAttachMode</a></code></p>
<a name="2.6"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Connecting to the world server</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aConnect%28%29"></a>
<hr size="1" noshade>
<h3><code>Connect()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Connect();</code></p><h4 class="subheading">Description</h4>
<p>Connects the client process to the world server.</p>
<p>Note:</p>
<ul>
<li>
<p>As with any server, the connection should be closed after
use. <code>RHandleBase</code> provides the necessary <code>Close()</code>
function, which should be called when the server session is no longer
required.</p>
</li>
</ul>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aVersion%28%29"></a>
<hr size="1" noshade>
<h3><code>Version()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TVersion Version() const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the version number of the world server. The version number
may be incremented in future releases of the world server. If extra features
are added in such releases, the version number may be used by application
programs as a basis for assessing the capabilities of the world server.
Version-specific functions will be marked as such in the SDK
documentation.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TVersion </code></td>
<td class="Cell"><p class="ValueDesc"> The version number. </p></td>
</tr>
</table></td></tr></table>
<a name="2.7"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>City&nbsp;modifying</h2>
</div><div class="Bodytext">
<h4 class="subheading">Description</h4>
<p>To update or delete a city, the session must first obtain the correct
<code>TWldID</code>. A <code>TCityData</code> is filled with the data and the
server is called to add the information.</p>
<p>Contains the functions used to add, update, and delete city
information.</p>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aAddCity%28%29"></a>
<hr size="1" noshade>
<h3><code>AddCity()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt AddCity(const TCityData&amp; aCity);</code></p><h4 class="subheading">Description</h4>
<p>Adds a new city to the world database.</p>
<p>Cities must be in a valid country, and have a valid DST zone. City
names must be unique within a country&nbsp;&#8212; though the same city name
may be used for cities in different countries. </p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TCityData&amp; aCity </code></td>
<td class="Cell"><p class="ValueDesc"> The new city information. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. <code>KErrArgument</code> is returned if the city
already exists, or if the city data doesn&#8217;t specify a city name. It is
also returned if the named country does not exist, or if the country name is
not specified. </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.4"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aUpdateCity%28%29"></a>
<hr size="1" noshade>
<h3><code>UpdateCity()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt UpdateCity(TWorldId&amp; aId,const TCityData&amp; aCity);</code></p><h4 class="subheading">Description</h4>
<p>Updates the information for a city.</p>
<p>The new information must also be valid&nbsp;&#8212; cities must be
in a valid country, and have a valid DST zone. City names must be unique within
a country&nbsp;&#8212; though the same city name may be used for cities in
different countries.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the city to be updated. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TCityData&amp; aCity </code></td>
<td class="Cell"><p class="ValueDesc"> The new city information </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. <code>KErrArgument</code> is returned if the updated
city name overwrites an existing city, or if it isn&#8217;t specified. It is
also returned if the updated country name does not exist, or if the country
name is not specified. </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.5"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aIsCityDeletable%28%29"></a>
<hr size="1" noshade>
<h3><code>IsCityDeletable()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt IsCityDeletable(TInt&amp; aDeleteDeniedFlags,const TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Tests whether a given city can be deleted. Capital cities, the home
city, and all cities from the read-only file cannot be deleted.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt&amp; aDeleteDeniedFlags </code></td>
<td class="Cell"><p class="ValueDesc"> Bitmask of the <code>TWldDeleteDeniedFlags</code> flags. Gives the
reasons why the specified <code>TWorldID</code> cannot be deleted. The value
returned is 0 if the country can be deleted. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the city which is being queried. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.7.6"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aDeleteCity%28%29"></a>
<hr size="1" noshade>
<h3><code>DeleteCity()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt DeleteCity(TWorldId&amp; aId);</code></p><h4 class="subheading">Description</h4>
<p>Deletes a city from the world database. Capital cities, the home city,
and all cities from the read-only file cannot be deleted.</p>
<p>Note:</p>
<ul>
<li>
<p>An error will occur if an attempt is made to delete a city which
cannot be, or is already, deleted.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the city which is to be deleted. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>City navigation</h2>
</div><div class="Bodytext">
<h4 class="subheading">Description</h4>
<p>The cities are sorted according to their name by the locale alphabet
order.</p>
<a name="2.8.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aNumberCities%28%29"></a>
<hr size="1" noshade>
<h3><code>NumberCities()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt NumberCities() const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the number of cities in the world database.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the number of cities in the database. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.4"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aFirstCity%28%29"></a>
<hr size="1" noshade>
<h3><code>FirstCity()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt FirstCity(TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the ID of the first city&nbsp;in the selected locale. </p>
<p>The locale can either be the current country or the whole world database,
and is defined by the Select mode of the <code>TWorldId</code>. </p>
<p>Notes:</p>
<ul>
<li>
<p>&nbsp;The first city is the one with the lowest alphabetic
order.</p>
</li>
<li>
<p>A search in the country locale will display the first city in the
country. A search in the world local gets the first city in the whole
database.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> Specifies the locale for which the search is to be carried
out&#0160;&#8212; over the whole database, or in the current country. On
return, contains the ID of the first city within the specified locale. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.5"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aNextCity%28%29"></a>
<hr size="1" noshade>
<h3><code>NextCity()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt NextCity(TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the ID of the next city&nbsp;in the selected locale. </p>
<p>The locale can either be the current country or the whole world database,
and is defined by the Select mode of the <code>TWorldId</code>. </p>
<p>Notes:</p>
<ul>
<li>
<p>The next city is the next within the selected locale, where the cities
are ordered alphabetically.</p>
</li>
<li>
<p>A search in the country locale will display the next city in the country.
A search in the world locale gets the next city in the whole database.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> Specifies the locale within which the next city is to be
found&#0160;&#8212; over the whole database, or in the current country. On
return, contains the ID of the next city in the specified locale. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. <code>KErrNotFound</code> is returned if this function
is called when the current city is the last city. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.6"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aPrevCity%28%29"></a>
<hr size="1" noshade>
<h3><code>PrevCity()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt PrevCity(TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the ID of the previous city in the selected locale. </p>
<p>The locale can either be the current country or the whole world database,
and is defined by the Select mode of the <code>TWorldId</code>. </p>
<p>Notes:</p>
<ul>
<li>
<p>The previous city is the city before the current city within the selected
locale, where the cities are ordered alphabetically.</p>
</li>
<li>
<p>A search in the country locale will display the previous city within the
country. A search in the world locale gets the previous city for the whole
database.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> Specifies the locale within which the previous city is to be
found&#0160;&#8212; over the whole database, or in the current country. On
return, contains the ID of the previous city within the specified
locale.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, <code>KErrNotFound </code>when the
current city is the first city, otherwise another of the system-wide error
codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.7"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aLastCity%28%29"></a>
<hr size="1" noshade>
<h3><code>LastCity()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt LastCity(TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the ID of the last city&nbsp;&#8212; in the selected
locale.</p>
<p>The locale can either be the current country or the whole world database,
and is defined by the Select mode of the <code>TWorldId</code>.</p>
<p>Notes:</p>
<ul>
<li>
<p>The last city is the one with the highest alphabetic order.</p>
</li>
<li>
<p>A search in the country locale will display the last city in the country.
A search in the world locale gets the last city in the whole database.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> Specifies the locale within which the last city is to be
found&#0160;&#8212; over the whole database, or in the current country. On
return, contains the ID of the last city in the specified locale. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.8"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aFindCity%28%29"></a>
<hr size="1" noshade>
<h3><code>FindCity()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt FindCity(TWorldId&amp; aCity,const TDesC&amp; aPartialCity) const;</code></p><h4 class="subheading">Description</h4>
<p>Locates the ID of the first city that has a name which starts with the
search string. </p>
<p>The search string can contain a partial name or the full name. The string
may be capitalised, uncapitalised, or a combination of the two. If several
cities have names matching the search string, then the first city found is
returned&nbsp;&#8212; the lowest in the alphabetic order.</p>
<p>Note:</p>
<ul>
<li>
<p>The function cannot locate strings in the middle of city names.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aCity </code></td>
<td class="Cell"><p class="ValueDesc"> Specifies the locale within which the city is to be
found&#0160;&#8212; over the whole database, or in the current country. On
return, contains the ID of the first city matching the partial name within the
specified locale. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aPartialCity </code></td>
<td class="Cell"><p class="ValueDesc"> A descriptor containing the search string for the city. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, <code>KErrNotFound</code> if no
city matches the search string, otherwise another of the system-wide error
codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.8.9"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aFind%28%29"></a>
<hr size="1" noshade>
<h3><code>Find()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Find(TWorldId&amp; aId,const TDesC&amp; aCity,const TDesC&amp; aCountry) const;</code></p><h4 class="subheading">Description</h4>
<p>Finds the ID of the city which precisely matches the specified city and
country names.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the ID of the specified city. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aCity </code></td>
<td class="Cell"><p class="ValueDesc"> The city name. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aCountry </code></td>
<td class="Cell"><p class="ValueDesc"> The country name. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, <code>KErrNotFound</code> if there
is no match between the city and country names and those of a city in the world
database, otherwise another of the system-wide error codes.. </p></td>
</tr>
</table></td></tr></table>
<a name="2.9"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Country modifying</h2>
</div><div class="Bodytext">
<h4 class="subheading">Description</h4>
<p>To update or delete a country, the session must first obtain the
correct<code>TWldID</code>. To add a country, a <code>TCountryData</code> is
filled with the data and the server is called to add the information.</p>
<p>Contains the functions used to add, update, and delete country
information. </p>
<a name="2.9.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aAddCountry%28%29"></a>
<hr size="1" noshade>
<h3><code>AddCountry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt AddCountry(const TCountryData&amp; aCountry,const TCityData&amp; aCapital);</code></p><h4 class="subheading">Description</h4>
<p>Adds a new country, with its capital city, to the world database. Country
names must be unique.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TCountryData&amp; aCountry </code></td>
<td class="Cell"><p class="ValueDesc"> The country to be added to the database. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TCityData&amp; aCapital </code></td>
<td class="Cell"><p class="ValueDesc"> The country&#8217;s capital. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, <code>KErrArgument</code> if the
name of the new country is not specified or if the capital city information
indicates that it is not in the country, otherwise another of the system-wide
error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.9.4"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aUpdateCountry%28%29"></a>
<hr size="1" noshade>
<h3><code>UpdateCountry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt UpdateCountry(TWorldId&amp; aId,const TCountryData&amp; aCountry);</code></p><h4 class="subheading">Description</h4>
<p>Updates the data of an existing country. Updated country names must be
unique.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the country to be updated. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TCountryData&amp; aCountry </code></td>
<td class="Cell"><p class="ValueDesc"> The new country data. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, <code>KErrArgument</code> is
returned if the updated country name is not specified or if it is not unique,
otherwise another of the system-wide error codes.
<!--<listitem style="list bullet"><code>KErrNone</code> if successful, <code>KErrArgument</code> is returned if the updated country name is not specified or if it is not unique, otherwise another of the system-wide error codes.</listitem>
--></p></td>
</tr>
</table></td></tr></table>
<a name="2.9.5"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aIsCountryDeletable%28%29"></a>
<hr size="1" noshade>
<h3><code>IsCountryDeletable()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt IsCountryDeletable(TInt&amp; aDeleteDeniedFlags,const TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Determines whether a given country can be deleted. The home country,
default country, and all countries from the read-only file cannot be
deleted.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt&amp; aDeleteDeniedFlags </code></td>
<td class="Cell"><p class="ValueDesc"> Bitmask of the <code>TWldDeleteDeniedFlags</code> flags. Gives the
reasons why the specified <code>TWorldID</code> cannot be deleted. The value
returned is 0 if the country can be deleted. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the country which is being queried. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes </p></td>
</tr>
</table></td></tr></table>
<a name="2.9.6"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aDeleteCountry%28%29"></a>
<hr size="1" noshade>
<h3><code>DeleteCountry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt DeleteCountry(TWorldId&amp; aId);</code></p><h4 class="subheading">Description</h4>
<p>Deletes a country from the world database.</p>
<p>The home country, default country, and all countries from the read-only
file cannot be deleted.</p>
<p>Notes:</p>
<ul>
<li>
<p>An error will occur if an attempt is made to delete a country which is
already deleted.</p>
</li>
<li>
<p>If a country is deleted, its cities are added to the null country.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the country to be deleted. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.10"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Country navigation</h2>
</div><div class="Bodytext">
<h4 class="subheading">Description</h4>
<p>The countries are sorted according to their name by alphabetic
order.</p>
<a name="2.10.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aNumberCountries%28%29"></a>
<hr size="1" noshade>
<h3><code>NumberCountries()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt NumberCountries() const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the number of countries in the world database.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"> The number of countries in the world database. </p></td>
</tr>
</table></td></tr></table>
<a name="2.10.4"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aFirstCountry%28%29"></a>
<hr size="1" noshade>
<h3><code>FirstCountry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt FirstCountry(TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the ID of the first country in the world database. </p>
<p>Notes:</p>
<ul>
<li>
<p>The first country is the one with the lowest alphabetic order.</p>
</li>
<li>
<p>Country searches are not locale specific&nbsp;&#8212; searches span
the whole world database. This function ignores the search mode select state
defined in the <code>TWorldId</code>.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the ID of the first country. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.10.5"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aNextCountry%28%29"></a>
<hr size="1" noshade>
<h3><code>NextCountry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt NextCountry(TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the ID of the next country in the world database. </p>
<p>Notes:</p>
<ul>
<li>
<p>The next country is the country after the current country, where the
database is ordered alphabetically.</p>
</li>
<li>
<p>Country searches are not locale specific&nbsp;&#8212; searches span
the whole world database. This function ignores the search mode select state
defined in the <code>TWorldId</code>.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the ID of the next country. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, <code>KErrNotFound</code> when the
current country is the last country, otherwise another of the system-wide error
codes </p></td>
</tr>
</table></td></tr></table>
<a name="2.10.6"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aPrevCountry%28%29"></a>
<hr size="1" noshade>
<h3><code>PrevCountry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt PrevCountry(TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the ID of the previous country in the world database. </p>
<p>Notes:</p>
<ul>
<li>
<p>The previous country is the country preceding the current country, where
the database is ordered alphabetically.</p>
</li>
<li>
<p>Country searches are not locale specific&nbsp;&#8212; searches span
the whole world database. This function ignores the search mode select state
defined in the <code>TWorldId</code>.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the ID of the previous country. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, <code>KErrNotFound</code> when the
current country is the first country, otherwise another of the system-wide
error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.10.7"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aLastCountry%28%29"></a>
<hr size="1" noshade>
<h3><code>LastCountry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt LastCountry(TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the ID of the last country in the world database. </p>
<p>Notes:</p>
<ul>
<li>
<p>The last country in the database is the one with the highest alphabetic
order.</p>
</li>
<li>
<p>Country searches are not locale specific&nbsp;&#8212; searches span
the whole world database. This function ignores the search mode select state
defined in the <code>TWorldId</code>.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the ID of the last country. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.10.8"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aFindCountry%28%29"></a>
<hr size="1" noshade>
<h3><code>FindCountry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt FindCountry(TWorldId&amp; aCountry,const TDesC&amp; aPartialCountry) const;</code></p><h4 class="subheading">Description</h4>
<p>Locates the ID of the first country which starts with the search
string.</p>
<p>The search string can contain a partial name or the full name. The string
may be capitalised, uncapitalised, or a combination of the two. If several
countries have names matching the search string, then the first country found
is returned&nbsp;&#8212; the lowest in the alphabetic order.</p>
<p>Note:</p>
<ul>
<li>
<p>The function cannot locate strings in the middle of country names.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aCountry </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the ID of the country. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aPartialCountry </code></td>
<td class="Cell"><p class="ValueDesc"> A descriptor containing the search string, or partial country
name.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc"><code>KErrNone</code> if successful, <code>KErrNotFound</code> if no
country matches the search string, otherwise another of the system-wide error
codes.
<!--<listitem style="list bullet"><code>KErrNone</code> if successful, <code>KErrNotFound</code> if no country matches the search string, otherwise another of the system-wide error codes.</listitem>
--></p></td>
</tr>
</table></td></tr></table>
<a name="2.11"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>File functions</h2>
</div><div class="Bodytext">
<h4 class="subheading">Description</h4>
<p>This section describes the functions which can be used to locate, import,
export, and delete the effects of data files.</p>
<p>New cities and countries can be added to the world server by importing a
data file. Importing data updates any information of existing cities or
countries. The import method cannot be used to delete any data that is set
already, and can import only those cities or countries that obey referential
integrity&nbsp;&#8212; e.g. cities must always be added to a country, a
country cannot be added without a capital city etc.</p>
<a name="2.11.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aDataFileLocation%28%29"></a>
<hr size="1" noshade>
<h3><code>DataFileLocation()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt DataFileLocation(TFileName&amp; aDataFile) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the location of the most recently imported user data file.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TFileName&amp; aDataFile </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the name and path of the most recently imported data
file. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.11.4"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aDataFileOpen%28%29"></a>
<hr size="1" noshade>
<h3><code>DataFileOpen()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt DataFileOpen(const TDesC&amp; aDataFile);</code></p><h4 class="subheading">Description</h4>
<p>Allows clients to import a specified world database data file. </p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aDataFile </code></td>
<td class="Cell"><p class="ValueDesc"> The location of the data file to be imported, including drive, path and
file name. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.11.5"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aDataFileRevertToSaved%28%29"></a>
<hr size="1" noshade>
<h3><code>DataFileRevertToSaved()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt DataFileRevertToSaved();</code></p><h4 class="subheading">Description</h4>
<p>Reverts the world database to its state when the data file
was&nbsp;last saved&#0160;&#8212;  discarding data which was not saved.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.11.6"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aDataFileSave%28%29"></a>
<hr size="1" noshade>
<h3><code>DataFileSave()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt DataFileSave();</code></p><h4 class="subheading">Description</h4>
<p>Saves the world database data&nbsp;&#8212; added by the
user&nbsp;&#8212; to the current data file.</p>
<p>Notes:</p>
<ul>
<li>
<p>This function exports a world server data file.</p>
</li>
<li>
<p>To save the file to another location,
use<code>DataFileSaveAs()</code>.</p>
</li>
</ul>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.11.7"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aDataFileSaveAs%28%29"></a>
<hr size="1" noshade>
<h3><code>DataFileSaveAs()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt DataFileSaveAs(const TDesC&amp; aDataFile,TBool aReplace=EFalse);</code></p><h4 class="subheading">Description</h4>
<p>Saves the world database data&nbsp;&#8212; added by the
user&nbsp;&#8212; to a specified data file.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aDataFile </code></td>
<td class="Cell"><p class="ValueDesc"> The name, including path, of the data file in which the user added data
is to be saved. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TBool aReplace=EFalse </code></td>
<td class="Cell"><p class="ValueDesc"> This specifies whether or not the function will allow an existing data
file to be over-written. By default the function does not over-write data
files. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. <code>KErrAlreadyExists</code> is returned if the data
file exists and <code>aReplace</code> is set to disallow overwriting. </p></td>
</tr>
</table></td></tr></table>
<a name="2.11.8"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aResetAllData%28%29"></a>
<hr size="1" noshade>
<h3><code>ResetAllData()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt ResetAllData();</code></p><h4 class="subheading">Description</h4>
<p>Resets the database to the state it had when first opened, and notifies
the clients.</p>
<p>Note:</p>
<ul>
<li>
<p>When the database is first opened it contains only the information in the
read-only file. This file may have originated either from ROM (Z:\System\Data\
directory) or RAM (C:\System\Localization\
directory).</p>
</li>
</ul>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.12"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Home location</h2>
</div><div class="Bodytext">
<a name="2.12.2"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aHome%28%29"></a>
<hr size="1" noshade>
<h3><code>Home()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt Home(TWorldId&amp; aHome) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the ID of the home city.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aHome </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the ID of the home city. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.12.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aSetHome%28%29"></a>
<hr size="1" noshade>
<h3><code>SetHome()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt SetHome(const TWorldId&amp; aId);</code></p><h4 class="subheading">Description</h4>
<p>Sets the home city.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the city which is to become the home city. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.13"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Default country</h2>
</div><div class="Bodytext">
<a name="2.13.2"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aDefaultCountry%28%29"></a>
<hr size="1" noshade>
<h3><code>DefaultCountry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt DefaultCountry(TWorldId&amp; aCountry) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the ID of the default country.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aCountry </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the ID of the default country. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.13.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aSetDefaultCountry%28%29"></a>
<hr size="1" noshade>
<h3><code>SetDefaultCountry()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt SetDefaultCountry(const TWorldId&amp; aId);</code></p><h4 class="subheading">Description</h4>
<p>Sets the default country.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the country which is to become the default country. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.14"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>City/Country data</h2>
</div><div class="Bodytext">
<a name="2.14.2"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aCityData%28%29"></a>
<hr size="1" noshade>
<h3><code>CityData()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt CityData(TCityData&amp; aCity,const TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the city data associated with the specified ID.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TCityData&amp; aCity </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the city data. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the city. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.14.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aCountryData%28%29"></a>
<hr size="1" noshade>
<h3><code>CountryData()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt CountryData(TCountryData&amp; aCountry,const TWorldId&amp; aId) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the country data associated with the specified ID.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TCountryData&amp; aCountry </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the country data. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the country. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.14.4"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aGetCountryNameByISOCode%28%29"></a>
<hr size="1" noshade>
<h3><code>GetCountryNameByISOCode()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt GetCountryNameByISOCode(const TDesC&amp; aCode, TDes&amp; aCountry) const;</code></p><h4 class="subheading">Support</h4>
<p>Supported from 6.0
</p><h4 class="subheading">Description</h4>
<p>Gets the country name for the given ISO country code.</p>
<p>Note:</p>
<ul>
<li>
<p>Not all country names returned by this method represent countries in the
World database. </p>
</li>
<li>
<p>ISO country codes are defined in ISO3166-1, and are most commonly used as
country extensions in email addresses, e.g. uk, au.</p>
</li>
</ul>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TDesC&amp; aCode </code></td>
<td class="Cell"><p class="ValueDesc"> The ISO country code. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TDes&amp; aCountry </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the name of the country. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful or <code>KErrNotFound</code> if
there is an attempt to get a country name with an undefined country code.
Otherwise another of the system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.15"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Distance units</h2>
</div><div class="Bodytext">
<a name="2.15.2"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aDistanceUnits%28%29"></a>
<hr size="1" noshade>
<h3><code>DistanceUnits()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt DistanceUnits(TWldDistanceUnits&amp; aDistanceUnit) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the distance units used by the session.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWldDistanceUnits&amp; aDistanceUnit </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the session&#8217;s distance units. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.15.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aSetDistanceUnits%28%29"></a>
<hr size="1" noshade>
<h3><code>SetDistanceUnits()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt SetDistanceUnits(TWldDistanceUnits aUnit);</code></p><h4 class="subheading">Description</h4>
<p>Sets the distance units used by the session.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWldDistanceUnits aUnit </code></td>
<td class="Cell"><p class="ValueDesc"> The new distance units. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.16"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Distance, sunlight and city location calculations</h2>
</div><div class="Bodytext">
<a name="2.16.2"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aCalculateDistance%28%29"></a>
<hr size="1" noshade>
<h3><code>CalculateDistance()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt CalculateDistance(TInt&amp; aDistance,const TWorldId&amp; aLeft,const TWorldId&amp; aRight) const;</code></p><h4 class="subheading">Description</h4>
<p>Calculates the distance between two cities&nbsp;&#8212; using the
currently selected distance units.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt&amp; aDistance </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the distance between the two cities. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TWorldId&amp; aLeft </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the first city. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TWorldId&amp; aRight </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the second city. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.16.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aCalculateSunlight%28%29"></a>
<hr size="1" noshade>
<h3><code>CalculateSunlight()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt CalculateSunlight(TTime&amp; aSunrise,TTime&amp; aSunset,const TWorldId&amp; aId,const TTime&amp; aDate=Time::NullTTime()) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets a city&#8217;s sunset and sunrise time on a specified date.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TTime&amp; aSunrise </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the sunrise time. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TTime&amp; aSunset </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the sunset time. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the city for which the sunset and sunrise times are to be
calculated. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TTime&amp; aDate=Time::NullTTime() </code></td>
<td class="Cell"><p class="ValueDesc"> The date for which the sunrise/sunset times are to be calculated.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.16.4"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aNearestCity%28%29"></a>
<hr size="1" noshade>
<h3><code>NearestCity()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt NearestCity(const TPoint&amp; aMapCoord,const TWorldId* aCityToBeat=NULL);</code></p><h4 class="subheading">Description</h4>
<p>Initialises the parameters for a next city search. To actually start the
search, use the <code>NextNearestCity()</code> function.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> const TPoint&amp; aMapCoord </code></td>
<td class="Cell"><p class="ValueDesc"> The map co-ordinate for which the nearest city is to be found
(pixels).</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> const TWorldId* aCityToBeat=NULL </code></td>
<td class="Cell"><p class="ValueDesc"> The ID of the reference city. The search spans a specified number of
cites, starting from this ID. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.16.5"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aNextNearestCity%28%29"></a>
<hr size="1" noshade>
<h3><code>NextNearestCity()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>TInt NextNearestCity(TWorldId&amp; aId,TInt aMaxNumberToCompare=KMaxTInt);</code></p><h4 class="subheading">Description</h4>
<p>Gets the results of a search for the city nearest to a map
co-ordinate&nbsp;&#8212; the co-ordinate is specified using
the<code>NearestCity()</code> function.</p>
<p>The search compares the distance between each city and the map
co-ordinate. It starts at the reference city and continues the comparison until
it reaches a specified number of cities. By default, the search
spans<code>KMaxTInt</code> cities, which is effectively the entire
database.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TWorldId&amp; aId </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the ID of the nearest city. </p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt aMaxNumberToCompare=KMaxTInt </code></td>
<td class="Cell"><p class="ValueDesc"> The number of cities to compare in the search. </p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TInt </code></td>
<td class="Cell"><p class="ValueDesc">
<code>KErrNone</code> if successful, otherwise another of the
system-wide error codes. </p></td>
</tr>
</table></td></tr></table>
<a name="2.17"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Notifications</h2>
</div><div class="Bodytext">
<a name="2.17.2"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aNotifyOnChange%28%29"></a>
<hr size="1" noshade>
<h3><code>NotifyOnChange()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void NotifyOnChange(TRequestStatus&amp; aStatus);</code></p><h4 class="subheading">Description</h4>
<p>Provides notification of changes to the home city, default country,
system time, and database files&#0160;&#8212;  asynchronous.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TRequestStatus&amp; aStatus </code></td>
<td class="Cell"><p class="ValueDesc"> A variable that indicates the completion status of the request. </p></td>
</tr>
</table></td></tr></table>
<a name="2.17.3"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aNotifyOnChangeCancel%28%29"></a>
<hr size="1" noshade>
<h3><code>NotifyOnChangeCancel()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void NotifyOnChangeCancel();</code></p><h4 class="subheading">Description</h4>
<p>Cancels an outstanding request for notification of changes to the home
city, default country, system time, and database files.</p>
<a name="2.18"></a>
</div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>ROM title</h2>
</div><div class="Bodytext">
<a name="2.18.2"></a></div><div class="Head3">
<a name="%3a%3aRWorldServer%3a%3aRomTitle%28%29"></a>
<hr size="1" noshade>
<h3><code>RomTitle()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void RomTitle(TDes&amp; aText) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the title of the currently loaded world database, which is defined
in the read-only file..</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value"> TDes&amp; aText </code></td>
<td class="Cell"><p class="ValueDesc"> On return, contains the title of the world database. </p></td>
</tr>
</table></td></tr></table>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../_stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
