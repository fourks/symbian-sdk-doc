<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>TKey</title>
<link href="../../../_stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../_stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../_stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../_stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../_stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../_stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../_stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="index.html"><img src="../../../_stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="TKeyArrayFixClass.html"><img src="../../../_stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Array&nbsp;Keys</a>&nbsp;<span class="separator">&#187;</span>
TKey</p>

<hr noshade size="1">
<div class="AuthoredContent">

<p>Location:
<code>e32std.h</code>
<br>Link against: <code>euser.lib</code>
</p>
</div><div class="Head1">
<a name="%3a%3aTKey"></a>

<h1>Class <code>TKey</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>TKey</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Defines the characteristics of a key used to  access the elements of an array.</p><p>The class is abstract and cannot be instantiated. A derived class must be defined and implemented.</p><p>The classes <code>TKeyArrayFix</code>, <code>TKeyArrayVar</code> and <code>TKeyArrayPak</code>, derived from <code>TKey</code>, are already supplied to implement keys for the  fixed length element, variable length element and packed arrays.</p><p>A derived class would normally be written to define the characteristics of a key for a non standard array.</p><p>Defined in <code>TKey</code>:
<br><code class="ApiItem"><a href="TKeyClass.html#%3a%3aTKey%3a%3aAt%28%29" title="Gets a pointer to the key of a specified array element">At()</a></code>, <code class="ApiItem"><a href="TKeyClass.html#%3a%3aTKey%3a%3aCompare%28%29" title="Compares the keys of two array elements">Compare()</a></code>, <code class="ApiItem"><a href="TKeyClass.html#%3a%3aTKey%3a%3aSetPtr%28%29" title="Sets the pointer to a sample element whose key is to be used for comparison">SetPtr()</a></code>, <code class="ApiItem"><a href="TKeyClass.html#%3a%3aTKey%3a%3aTKey%28%29" title="Constructs the characteristics of a numeric key">TKey()</a></code>
</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="TKeyArrayFixClass.html#%3a%3aTKeyArrayFix" title="Defines the characteristics of a key used to access the elements of arrays of fixed length objects"><code class="ApiItem">TKeyArrayFix</code></a></li>
<li><a href="TKeyArrayVarClass.html#%3a%3aTKeyArrayVar" title="Defines the characteristics of a key used to access the elements of arrays of variable length objects"><code class="ApiItem">TKeyArrayVar</code></a></li>
<li><a href="TKeyArrayPakClass.html#%3a%3aTKeyArrayPak" title="Defines the characteristics of a key used to access the elements of packed arrays"><code class="ApiItem">TKeyArrayPak</code></a></li>
</ul>
<a name="2.6"></a>
</div><div class="Head2">
<hr size="2" noshade>
<h2>Construction</h2>
</div><div class="Bodytext">
<a name="2.6.2"></a></div><div class="Head3">
<a name="%3a%3aTKey%3a%3aTKey%28%29"></a>
<hr size="1" noshade>
<h3><code>TKey()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: TKey();</code></p><h4 class="subheading">Description</h4>
<p>Protected default constructor.</p><p>This constructor prevents <code>TKey</code> objects  from being directly constructed. </p>
<a name="2.6.3"></a></div><div class="Head3">
<a name="%3a%3aTKey%3a%3aTKey%28%29"></a>
<hr size="1" noshade>
<h3><code>TKey()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: TKey(TInt anOffset,TKeyCmpText aType);</code></p><h4 class="subheading">Description</h4>
<p>Constructs the characteristics of a descriptor type key.</p><p>This constructor should be called by the corresponding derived class constructor that takes the  same arguments. Typically, the derived class constructor  calls this constructor in its constructor initialization list.</p><p>No length value is passed as this is implied by the type of key.</p><p>Note that the constructor sets the offset value into the protected data member <code>iKeyOffset</code>.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset of the key from the start of an array element.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TKeyCmpText aType</code></td>
<td class="Cell"><p class="ValueDesc">An enumeration which defines the type of comparison to be made between two descriptor keys.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="TKeyCmpTextEnum.html#%3a%3aTKeyCmpText" title="Governs the type of comparison to be made between descriptor keys or between text keys"><code class="ApiItem">TKeyCmpText</code></a></li>
</ul>
<a name="2.6.4"></a></div><div class="Head3">
<a name="%3a%3aTKey%3a%3aTKey%28%29"></a>
<hr size="1" noshade>
<h3><code>TKey()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: TKey(TInt anOffset,TKeyCmpText aType,TInt aLength);</code></p><h4 class="subheading">Description</h4>
<p>Constructs the characteristics of a text key.</p>
<p>This constructor should be called by the corresponding derived class constructor that takes the  same arguments. Typically, the derived class constructor  calls this constructor in its constructor initialization list.</p><p>Note that the constructor sets the offset value into the protected data member <code>iKeyOffset</code>.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset of the key from the start of an array element.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TKeyCmpText aType</code></td>
<td class="Cell"><p class="ValueDesc">An enumeration which defines the type of comparison to be made between two text keys.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aLength</code></td>
<td class="Cell"><p class="ValueDesc">The length of the text key.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="TKeyCmpTextEnum.html#%3a%3aTKeyCmpText" title="Governs the type of comparison to be made between descriptor keys or between text keys"><code class="ApiItem">TKeyCmpText</code></a></li>
</ul>
<a name="2.6.5"></a></div><div class="Head3">
<a name="%3a%3aTKey%3a%3aTKey%28%29"></a>
<hr size="1" noshade>
<h3><code>TKey()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: TKey(TInt anOffset,TKeyCmpNumeric aType);</code></p><h4 class="subheading">Description</h4>
<p>Constructs the characteristics of a numeric key.</p>
<p>This constructor should be called by the corresponding derived class constructor that takes the  same arguments. Typically, the derived class constructor  calls this constructor in its constructor initialization list.</p><p>No length value is passed as this is implied by the type of key.</p><p>Note that the constructor sets the offset value into the protected data member <code>iKeyOffset</code>.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anOffset</code></td>
<td class="Cell"><p class="ValueDesc">The offset of the key from the start of an array element.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TKeyCmpNumeric aType</code></td>
<td class="Cell"><p class="ValueDesc">An enumeration which defines the type of the numeric key.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="TKeyCmpNumericEnum.html#%3a%3aTKeyCmpNumeric" title="Governs the type of comparison to be made between numeric keys"><code class="ApiItem">TKeyCmpNumeric</code></a></li>
</ul>
<a name="2.7"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../_stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Other member functions</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aTKey%3a%3aSetPtr%28%29"></a>
<hr size="1" noshade>
<h3><code>SetPtr()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>void SetPtr(const TAny* aPtr);</code></p><h4 class="subheading">Description</h4>
<p>Sets the pointer to a sample element whose key is to be used for comparison.</p><p> The element can be in an existing array or it can be located anywhere in addressable memory.</p><p>The <code>At()</code> member function supplied by  a derived class must return a pointer to this sample element's key when passed an index value of <code>KIndexPtr</code>.</p>
<p><code>SetPtr()</code> must be called before calling <code>User::BinarySearch()</code> because this algorithm uses the key of this sample element as the basis for searching the array.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">const TAny* aPtr</code></td>
<td class="Cell"><p class="ValueDesc">A pointer to a sample element.</p></td>
</tr>
</table></td></tr></table>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aTKey%3a%3aCompare%28%29"></a>
<hr size="1" noshade>
<h3><code>Compare()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TInt Compare(TInt aLeft,TInt aRight) const;</code></p><h4 class="subheading">Description</h4>
<p>Compares the keys of two array elements.</p><p>This function is called by <code>User::BinarySearch()</code> and <code>User::QuickSort()</code>.</p><p>The position of the elements are identified by the specified index values. The default implementation  uses the <code>At()</code> virtual function to convert the index values into pointers to the elements themselves.</p><p>The default implementation also uses:</p><ul><li><p> the <code>TDesC</code> comparison functions to compare descriptor type keys</p></li><li><p>the <code>Mem</code>  functions to compare text type keys</p></li><li><p>numeric comparison for numeric type keys.</p></li></ul><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aLeft</code></td>
<td class="Cell"><p class="ValueDesc">The index of an array element participating in the comparison, designated the left element.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">TInt aRight</code></td>
<td class="Cell"><p class="ValueDesc">The index of an array element participating in the comparison, designated the right element.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt</code></td>
<td class="Cell"><p class="ValueDesc">Zero, if the two keys are equal; negative, if the left key is less than the right key; positive, if the left key is greater than the right key.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../SystemStaticFunctions/UserClass.html#%3a%3aUser%3a%3aBinarySearch%28%29" title="Performs a binary search for an array element containing a specified key"><code class="ApiItem">User::BinarySearch()</code></a></li>
<li><a href="../SystemStaticFunctions/UserClass.html#%3a%3aUser%3a%3aQuickSort%28%29" title="Quick sorts array elements"><code class="ApiItem">User::QuickSort()</code></a></li>
<li><a href="../Descriptors/TDesCTypedef.html#%3a%3aTDesC" title="Build independent non-modifiable descriptor"><code class="ApiItem">TDesC</code></a></li>
<li><a href="../RawMemory/MemClass.html#%3a%3aMem" title="Contains a set of static functions which perform manipulation of data in memory"><code class="ApiItem">Mem</code></a></li>
</ul>
<a name="2.7.4"></a></div><div class="Head3">
<a name="%3a%3aTKey%3a%3aAt%28%29"></a>
<hr size="1" noshade>
<h3><code>At()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TAny* At(TInt anIndex) const;</code></p><h4 class="subheading">Description</h4>
<p>Gets a pointer to the key of a specified array element.</p><p>The default implementation raises a USER 35 panic.</p><p>The function is called by <code>TKey::Compare()</code>  to compare the keys of two elements.</p><p>The implementation provided by a derived class must convert the  index to a pointer to the key within the corresponding element. The implementation  depends on the design of the array but, as general rule, use the index value to get a pointer to the corresponding element and then add the <code>TKey</code> protected data member <code>iKeyOffset</code> to this pointer to get a pointer to the key itself.</p><p>By convention, the index value is relative to zero; i.e. a zero value refers to the first element in the array. By this convention, the index   can take any value between zero and the number of elements within the array minus one.</p><p>The function must also handle the special index value <code>KIndexPtr</code>. When this value is passed, the function should return a pointer to the key within the sample element. A pointer to the sample element is held in the  protected data member <code>iPtr</code> and can be set up using  <code>SetPtr()</code>.</p><p>The implementation of this function also assumes that the derived class has a pointer to the array itself or has a function for finding it.</p><h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TInt anIndex</code></td>
<td class="Cell"><p class="ValueDesc">The index of the array element or the special index value <code>KIndexPtr</code>.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">TAny*</code></td>
<td class="Cell"><p class="ValueDesc">An untyped pointer to the key within the specified array element or an untyped pointer to the key within the sample element, if  <code>KIndexPtr</code> is passed as an argument.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="UsingTKey.guide.html#ArrayKeys%2eUsing%2dTKey" title="Using TKey Class">Using TKey</a></li>
<li><a href="TKeyClass.html#%3a%3aTKey%3a%3aCompare%28%29" title="Compares the keys of two array elements"><code class="ApiItem">TKey::Compare()</code></a></li>
<li><a href="TKeyClass.html#%3a%3aTKey%3a%3aSetPtr%28%29" title="Sets the pointer to a sample element whose key is to be used for comparison"><code class="ApiItem">TKey::SetPtr()</code></a></li>
</ul>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../_stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
