<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>CApaDocument</title>
<link href="../../../stock/sysdoc.css" type="text/css" rel="stylesheet" media="screen">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css" media="screen"><!--
.ButtonBox { background-image: url(../../../stock/gradient.jpg); }
--></style>
</head>
<body><a name="_top"></a><a name="2"></a>
<table width="100%" border="0" cellspacing="0"
cellpadding="0"><tbody><tr><td colspan=2 class="LogoBox"><a><img
src="../../../stock/symbian.gif" alt="Symbian" width="121"
height="46" border="0"></a><img src="../../../stock/mainheading.gif"
alt=" Developer Library" height="46" width="183"></td></tr><tr><td
class="DocSetBox" width="33%">
<p><a href="../../../Product/Generic/index.html">SYMBIAN OS V6.1 EDITION FOR C++</a></p>
</td><td class="ButtonBox" align="right" width="67%">
<p><a href="../../../_index/index.html"><img
src="../../../stock/btn_index.gif" alt="[Index]" width="53"
height="22" border="0"></a> <a href="../../GlobalGlossary/index.html"><img src="../../../stock/btn_glossary.gif"
alt="[Glossary]" border="0" width="81" height="22"></a> <img src="../../../stock/btn_spacer.gif"
alt="" width="60" height="22"> <a href="CApaCommandLineClass.html"><img src="../../../stock/btn_prev.gif"
alt="[Previous]" border="0" width="85" height="22"></a> <a href="CApaDoorBaseClass.html"><img src="../../../stock/btn_next.gif" alt="[Next]"
border="0" width="58" height="22"></a></p>
</td></tr></table>
<hr noshade size="1">
<p class="breadcrumbNav">&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/index.html">Symbian&nbsp;OS&nbsp;v6.1&nbsp;Edition&nbsp;for&nbsp;C++</a>&nbsp;<span class="separator">&#187;</span>
<a href="../../../Product/Generic/APIReference/index.html">API&nbsp;Reference</a>&nbsp;<span class="separator">&#187;</span>
<a href="index.html">Application&nbsp;Architecture&nbsp;Framework</a>&nbsp;<span class="separator">&#187;</span>
CApaDocument</p>

<hr noshade size="1">
<div class="AuthoredContent">
<p>Location: <code>apparc.h</code><br>Link against: <code>apparc.lib</code></p>
</div><div class="Head1">
<a name="%3a%3aCApaDocument"></a>

<h1>Class <code>CApaDocument</code></h1>
</div><div class="Bodytext"><p class="Prototype"><code>CApaDocument</code></p><h4 class="subheading">Support</h4>
<p>Supported from 5.0
</p><h4 class="subheading">Description</h4>
<p>Defines basic behaviour for documents.</p>
<p>This is the base class for all documents. A document  contains the data associated with the application's content.</p>
<p>The class is derived from by the UI framework and is further derived from by the UI application.</p>
<h4 class="subheading">Derivation</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr><td class="Cell"><code>CApaDocument</code></td><td class="Cell">Defines basic behaviour for documents</td>
</tr>
<tr><td class="Cell"><code><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase">CBase</a></code></td><td class="Cell">Base class for all classes to be instantiated on the heap</td>
</tr>
</table></td></tr></table>
<p>Defined in <code>CApaDocument</code>:
<br><code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aApplication%28%29" title="Returns a pointer to the application that created the document">Application()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aCApaDocument%28%29" title="Constructs the document object with the specified application and process">CApaDocument()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aCapability%28%29" title="Gets the document's capabilities">Capability()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aCreateFileStoreLC%28%29" title="Creates and fully initialises a new filestore and stores the document into it, replacing any existing file of the same name">CreateFileStoreLC()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aDetachFromStoreL%28%29" title="Restores the document to the extent that it does not need the store further">DetachFromStoreL()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aEditL%28%29" title="Starts an editing session on an embedded document">EditL()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aGlassPictureL%28%29" title="Gets an object that can draw a representation of the document's content">GlassPictureL()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aHasChanged%28%29" title="Tests whether the document has changed since it was last persisted">HasChanged()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aIsEmpty%28%29" title="Tests whether the document empty">IsEmpty()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aNewDocumentL%28%29" title="Initialises a new, empty, document with a default setup">NewDocumentL()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aPrintL%28%29" title="Prints the document without a need for it to be open for editing">PrintL()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aProcess%28%29" title="Returns a pointer to the application process associated with this document">Process()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aRestoreL%28%29" title="Restores the document's content and state from data persisted in the specified store">RestoreL()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aSaveL%28%29" title="Stores the document to the current file, commits the changes, and marks the document status as unchanged">SaveL()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aStoreL%28%29" title="Stores the document's content and state to the specified store, recording the identity of any headstreams created in the specified stream dictionary">StoreL()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aTCapability" title="CApaDocument capabilities">TCapability</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aValidatePasswordL%28%29" title="Checks the document password">ValidatePasswordL()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3a%7eCApaDocument%28%29" title="Destructor">~CApaDocument()</a></code>
</p>
<p>Inherited from <code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase" title="Base class for all classes to be instantiated on the heap">CBase</a></code>:
<br><code class="ApiItem"><a href="../BasicTypes/CBaseClass.html#%3a%3aCBase%3a%3aoperator%20new%28%29" title="Allocates the object from the heap and then initialises its contents to binary zeroes">operator new()</a></code></p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../UikonCore/class_CEikDocument.html#%3a%3aCEikDocument" title="The base for all Uikon applications' documents"><code class="ApiItem">CEikDocument</code></a></li>
</ul>
<a name="2.7"></a></div><div class="Head2">
<hr size="2" noshade>
<h2>Construction and document initialisation</h2>
</div><div class="Bodytext">
<a name="2.7.2"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aCApaDocument%28%29"></a>
<hr size="1" noshade>
<h3><code>CApaDocument()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>protected: CApaDocument(CApaApplication&amp; aApp,CApaProcess&amp; aProcess);</code></p><h4 class="subheading">Description</h4>
<p>Constructs the document object with the specified application and process.</p>
<p>Derived classes must define and implement a constructor through which both the associated application and process can be specified. A typical implementation calls this constructor through a constructor initialization list.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CApaApplication&amp; aApp</code></td>
<td class="Cell"><p class="ValueDesc">
The application
</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">
CApaProcess&amp; aProcess</code></td>
<td class="Cell"><p class="ValueDesc">
The process
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../UikonCore/class_CEikDocument.html#%3a%3aCEikDocument" title="The base for all Uikon applications' documents"><code class="ApiItem">CEikDocument</code></a></li>
</ul>
<a name="2.7.3"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aNewDocumentL%28%29"></a>
<hr size="1" noshade>
<h3><code>NewDocumentL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void NewDocumentL() = 0;</code></p><h4 class="subheading">Description</h4>
<p>Initialises a new, empty, document with a default setup.</p><p>This can be the main document or an embedded document. The function is called by the UI framework when it creates a default document file.</p>
<p>An implementation of this function must be supplied by the UI application.</p>
<p>If initialisation fails, the document must be left in the same state as it was before the function was called.</p>
<a name="2.8"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Destruction</h2>
</div><div class="Bodytext">
<a name="2.8.2"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3a%7eCApaDocument%28%29"></a>
<hr size="1" noshade>
<h3><code>~CApaDocument()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual ~CApaDocument();</code></p><h4 class="subheading">Description</h4>
<p>Destructor.</p><p>The implementation is empty.</p>
<a name="2.9"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Changing document content</h2>
</div><div class="Bodytext">
<a name="2.9.2"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aEditL%28%29"></a>
<hr size="1" noshade>
<h3><code>EditL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void EditL(MApaEmbeddedDocObserver* aContainer,TBool aReadOnly=EFalse) = 0;</code></p><h4 class="subheading">Description</h4>
<p>Starts an editing session on an embedded document.</p>
<p>The function should cause the application's UI to be created and the document to be fully restored for editing.</p>
<p>An implementation of this function is supplied by the UI framework.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
MApaEmbeddedDocObserver* aContainer
</code></td>
<td class="Cell"><p class="ValueDesc">
This document's observer.</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">
TBool aReadOnly
</code></td>
<td class="Cell"><p class="ValueDesc">
True, the document should be opened in read-only mode and should not persist any changes made to the content.
False, the document can be opened in read/write mode; this is the default.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../UikonCore/class_CEikDocument.html#%3a%3aCEikDocument" title="The base for all Uikon applications' documents"><code class="ApiItem">CEikDocument</code></a></li>
</ul>
<a name="2.10"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Printing the document</h2>
</div><div class="Bodytext">
<a name="2.10.2"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aPrintL%28%29"></a>
<hr size="1" noshade>
<h3><code>PrintL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void PrintL(const CStreamStore&amp; aSourceStore) = 0;</code></p><h4 class="subheading">Description</h4>
<p>Prints the document without a need for it to be  open for editing.</p>
<p>Typically, this is called from a shell or a file manager type application that wants to print the document without opening it fully.</p>
<p>An empty implementation of this function is supplied by the UI framework.</p>
<p>The UI application can provide its own implementation.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
const CStreamStore&amp; aSourceStore
</code></td>
<td class="Cell"><p class="ValueDesc">
A reference to the store containing the document.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../UikonCore/class_CEikDocument.html#%3a%3aCEikDocument" title="The base for all Uikon applications' documents"><code class="ApiItem">CEikDocument</code></a></li>
</ul>
<a name="2.11"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Information about the document</h2>
</div><div class="Bodytext">
<a name="2.11.2"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aIsEmpty%28%29"></a>
<hr size="1" noshade>
<h3><code>IsEmpty()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TBool IsEmpty() const = 0;</code></p><h4 class="subheading">Description</h4>
<p>Tests whether the document empty.</p>
<p>The UI framework provides a default implementation which always returns a true value.</p>
<p>The UI application can provide its own implementation. Typically, any application that has editable content should supply an implementation that acts according to the state of that content. Applications without associated document data need not supply an implementation.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
TBool
</code></td>
<td class="Cell"><p class="ValueDesc">
True, if the document is empty, false, otherwise.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../UikonCore/class_CEikDocument.html#%3a%3aCEikDocument" title="The base for all Uikon applications' documents"><code class="ApiItem">CEikDocument</code></a></li>
</ul>
<a name="2.11.3"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aHasChanged%28%29"></a>
<hr size="1" noshade>
<h3><code>HasChanged()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TBool HasChanged() const = 0;</code></p><h4 class="subheading">Description</h4>
<p>Tests whether the document has changed since it was last persisted.</p>
<p>An implementation of this function is supplied by the UI framework and need not be changed by the UI application.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
TBool
</code></td>
<td class="Cell"><p class="ValueDesc">
True, if the document has changed since the last time that it was persisted, false, otherwise.</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../UikonCore/class_CEikDocument.html#%3a%3aCEikDocument" title="The base for all Uikon applications' documents"><code class="ApiItem">CEikDocument</code></a></li>
</ul>
<a name="2.12"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Embedding</h2>
</div><div class="Bodytext">
<a name="2.12.2"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aGlassPictureL%28%29"></a>
<hr size="1" noshade>
<h3><code>GlassPictureL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual CPicture* GlassPictureL();</code></p><h4 class="subheading">Description</h4>
<p>Gets an object that can draw a representation of the document's content.</p>
<p>If the document supports being embedded as a glass door, then the UI application must provide an implementation for this function.</p>
<p>The default implementation raises an APPARC 8 panic.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CPicture*
</code></td>
<td class="Cell"><p class="ValueDesc">
A pointer to a glass door.</p></td>
</tr>
</table></td></tr></table>
<a name="2.13"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Password protection</h2>
</div><div class="Bodytext">
<a name="2.13.2"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aValidatePasswordL%28%29"></a>
<hr size="1" noshade>
<h3><code>ValidatePasswordL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void ValidatePasswordL() const;</code></p><h4 class="subheading">Description</h4>
<p>Checks the document password.</p>
<p>The default implementation is empty.</p>
<p>If a document is intended to be password protected, the UI application should provide an implementation that forces the user to enter the password and validate the input.</p>
<p>If the document is protected by a password and the password entered by the user is incorrect, the function should leave with <code>KErrLocked</code>, otherwise it should just return.</p>
<a name="2.14"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Accessing the application and process</h2>
</div><div class="Bodytext">
<a name="2.14.2"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aApplication%28%29"></a>
<hr size="1" noshade>
<h3><code>Application()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CApaApplication* Application() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns a pointer to the application that created the document.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CApaApplication*
</code></td>
<td class="Cell"><p class="ValueDesc">
A pointer to the document's associated application.
</p></td>
</tr>
</table></td></tr></table>
<a name="2.14.3"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aProcess%28%29"></a>
<hr size="1" noshade>
<h3><code>Process()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>CApaProcess* Process() const;</code></p><h4 class="subheading">Description</h4>
<p>Returns a pointer to the application process associated with this document.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CApaProcess*
</code></td>
<td class="Cell"><p class="ValueDesc">
A pointer to the application process associated with this document.
</p></td>
</tr>
</table></td></tr></table>
<a name="2.15"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Persistence</h2>
</div><div class="Bodytext">
<a name="2.15.2"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aCreateFileStoreLC%28%29"></a>
<hr size="1" noshade>
<h3><code>CreateFileStoreLC()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual CFileStore* CreateFileStoreLC(RFs&amp; aFs,const TDesC&amp; aFileName) = 0;</code></p><h4 class="subheading">Description</h4>
<p>Creates and fully initialises a new filestore and stores the document into it, replacing any existing file of the same name.</p>
<p>The function should put the pointer to the filestore object onto the cleanup stack.</p>
<p>An implementation of this function is supplied by the UI framework.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
RFs&amp; aFs
</code></td>
<td class="Cell"><p class="ValueDesc">
Handle to a file server session.
</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">
const TDesC&amp; aFileName
</code></td>
<td class="Cell"><p class="ValueDesc">
The full path name of the file to be created.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CFileStore*
</code></td>
<td class="Cell"><p class="ValueDesc">
A pointer to the newly constructed file store.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../UikonCore/class_CEikDocument.html#%3a%3aCEikDocument" title="The base for all Uikon applications' documents"><code class="ApiItem">CEikDocument</code></a></li>
</ul>
<a name="2.15.3"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aSaveL%28%29"></a>
<hr size="1" noshade>
<h3><code>SaveL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void SaveL() = 0;</code></p><h4 class="subheading">Description</h4>
<p>Stores the document to the current file, commits the changes, and marks the document status as unchanged.</p>
<p>Typically, the function is called by the application when it implements a &quot;Save&quot; type menu option in its User Interface.</p>
<p>An implementation of this function is supplied by the UI framework. This is adequate for direct file store applications. Applications using a permanent file store model, need to provide their own implementation.</p>
<p>If the function leaves, an implementation should ensure that any changes made to the file are rolled back, leaving the file in the state it was in before the function was called.</p>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../UikonCore/class_CEikDocument.html#%3a%3aCEikDocument" title="The base for all Uikon applications' documents"><code class="ApiItem">CEikDocument</code></a></li>
</ul>
<a name="2.15.4"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aStoreL%28%29"></a>
<hr size="1" noshade>
<h3><code>StoreL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void StoreL(CStreamStore&amp; aStore,CStreamDictionary&amp; aStreamDic) const = 0;</code></p><h4 class="subheading">Description</h4>
<p>Stores the document's content and state to the specified store, recording the identity of any headstreams created in the specified stream dictionary.</p>
<p>The store must be fully constructed before this function is called.</p>
<p>An empty implementation of this function is supplied by the UI framework. UI applications that need to persist any data must provide their own implementation.</p>
<p>If the function leaves, an implementation should ensure that the store and the stream dictionary are returned to the state they were in before the function was called.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CStreamStore&amp; aStore
</code></td>
<td class="Cell"><p class="ValueDesc">
The store into which document data is to be stored.
</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">
CStreamDictionary&amp; aStreamDic
</code></td>
<td class="Cell"><p class="ValueDesc">
The stream dictionary into which stream IDs and associated UIDs are to be recorded.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../UikonCore/class_CEikDocument.html#%3a%3aCEikDocument" title="The base for all Uikon applications' documents"><code class="ApiItem">CEikDocument</code></a></li>
</ul>
<a name="2.15.5"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aRestoreL%28%29"></a>
<hr size="1" noshade>
<h3><code>RestoreL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void RestoreL(const CStreamStore&amp; aStore,const CStreamDictionary&amp; aStreamDic) = 0;</code></p><h4 class="subheading">Description</h4>
<p>Restores the document's content and state from data persisted in the specified store.</p>
<p>An empty implementation of this function is supplied by the UI framework. UI applications that need to restore data must provide their own implementation.</p>
<p>If the function leaves, an implementation should ensure that the store and the stream dictionary are returned to the state they were in before the function was called.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
const CStreamStore&amp; aStore
</code></td>
<td class="Cell"><p class="ValueDesc">
The store from which document data is to be restored.
</p></td>
</tr>
<tr valign="top">
<td class="Cell" ><code class="Value">
const CStreamDictionary&amp; aStreamDic
</code></td>
<td class="Cell"><p class="ValueDesc">The stream dictionary containing stream IDs and associated UIDs.
</p></td>
</tr>
</table></td></tr></table>
<h4 class="subheading">See also:</h4>
<ul>
<li><a href="../UikonCore/class_CEikDocument.html#%3a%3aCEikDocument" title="The base for all Uikon applications' documents"><code class="ApiItem">CEikDocument</code></a></li>
</ul>
<a name="2.15.6"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aDetachFromStoreL%28%29"></a>
<hr size="1" noshade>
<h3><code>DetachFromStoreL()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual void DetachFromStoreL(CPicture::TDetach aDegree = CPicture::EDetachFull);</code></p><h4 class="subheading">Description</h4>
<p>Restores the document to the extent that it does not need the store further.</p><p> A document only keeps a pointer to a store if it implements deferred loading. This also tells the document that any store pointer that it might have is just about to become invalid.</p>
<p>An empty implementation of this function is supplied by the UI framework. UI applications that support deferred loading or embedding should provide an implementation.</p>
<p>If a document supports embedding, then it should propagate the DetachFromStoreL() call on to all embedded objects that it contains.</p>
<p>If the function leaves, the operation should be aborted because the document has not successfully detached from the store. Continuing with the operation may leave the document in an unsafe state or cause user data to be lost.</p>
<h4 class="subheading">Parameters</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CPicture::TDetach aDegree
</code></td>
<td class="Cell"><p class="ValueDesc">
The degree of detachment required.</p></td>
</tr>
</table></td></tr></table>
<a name="2.16"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Document capability</h2>
</div><div class="Bodytext">
<a name="2.16.2"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aCapability%28%29"></a>
<hr size="1" noshade>
<h3><code>Capability()</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>virtual TCapability Capability() const;</code></p><h4 class="subheading">Description</h4>
<p>Gets the document's capabilities.</p><p>Capabilities are encapsulated by an instance of a <code>TCapability</code> class, a public class defined inside this class.</p>
<p>The default implementation returns a default <code>TCapability</code> object, indicating that the document does not support any of the defined capabilities.</p>
<p>If a document does support one or more of the capabilities, it should override this function to return a suitably initialised object.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
CApaDocument::TCapability</code></td>
<td class="Cell"><p class="ValueDesc">
The document's capabilities
</p></td>
</tr>
</table></td></tr></table>
<a name="2.17"></a></div><div class="Head2">
<table cellpadding="0" cellspacing="0" border="0" width="97%"><tr valign="bottom"><td align="right"><p><a href="#_top"><img alt="[Top]" src="../../../stock/arrow_up_2.gif" border="0"align="bottom"></a></p></td></tr></table><hr size="2" noshade>
<h2>Scoped classes</h2>
</div><div class="Bodytext">
<a name="2.17.2"></a></div><div class="Head3">
<a name="%3a%3aCApaDocument%3a%3aTCapability"></a>
<hr size="1" noshade>
<h3>Class <code>TCapability</code></h3>
</div><div class="Bodytext"><p class="Prototype"><code>class TCapability</code></p><h4 class="subheading">Description</h4>
<p><code>CApaDocument</code> capabilities.</p><p>Defined in <code>CApaDocument::TCapability</code>:
<br><code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aTCapability%3a%3aCanDrawGlass%28%29" title="Tests whether the document supports being embedded as a glass door">CanDrawGlass()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aTCapability%3a%3aCanPrint%28%29" title="Tests whether the document supports being printed without using the full application UI">CanPrint()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aTCapability%3a%3aSetCanDrawGlass%28%29" title="Sets the document as being capable of being embedded as a glass door">SetCanDrawGlass()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aTCapability%3a%3aSetCanPrint%28%29" title="Sets the document as being capable of being printed without using the full application UI">SetCanPrint()</a></code>, <code class="ApiItem"><a href="CApaDocumentClass.html#%3a%3aCApaDocument%3a%3aTCapability%3a%3aTCapability%28%29" title="Constructs a default capability object">TCapability()</a></code>
</p>
<a name="2.17.2.4"></a><h4>Member functions</h4>
<a name="2.17.2.4.2"></a><a name="%3a%3aCApaDocument%3a%3aTCapability%3a%3aTCapability%28%29"></a>
<h4><code>TCapability()</code></h4><hr size="8" noshade>
<p class="Prototype"><code>TCapability();</code></p><h4 class="subheading">Description</h4>
<p>Constructs a default capability object.</p>
<p>All capabilities are marked as &quot;not supported&quot;.</p>
<a name="2.17.2.4.3"></a><a name="%3a%3aCApaDocument%3a%3aTCapability%3a%3aCanDrawGlass%28%29"></a>
<h4><code>CanDrawGlass()</code></h4><hr size="8" noshade>
<p class="Prototype"><code>TBool CanDrawGlass() const;</code></p><h4 class="subheading">Description</h4>
<p>Tests whether  the document supports being embedded as a glass door.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
TBool</code></td>
<td class="Cell"><p class="ValueDesc">
True, if embedding as a glass door is supported; false, otherwise.</p></td>
</tr>
</table></td></tr></table>
<a name="2.17.2.4.4"></a><a name="%3a%3aCApaDocument%3a%3aTCapability%3a%3aCanPrint%28%29"></a>
<h4><code>CanPrint()</code></h4><hr size="8" noshade>
<p class="Prototype"><code>TBool CanPrint() const;</code></p><h4 class="subheading">Description</h4>
<p>Tests whether the document supports being printed without using the full application UI.</p>
<h4 class="subheading">Return value</h4>
<table cellpadding="0" border="0"
cellspacing="0"><tr><td class="ValueTableWrap"><table border="0"
cellpadding="5" cellspacing="1">
<tr valign="top">
<td class="Cell" ><code class="Value">
TBool</code></td>
<td class="Cell"><p class="ValueDesc">
True, if printing is supported; false, otherwise.</p></td>
</tr>
</table></td></tr></table>
<a name="2.17.2.4.5"></a><a name="%3a%3aCApaDocument%3a%3aTCapability%3a%3aSetCanDrawGlass%28%29"></a>
<h4><code>SetCanDrawGlass()</code></h4><hr size="8" noshade>
<p class="Prototype"><code>void SetCanDrawGlass();</code></p><h4 class="subheading">Description</h4>
<p>Sets the document as being capable of being embedded as a glass door.</p>
<a name="2.17.2.4.6"></a><a name="%3a%3aCApaDocument%3a%3aTCapability%3a%3aSetCanPrint%28%29"></a>
<h4><code>SetCanPrint()</code></h4><hr size="8" noshade>
<p class="Prototype"><code>void SetCanPrint();</code></p><h4 class="subheading">Description</h4>
<p>Sets the document as being capable of being printed without using the full application UI.</p>

</div><div class="Footer">
<hr noshade size="1">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td><p class="copyrightStatement">Copyright &copy;2002&nbsp; Symbian Ltd. &nbsp; &nbsp; &nbsp;	6.1-00174
</p></td>
<td align="right"><p><a href="#_top"><img
alt="[Top]" src="../../../stock/arrow_up.gif" border="0"
align="bottom"></a></p></td>
</table>
</div>
</body>
</html>
